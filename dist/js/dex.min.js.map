{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","../../lib/pubsub.js","dex.min.js","../../src/array/array.js","../../src/color/color.js","../../src/config/config.js","../../src/console/console.js","../../src/csv/csv.js","../../src/datagen/datagen.js","../../src/dex.js","../../src/json/json.js","../../src/matrix/matrix.js","../../src/object/object.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","context","init","channels","funcType","Function","publish","len","params","x","args","arguments","subs","Array","prototype","splice","setTimeout","apply","subscribe","channel","callback","push","unsubscribe","handle","y","define","amd","PubSub","this",2,"dex","array","my","slice","rowRange","maxRows","range","arrayCopy","copy","isArray","indexOfById","id","indexBands","data","numValues","console","log","interval","residual","tickIndices","last","Math","floor","max","unique","uniqueMap","hasOwnProperty","extent","indices","values","getArrayValues","min","debug","differenceDeprecated","a1","a2","j","diff","selectiveJoinDeprecated","rows","delimiter","delim","join",3,"color","toHex","substr","digits","exec","red","parseInt","green","blue","rgb","toString","colorScheme","numColors","d3","scale","category10","category20","category20b","category20c","ordinal","colorbrewer","c","effColors","pow","ceil","shadeColor","percent","R","substring","G","B","RR","GG","BB","gradient","baseColor","charAt","colorToHex","gradientId","darkColor","grad","select","selectAll","enter","append","attr",4,"config","expand","name","expanded","indexOf","object","setHierarchical","clone","isEmpty","expand_deprecate","ci","expandAndOverlay","top","bottom","overlay","font","custom","defaults","decoration","family","letterSpacing","size","style","weight","wordSpacing","variant","configureFont","node","setAttr","text","textLength","undefined","lengthAdjust","transform","glyphOrientationVertical","dx","dy","writingMode","anchor","fill","format","configureText","setStyle","callIfDefined","configureFill","stroke","width","opacity","dasharray","configureStroke","fillColor","fillOpacity","link","d","events","configureLink","configureEvents","rectangle","height","rx","ry","configureRectangle","mouseover","key","setEventHandler","line","start","point","end","configureLine","path","configurePath","getCallers","caller","callers","currentCaller","reverse","getCallerString","eventType","eventHandler","callerStr","callee","isFunction","on","warn","value","optionValue","option","fn","configurePoint","center","cx","cy","configureShapeStyle","circle","title","configureCircle","configureAxis_deprecated","axis","svg","ticks","tick","count","tickSubdivide","subdivide","tickSize","major","minor","tickPadding","padding","tickFormat","orient","label","xaxis_deprecate","linear","yaxis_deprecate","callConditionally","type","tickValues","innerTickSize","outerTickSize","configureAxis","forEach","createAxis","userConfig","fmap","linearScale","sqrt","sqrtScale","powScale","time","timeScale","logScale","ordinalScale","quantile","quantileScale","quantize","quantizeScale","identity","identityScale","createScale","configureScale","domain","rangeRound","interpolate","clamp","nice","rangeRoundBands","rangePoints","rangeBands","thresholdScale","property","trace",5,"logLevels","TRACE","DEBUG","NORMAL","WARN","FATAL","NONE","logLevel","logWithLevel","msgLevel","msg","dir","fatal","_",6,7,"csv","header","transpose","matrix","getConnectionMatrix","ri","row","cid","connectionMatrix","uniques","src","dest","nameToIndex","flatten","connections","createMap","keyIndex","rowMap","map","toJson","rowIndex","columnIndex","jsonRow","jsonData","toColumnArrayJson","json","toHierarchicalJson","getChildren","depth","cname","kids","createChild","category","children","child","connect","createRowMap","columnSlice","columns","getNumericColumnNames","possibleNumeric","numericColumns","isNumeric","guessTypes","testResults","hdr","numCols","date","Date","isNaN","getTime","types","results","notDate","notNumber","strictTypes","Double","getNumericIndices","numericIndices","isColumnNumeric","columnNum","group","compare","b","si","h","groupName","groups","returnGroups","sort","visitCells","func","longestWord","longest","col","numericSubset",8,"datagen","randomMatrix","spec","random","identityCsv","identityHeader","identityMatrix",9,"$","version","ui","jqueryui","charts","dygraphs","google","handlebars","threejs","jQuery",10,"toCsv","keys","keyMap",11,"tmatrix","ncol","ncols","transposedMatrix","transposeMatrix","combine","matrix1","matrix2","oci","ici","result","addIndex","indexMatrix","unshift","maxValue","parseFloat","minValue",12,"obj","setTime","isElement","isNode","Object","prop","Node","nodeType","nodeName","HTMLElement","contains","container","visit","isFinite","hierarchy","split"],"mappings":"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","file":"dex.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\r\n * pubsub.js\r\n *\r\n * A tiny, optimized, tested, standalone and robust\r\n * pubsub implementation supporting different javascript environments\r\n *\r\n * @author Federico \"Lox\" Lucignano <http://plus.ly/federico.lox>\r\n *\r\n * @see https://github.com/federico-lox/pubsub.js\r\n */\r\n\r\n/*global define, module*/\r\n(function (context) {\r\n  'use strict';\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  function init() {\r\n    //the channel subscription hash\r\n    var channels = {},\r\n    //help minification\r\n      funcType = Function;\r\n\r\n    return {\r\n      /*\r\n       * @public\r\n       *\r\n       * Publish some data on a channel\r\n       *\r\n       * @param String channel The channel to publish on\r\n       * @param Mixed argument The data to publish, the function supports\r\n       * as many data parameters as needed\r\n       *\r\n       * @example Publish stuff on '/some/channel'.\r\n       * Anything subscribed will be called with a function\r\n       * signature like: function(a,b,c){ ... }\r\n       *\r\n       * PubSub.publish(\r\n       *\t\t\"/some/channel\", \"a\", \"b\",\r\n       *\t\t{total: 10, min: 1, max: 3}\r\n       * );\r\n       */\r\n      publish: function () {\r\n        //help minification\r\n        var args = arguments,\r\n        // args[0] is the channel\r\n          subs = channels[args[0]],\r\n          len,\r\n          params,\r\n          x;\r\n\r\n        if (subs) {\r\n          len = subs.length;\r\n          params = (args.length > 1) ?\r\n            Array.prototype.splice.call(args, 1) : [];\r\n\r\n          //run the callbacks asynchronously,\r\n          //do not block the main execution process\r\n          setTimeout(\r\n            function () {\r\n              //executes callbacks in the order\r\n              //in which they were registered\r\n              for (x = 0; x < len; x += 1) {\r\n                subs[x].apply(context, params);\r\n              }\r\n\r\n              //clear references to allow garbage collection\r\n              subs = context = params = null;\r\n            },\r\n            0\r\n          );\r\n        }\r\n      },\r\n\r\n      /*\r\n       * @public\r\n       *\r\n       * Register a callback on a channel\r\n       *\r\n       * @param String channel The channel to subscribe to\r\n       * @param Function callback The event handler, any time something is\r\n       * published on a subscribed channel, the callback will be called\r\n       * with the published array as ordered arguments\r\n       *\r\n       * @return Array A handle which can be used to unsubscribe this\r\n       * particular subscription\r\n       *\r\n       * @example PubSub.subscribe(\r\n       *\t\t\t\t\"/some/channel\",\r\n       *\t\t\t\tfunction(a, b, c){ ... }\r\n       *\t\t\t);\r\n       */\r\n      subscribe: function (channel, callback) {\r\n        if (typeof channel !== 'string') {\r\n          throw \"invalid or missing channel\";\r\n        }\r\n\r\n        if (!(callback instanceof funcType)) {\r\n          throw \"invalid or missing callback\";\r\n        }\r\n\r\n        if (!channels[channel]) {\r\n          channels[channel] = [];\r\n        }\r\n\r\n        channels[channel].push(callback);\r\n\r\n        return {channel: channel, callback: callback};\r\n      },\r\n\r\n      /*\r\n       * @public\r\n       *\r\n       * Disconnect a subscribed function f.\r\n       *\r\n       * @param Mixed handle The return value from a subscribe call or the\r\n       * name of a channel as a String\r\n       * @param Function callback [OPTIONAL] The event handler originaally\r\n       * registered, not needed if handle contains the return value\r\n       * of subscribe\r\n       *\r\n       * @example\r\n       * var handle = PubSub.subscribe(\"/some/channel\", function(){});\r\n       * PubSub.unsubscribe(handle);\r\n       *\r\n       * or\r\n       *\r\n       * PubSub.unsubscribe(\"/some/channel\", callback);\r\n       */\r\n      unsubscribe: function (handle, callback) {\r\n        if (handle.channel && handle.callback) {\r\n          callback = handle.callback;\r\n          handle = handle.channel;\r\n        }\r\n\r\n        if (typeof handle !== 'string') {\r\n          throw \"invalid or missing channel\";\r\n        }\r\n\r\n        if (!(callback instanceof funcType)) {\r\n          throw \"invalid or missing callback\";\r\n        }\r\n\r\n        var subs = channels[handle],\r\n          x,\r\n          y = (subs instanceof Array) ? subs.length : 0;\r\n\r\n        for (x = 0; x < y; x += 1) {\r\n          if (subs[x] === callback) {\r\n            subs.splice(x, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  //UMD\r\n  if (typeof define === 'function' && define.amd) {\r\n    //AMD module\r\n    define('pubsub', init);\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    //CommonJS module\r\n    module.exports = init();\r\n  } else {\r\n    //traditional namespace\r\n    context.PubSub = init();\r\n  }\r\n}(this));","function DexComponent(e,t){return e=e||{},t=t||{},this.registry={},this.debug=!1,this.config=e.hasOwnProperty(\"config\")?dex.config.expandAndOverlay(e.config,t):dex.config.expandAndOverlay(e,t),dex.console.log(\"DexComponent Configuration\",this.config),this.config.channel||(this.config.channel=(this.config.parent||\"#parent\")+\"/\"+(this.config.id||\"unknown-id\")),this.attr=function(e,t){return 0==arguments.length?this.config:1==arguments.length?this.config[e]:(2==arguments.length&&dex.object.setHierarchical(this.config,e,t,\".\"),this)},this.subscribe=function(e,t,n){if(3==arguments.length){var r=e.config.channel+\"/\"+t;return dex.console.log(\"subscribe to \"+r),arguments.length<3?(dex.console.log(\"failed\"),!1):bus.subscribe(r,n)}return!1},this.unsubscribe=function(e){return bus.unsubscribe(e)},this.publish=function(e,t){var n=e,r=t||e;1==arguments.length&&(n=e.type||\"unknown-event\");var o=this.config.channel+\"/\"+n;return dex.console.log(\"publish to \"+o),bus.publish(o,r)},this.addListener=function(e,t,n){this.debug&&dex.console.debug(\"Registering Target: \"+e+\"=\"+t),this.registry.hasOwnProperty(e)||(this.registry[e]=[]),this.registry[e].push({target:t,method:n}),dex.console.trace(this.config.id,this.registry)},this.notify=function(e){var t,n;if(this.debug&&console.log(\"notify: \"+e.type),!this.registry.hasOwnProperty(e.type))return this;for(e.source=this,t=this.registry[e.type],dex.console.trace(\"TARGETS: \"+t.length),dex.console.trace(t),n=0;n<t.length;n++)t[n].method(e,t[n].target)},this.render=function(){console.log(\"Unimplemented routine: render()\")},this.update=function(){console.log(\"Unimplemented routine: update()\")},this}!function(e){\"use strict\";function t(){var t={},n=Function;return{publish:function(){var n,r,o,i=arguments,a=t[i[0]];a&&(n=a.length,r=i.length>1?Array.prototype.splice.call(i,1):[],setTimeout(function(){for(o=0;n>o;o+=1)a[o].apply(e,r);a=e=r=null},0))},subscribe:function(e,r){if(\"string\"!=typeof e)throw\"invalid or missing channel\";if(!(r instanceof n))throw\"invalid or missing callback\";return t[e]||(t[e]=[]),t[e].push(r),{channel:e,callback:r}},unsubscribe:function(e,r){if(e.channel&&e.callback&&(r=e.callback,e=e.channel),\"string\"!=typeof e)throw\"invalid or missing channel\";if(!(r instanceof n))throw\"invalid or missing callback\";var o,i=t[e],a=i instanceof Array?i.length:0;for(o=0;a>o;o+=1)if(i[o]===r){i.splice(o,1);break}}}}\"function\"==typeof define&&define.amd?define(\"pubsub\",t):\"object\"==typeof module&&module.exports?module.exports=t():e.PubSub=t()}(this);var jquery=require(\"jquery\"),underscore=require(\"underscore\"),bus=PubSub,dex=function(e){var t={};return t.version=\"0.7\",t.range=function(e,t){for(var n=[],r=e+t,o=e;r>o;o++)n.push(o);return n},t.svg={},t.ui={jqueryui:{}},t.charts={d3:{map:{}},dygraphs:{},google:{},handlebars:{},threejs:{}},t}(jQuery,_);dex.array=function(){var e={};return e.slice=function(e,t,n){var r,o,i=[],a=dex.array.copy(e);if(arguments.length<2)return a;for(2==arguments.length?r=Array.isArray(t)?t:dex.range(t,a.length-t):arguments.length>2&&(r=Array.isArray(t)?t:dex.range(t,n)),o=0;o<r.length;o++)i.push(a[r[o]]);return i},e.indexOfById=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return n;return-1},e.indexBands=function(e,t){dex.console.log(\"BANDS\");var n,r,o,i,a;if(0>=t)o=[];else if(1==t)o=[Math.floor(t/2)];else if(2==t)o=[0,e.length-1];else{for(n=Math.max(1,Math.floor(e.length/(t-1))),r=Math.floor(e.length%(t-1)),o=[0],i=e.length-n,dex.console.log(\"TEST\",e,t,n,r,i),a=n;i>=a;a+=n)r>0&&(a+=1,r-=1),o.push(a);o.push(e.length-1)}return dex.console.log(\"BANDS\"),o},e.unique=function(e){var t,n,r={},o=[];for(t=0,n=e.length;n>t;t+=1)r.hasOwnProperty(e[t])||(o.push(e[t]),r[e[t]]=1);return o},e.extent=function(e,t){var n=getArrayValues(e,t),r=Math.max.apply(null,n),o=Math.min.apply(null,n);return dex.console.debug(\"EXTENT:\",n,[o,r]),[o,r]},e.differenceDeprecated=function(e,t){var n,r,o=[],i=[];for(n=0;n<e.length;n++)o[e[n]]=!0;for(n=0;n<t.length;n++)o[t[n]]?delete o[t[n]]:o[t[n]]=!0;for(r in o)i.push(r);return i},e.selectiveJoinDeprecated=function(e,t,n){var r=\":::\";if(arguments.length>=3)r=n;else if(2===arguments.length)return dex.array.slice(e,t).join(n);throw\"Invalid arguments.\"},e.copy=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},e}(),dex.color=function(){var e={};return e.toHex=function(e){if(\"#\"===e.substr(0,1))return e;var t=/rgb\\((\\d+),(\\d+),(\\d+)\\)/.exec(e),n=parseInt(t[1]),r=parseInt(t[2]),o=parseInt(t[3]),i=o|r<<8|n<<16;return\"#\"+i.toString(16)},e.colorScheme=function(e,t){if(\"1\"==e)return d3.scale.category10();if(\"2\"==e)return d3.scale.category20();if(\"3\"==e)return d3.scale.category20b();if(\"4\"==e)return d3.scale.category20c();if(\"HiContrast\"==e)return d3.scale.ordinal().range(colorbrewer[e][9]);if(e in colorbrewer){var n,r=Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)));for(r>128&&(r=256),n=r;n>=2;n--)if(colorbrewer[e][n])return d3.scale.ordinal().range(colorbrewer[e][n]);for(n=r;256>=n;n++)if(colorbrewer[e][n])return d3.scale.ordinal().range(colorbrewer[e][n]);return d3.scale.category20()}return d3.scale.category20()},e.shadeColor=function(e,t){var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);n=parseInt(n*(100+t)/100),r=parseInt(r*(100+t)/100),o=parseInt(o*(100+t)/100),n=255>n?n:255,r=255>r?r:255,o=255>o?o:255;var i=1==n.toString(16).length?\"0\"+n.toString(16):n.toString(16),a=1==r.toString(16).length?\"0\"+r.toString(16):r.toString(16),c=1==o.toString(16).length?\"0\"+o.toString(16):o.toString(16);return\"#\"+i+a+c},e.gradient=function(e){\"r\"==e.charAt(0)&&(e=colorToHex(e));var t;t=\"gradient\"+e.substring(1),console.log(\"GradientId: \"+t),console.log(\"BaseColor : \"+e);var n=shadeColor(e,-20),r=d3.select(\"#gradients\").selectAll(\"#\"+t).data([t]).enter().append(\"radialGradient\").attr(\"class\",\"colorGradient\").attr(\"id\",t).attr(\"gradientUnits\",\"objectBoundingBox\").attr(\"fx\",\"30%\").attr(\"fy\",\"30%\");return r.append(\"stop\").attr(\"offset\",\"0%\").attr(\"style\",\"stop-color:#FFFFFF\"),r.append(\"stop\").attr(\"offset\",\"40%\").attr(\"style\",\"stop-color:\"+e),r.append(\"stop\").attr(\"offset\",\"100%\").attr(\"style\",\"stop-color:\"+n),\"url(#\"+t+\")\"},e}(),dex.config=function(){var e={};return e.expand=function(e){var t,n={};if(!e)return e;for(var t in e)e.hasOwnProperty(t)&&(t&&t.indexOf(\".\")>-1?(n[t]=e[t],dex.object.setHierarchical(n,t,dex.object.clone(n[t]),\".\"),delete n[t]):n[t]=dex.object.isEmpty(e[t])?dex.object.clone(e[t]):dex.config.expand(e[t]));return n},e.expand_deprecate=function(e){var t,n,r;if(!e)return e;r=dex.object.clone(e);for(t in e)e.hasOwnProperty(t)&&(n=t?t.indexOf(\".\"):-1,n>-1&&(dex.object.setHierarchical(r,t,dex.object.clone(r[t]),\".\"),delete r[t]));return r},e.expandAndOverlay=function(e,t){return dex.object.overlay(dex.config.expand(e),dex.config.expand(t))},e.font=function(e){var t={decoration:\"none\",family:\"sans-serif\",letterSpacing:\"normal\",size:14,style:\"normal\",weight:\"normal\",wordSpacing:\"normal\",variant:\"normal\"},n=dex.config.expandAndOverlay(e,t);return n},e.configureFont=function(e,t){return t&&(dex.config.setAttr(e,\"font-family\",t.family),dex.config.setAttr(e,\"font-size\",t.size),dex.config.setAttr(e,\"font-weight\",t.weight),dex.config.setAttr(e,\"font-style\",t.style),dex.config.setAttr(e,\"text-decoration\",t.decoration),dex.config.setAttr(e,\"word-spacing\",t.wordSpacing),dex.config.setAttr(e,\"letter-spacing\",t.letterSpacing),dex.config.setAttr(e,\"variant\",t.variant)),e},e.text=function(e){var t={font:dex.config.font(),x:0,y:0,textLength:void 0,lengthAdjust:void 0,transform:\"\",glyphOrientationVertical:void 0,text:void 0,dx:0,dy:0,writingMode:void 0,anchor:\"start\",fill:dex.config.fill(),format:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.configureText=function(e,t){return t&&(dex.config.setAttr(e,\"x\",t.x),dex.config.setAttr(e,\"y\",t.y),dex.config.setAttr(e,\"dx\",t.dx),dex.config.setAttr(e,\"dy\",t.dy),dex.config.setStyle(e,\"text-anchor\",t.anchor),dex.config.configureFont(e,t.font),dex.config.setAttr(e,\"textLength\",t.textLength),dex.config.setAttr(e,\"lengthAdjust\",t.lengthAdjust),dex.config.setAttr(e,\"transform\",t.transform),dex.config.setAttr(e,\"glyph-orientation-vertical\",t.glyphOrientationVertical),dex.config.setAttr(e,\"writing-mode\",t.writingMode),dex.config.callIfDefined(e,\"text\",t.text),dex.config.configureFill(e,t.fill)),e},e.stroke=function(e){var t={width:1,color:\"black\",opacity:1,dasharray:\"\",transform:\"\"},n=dex.config.expandAndOverlay(e,t);return n},e.configureStroke=function(e,t){return t&&(dex.config.setAttr(e,\"stroke\",t.color),dex.config.setStyle(e,\"stroke-width\",t.width),dex.config.setStyle(e,\"stroke-opacity\",t.opacity),dex.config.setStyle(e,\"stroke-dasharray\",t.dasharray),dex.config.setAttr(e,\"transform\",t.transform)),e},e.fill=function(e){var t={fillColor:\"grey\",fillOpacity:1},n=dex.config.expandAndOverlay(e,t);return n},e.configureFill=function(e,t){return t&&(dex.config.setStyle(e,\"fill\",t.fillColor),dex.config.setStyle(e,\"fill-opacity\",t.fillOpacity)),e},e.link=function(e){var t={fill:dex.config.fill(),stroke:dex.config.stroke(),transform:\"\",d:void 0,events:dex.config.events()},n=dex.config.expandAndOverlay(e,t);return n},e.configureLink=function(e,t){return t&&(dex.config.configureStroke(e,t.stroke),dex.config.configureFill(e,t.fill),dex.config.setAttr(e,\"transform\",t.transform),dex.config.setAttr(e,\"d\",t.d),dex.config.configureEvents(e,t.events)),e},e.rectangle=function(e){var t={width:50,height:50,x:0,y:0,rx:0,ry:0,stroke:dex.config.stroke(),opacity:1,color:d3.scale.category20(),transform:void 0,events:dex.config.events()};return e&&(t=dex.object.overlay(e,t)),t},e.configureRectangle=function(e,t){return t&&(dex.config.setAttr(e,\"width\",t.width),dex.config.setAttr(e,\"height\",t.height),dex.config.setAttr(e,\"x\",t.x),dex.config.setAttr(e,\"y\",t.y),dex.config.setAttr(e,\"rx\",t.rx),dex.config.setAttr(e,\"ry\",t.ry),dex.config.setAttr(e,\"opacity\",t.opacity),dex.config.setAttr(e,\"fill\",t.color),dex.config.setAttr(e,\"transform\",t.transform),dex.config.configureStroke(e,t.stroke),dex.config.configureEvents(e,t.events)),e},e.events=function(e){var t={mouseover:function(e){}},n=t;return e&&(n=dex.object.overlay(e,t)),n},e.configureEvents=function(e,t){if(t)for(var n in t)dex.config.setEventHandler(e,n,t[n]);return e},e.line=function(e){var t={start:dex.config.point(),end:dex.config.point(),stroke:dex.config.stroke()},n=dex.config.expandAndOverlay(e,t);return n},e.configureLine=function(e,t){return t&&(dex.config.setAttr(e,\"x1\",t.start.x),dex.config.setAttr(e,\"y1\",t.start.y),dex.config.setAttr(e,\"x2\",t.end.x),dex.config.setAttr(e,\"y2\",t.end.y),dex.config.configureStroke(e,t.stroke)),e},e.path=function(e){var t={fill:dex.config.fill(),stroke:dex.config.stroke()},n=dex.config.expandAndOverlay(e,t);return n},e.configurePath=function(e,t){return t&&(dex.config.configureFill(e,t.fill),dex.config.configureStroke(e,t.stroke)),e},e.getCallers=function(e){for(var t=[],n=e;n;n=n.caller)n.name&&t.push(n.name);return t.reverse()},e.getCallerString=function(e){return dex.config.getCallers(e).join(\"->\")},e.setEventHandler=function(e,t,n){var r=dex.config.getCallerString(arguments.callee.caller);return e?dex.object.isFunction(e.on)?(\"undefined\"!=typeof n?(dex.console.debug(r+\": Set Event Handler: '\"+t+\"'='\"+n+\"'\"),e.on(t,n)):dex.console.debug(r+=\": Undefined Event Handler: '\"+t+\"'='\"+n+\"'\"),e):(dex.console.warn(r+\": dex.config.setEventHandler(eventType='\"+t+\"', eventHandler='\"+n+\"') : target node is missing function: node.on(eventType,eventHandler).  Node dump:\",e),e):(dex.console.warn(r+\": dex.config.setEventHandler(eventType='\"+t+\"eventHandler=\"+n+\") : node is null.\"),e)},e.setAttr=function(e,t,n){var r=dex.config.getCallerString(arguments.callee.caller);return e?dex.object.isFunction(e.attr)?(\"undefined\"!=typeof n?(dex.console.debug(r+\": Set Attr: '\"+t+\"'='\"+n+\"'\"),e.attr(t,dex.config.optionValue(n))):dex.console.debug(r+=\": Undefined Attr: '\"+t+\"'='\"+n+\"'\"),e):(dex.console.warn(r+\": dex.config.setAttr(name='\"+t+\"', value='\"+n+\"') : target node is missing function: node.attr.  Node dump:\",e),e):(dex.console.warn(r+\": dex.config.setAttr(name='\"+t+\"value=\"+n+\") : node is null.\"),e)},e.setStyle=function(e,t,n){var r=dex.config.getCallerString(arguments.callee.caller);return e?dex.object.isFunction(e.style)?(\"undefined\"!=typeof n&&e&&dex.object.isFunction(e.style)?(dex.console.debug(r+\": Set Style: name='\"+t+\"', Value Dump:\",dex.config.optionValue(n)),e.style(t,dex.config.optionValue(n))):dex.console.debug(r+\": Undefined Style: name='\"+t+\"', Value Dump:\",n),e):(dex.console.warn(r+\": dex.config.setStyle(name='\"+t+\"', value='\"+n+\"') : target node is missing function: node.style.  Node Dump:\",e),e):(dex.console.warn(r+\": dex.config.setAttr(name='\"+t+\"value=\"+n+\") : node is null.\"),e)},e.optionValue=function(e){return function(t,n){return dex.object.isFunction(e)?e(t,n):e}},e.callIfDefined=function(e,t,n){return\"undefined\"!=typeof n?e[t](dex.config.optionValue(n)):e},e.point=function(e){var t={x:void 0,y:void 0};return e&&(t=dex.object.overlay(e,t)),t},e.configurePoint=function(e,t){return t&&e.attr(\"x\",t.center.cx).attr(\"y\",t.center.cy),e},e.configureShapeStyle=function(e,t){return t&&e.call(dex.config.configureStroke,t.stroke).attr(\"opacity\",t.opacity).style(\"fill\",t.color),e},e.circle=function(e){var t={cx:0,cy:0,r:10,fill:dex.config.fill(),stroke:dex.config.stroke(),transform:\"\",title:\"\",events:dex.config.events()};return e&&(t=dex.object.overlay(e,t)),t},e.configureCircle=function(e,t){return t&&(dex.config.setAttr(e,\"r\",t.r),dex.config.setAttr(e,\"cx\",t.cx),dex.config.setAttr(e,\"cy\",t.cy),dex.config.setAttr(e,\"transform\",t.transform),dex.config.setAttr(e,\"title\",t.title),dex.config.configureStroke(e,t.stroke),dex.config.configureFill(e,t.fill),dex.config.configureEvents(e,t.events)),e},e.configureAxis_deprecated=function(e){var t;if(e){var t=d3.svg.axis().ticks(e.tick.count).tickSubdivide(e.tick.subdivide).tickSize(e.tick.size.major,e.tick.size.minor,e.tick.size.end).tickPadding(e.tick.padding);dex.object.isFunction(e.tick.format)||t.tickFormat(e.tick.format),t.orient(e.orient).scale(e.scale)}else t=d3.svg.axis();return t},e.tick=function(e){var t={count:5,subdivide:3,size:{major:5,minor:3,end:5},padding:5,format:d3.format(\",d\"),label:dex.config.text()};return e&&(t=dex.object.overlay(e,t)),t},e.xaxis_deprecate=function(e){var t={scale:d3.scale.linear(),orient:\"bottom\",tick:this.tick(),label:dex.config.text()};return e&&(t=dex.object.overlay(e,t)),t},e.yaxis_deprecate=function(e){var t={scale:d3.scale.linear(),orient:\"left\",tick:this.tick(),label:dex.config.text({transform:\"rotate(-90)\"})};return e&&(t=dex.object.overlay(e,t)),t},e.callConditionally=function(e,t){void 0!==t&&e(t)},e.axis=function(e){var t={scale:dex.config.scale({type:\"linear\"}),orient:\"bottom\",ticks:void 0,tickValues:void 0,tickSize:void 0,innerTickSize:void 0,outerTickSize:void 0,tickPadding:void 0,tickFormat:void 0,tickSubdivide:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.configureAxis=function(e,t){return t&&[\"scale\",\"orient\",\"ticks\",\"tickValues\",\"tickSize\",\"innerTickSize\",\"outerTickSize\",\"tickPadding\",\"tickFormat\",\"tickSubdivide\"].forEach(function(n){dex.config.callConditionally(e[n],t[n])}),e},e.createAxis=function(e){var t=dex.config.axis(e);return dex.config.configureAxis(d3.svg.axis(),t)},e.scale=function(e){var t={linear:dex.config.linearScale,sqrt:dex.config.sqrtScale,pow:dex.config.powScale,time:dex.config.timeScale,log:dex.config.logScale,ordinal:dex.config.ordinalScale,quantile:dex.config.quantileScale,quantize:dex.config.quantizeScale,identity:dex.config.identityScale,ordinal:dex.config.ordinalScale},n={type:\"linear\"},r=dex.config.expandAndOverlay(e,n);return t[r.type](r)},e.createScale=function(e){var t,n={linear:d3.scale.linear,sqrt:d3.scale.sqrt,pow:d3.scale.pow,time:d3.time.scale,log:d3.scale.log,ordinal:d3.scale.ordinal,quantile:d3.scale.quantile,quantize:d3.scale.quantize,identity:d3.scale.identity};return e?(t=n[e.type](),dex.config.configureScale(t,e)):t=d3.scale.linear(),t},e.linearScale=function(e){var t={type:\"linear\",domain:[0,100],range:[0,800],rangeRound:void 0,interpolate:void 0,clamp:void 0,nice:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.powScale=function(e){var t={type:\"pow\",domain:[0,100],range:[0,800],rangeRound:void 0,interpolate:void 0,clamp:void 0,nice:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.sqrtScale=function(e){var t={type:\"sqrt\",domain:[0,100],range:[0,800],rangeRound:void 0,interpolate:void 0,clamp:void 0,nice:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.logScale=function(e){var t={type:\"log\",domain:[0,100],range:[0,800],rangeRound:void 0,interpolate:void 0,clamp:void 0,nice:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.ordinalScale=function(e){var t={type:\"ordinal\",domain:void 0,range:void 0,rangeRoundBands:void 0,rangePoints:void 0,rangeBands:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.timeScale=function(e){var t={type:\"time\",domain:void 0,range:void 0,rangeRound:void 0,interpolate:void 0,clamp:void 0,ticks:void 0,tickFormat:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.quantileScale=function(e){var t={type:\"quantile\",domain:void 0,range:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.quantizeScale=function(e){var t={type:\"quantize\",domain:void 0,range:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.identityScale=function(e){var t={type:\"identity\",domain:void 0,range:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.thresholdScale=function(e){var t={type:\"threshold\",domain:void 0,range:void 0},n=dex.config.expandAndOverlay(e,t);return n},e.configureScale=function(e,t){if(t)for(var n in t)dex.console.trace(\"ConfigureScale Property: '\"+n+\"'\"),t.hasOwnProperty(n)&&\"type\"!==n&&void 0!==t[n]?(dex.console.trace(\"Property: '\"+n+\"'\"),dex.config.callConditionally(e[n],t[n])):dex.console.debug(\"Missing Property: '\"+n+\"'\");return e},e}(),dex.console=function(){var e={},t={TRACE:5,DEBUG:4,NORMAL:3,WARN:2,FATAL:1,NONE:0},n=t.NORMAL;return e.logWithLevel=function(e,t){if(dex.console.logLevel()>=e)for(i=0;i<t.length;i++)\"object\"==typeof t[i]?console.dir(t[i]):console.log(t[i]);return this},e.trace=function(){return dex.console.logWithLevel(t.TRACE,arguments)},e.debug=function(){return dex.console.logWithLevel(t.DEBUG,arguments)},e.log=function(){return dex.console.logWithLevel(t.NORMAL,arguments)},e.warn=function(){return dex.console.logWithLevel(t.WARN,arguments)},e.fatal=function(){return dex.console.logWithLevel(t.FATAL,arguments)},e.logLevel=function(e){return arguments.length?n=t[e]:n},e.logLevels=function(){return t},e}(),dex.csv=function(){var e={};return e.csv=function(e,t){var n={header:e,data:t};return n},e.transpose=function(e){return{header:e.header,data:dex.matrix.transpose(e.data)}},e.getConnectionMatrix=function(e){var t,n,r,o,i,a,c,d,l=[],u=[],s={};for(a=dex.matrix.uniques(e.data),u=dex.matrix.flatten(a),s=new Array(a.length),t=0,o=0;t<a.length;t++)for(s[t]={},n=0;n<a[t].length;n++)s[t][u[o]]=o,o+=1;for(l=new Array(u.length),t=0;t<u.length;t++){for(r=new Array(u.length),n=0;n<u.length;n++)r[n]=0;l[t]=r}for(t=0;t<e.data.length;t++)for(n=1;n<e.header.length;n++)c=s[n-1][e.data[t][n-1]],d=s[n][e.data[t][n]],l[c][d]=1,l[d][c]=1;return i={header:u,connections:l}},e.createMap=function(e,t){var n,r,o,i={};for(n=0;n<e.data.length;n+=1)if(e.data[n].length===e.header.length){for(o={},r=0;r<e.header.length;r+=1)o[e.header[r]]=e.data[n][r];i[e.data[n][t]]=o}return i},e.toJson=function(e,t,n){var r,o,i,a=[];if(arguments.length>=3)return i={},i[e.header[n]]=e.data[t][n],i;if(2===arguments.length){var i={};for(o=0;o<e.header.length;o+=1)i[e.header[o]]=e.data[t][o];return i}if(1===arguments.length)for(r=0;r<e.data.length;r++){var i={};for(o=0;o<e.header.length;o++)i[e.header[o]]=e.data[r][o];a.push(i)}return a},e.toColumnArrayJson=function(e){var t,n,r={};if(1===arguments.length){for(n=0;n<e.header.length;n++)r[e.header[n]]=[];for(t=0;t<e.data.length;t++)for(n=0;n<e.header.length;n++)r[e.header[n]].push(e.data[t][n])}return r},e.copy=function(e){var t={header:dex.array.copy(e.header),data:dex.matrix.copy(e.data)};return t},e.toHierarchicalJson=function(e){function t(r,o){var i,a=[];if(\"undefined\"==typeof r)return a;for(i in r)r.hasOwnProperty(i)&&a.push(n(i,e.header[o],t(r[i],o+1)));return a}function n(e,t,n){var r={name:e,category:t,children:n};return r}var r=dex.csv.connections(e);return t(r,0)},e.connections=function(e){var t,n={};for(t=0;t<e.data.length;t++)dex.object.connect(n,e.data[t]);return n},e.createRowMap=function(e,t){var n,r={};for(n=0;n<e.data.length;n++)e.data[n].length==e.header.length&&(r[e.data[n][t]]=e.data[n]);return r},e.columnSlice=function(e,t){var n={};return n.header=dex.array.slice(e.header,t),n.data=dex.matrix.columnSlice(e.data,t),n},e.getNumericColumnNames=function(e){var t,n,r,o={},i=[];for(t=0;t<e.header.length;t++)o[e.header[t]]=!0;for(n=0;n<e.data.length;n++)for(r=0;r<e.data[n].length&&r<e.header.length;r++)o[e.header[r]]&&!dex.object.isNumeric(e.data[n][r])&&(o[e.header[r]]=!1);for(r=0;r<e.header.length;r++)o[e.header[r]]&&i.push(e.header[r]);return i},e.guessTypes=function(e){var t=0,n=[];e.header.forEach(function(e){n.push({})});var r=e.header.length;e.data.forEach(function(e){for(t=0;r>t;t++){if(!n[t].notDate){var o=new Date(e[t]);isNaN(o.getTime())&&(dex.console.log(\"not date\"+t),n[t].notDate=!0)}n[t].notNumber||isNaN(e[t])&&(n[t].notNumber=!0)}});var o=[];for(t=0;r>t;t++){var i=n[t];o.push(i.notDate?i.notNumber?\"string\":\"number\":\"date\")}return o},e.strictTypes=function(e){for(var t=dex.csv.guessTypes(e),n=0;n<t.length;n++)\"date\"==t[n]?e.data.forEach(function(t,r){dex.console.log(\"row[\"+r+\"]=\"+t[r]),e.data[r][n]=new Date(e.data[r][n])}):\"number\"==t[n]&&e.data.forEach(function(t,r){dex.console.log(\"row[\"+r+\"]=\"+t[r]),e.data[r][n]=new Double(e.data[r][n])});return e},e.getNumericIndices=function(e){var t,n,r={},o=[];for(t=0;t<e.header.length;t++)r[e.header[t]]=!0;for(t=1;t<e.data.length;t++)for(n=0;n<e.data[t].length&&n<e.header.length;n++)r[e.header[n]]&&!dex.object.isNumeric(e.data[t][n])&&(console.log(\"csv.header[\"+n+\"]=\"+e.header[n]+\" is not numeric due to csv.data[\"+t+\"][\"+n+\"]=\"+e.data[t][n]),r[e.header[n]]=!1);for(t=0;t<e.header.length;t++)r[e.header[t]]&&o.push(t);return o},e.isColumnNumeric=function(e,t){var n;for(n=0;n<e.data.length;n++)if(!dex.object.isNumeric(e.data[n][t]))return!1;return!0},e.group=function(e,t){function n(n,r){var o,i;for(o=0;o<t.length;o++){if(i=e.header[t[o]],n[i]<r[i])return-1;if(n[i]>r[i])return 1}return 0}var r,o,i,a,c,d={},l=[];if(arguments<2)return e;for(r=0;r<e.data.length;r+=1){if(i=dex.array.slice(e.data[r],t),a=i.join(\":::\"),d[a])group=d[a];else{for(group={key:a,values:[],csv:dex.csv.csv(e.header,[])},o=0;o<i.length;o++)group.values.push({name:e.header[t[o]],value:i[o]});d[a]=group}group.csv.data.push(e.data[r])}for(c in d)d.hasOwnProperty(c)&&l.push(d[c]);return l.sort(n)},e.visitCells=function(e,t){var n,r;for(r=0;r<e.data.length;r++)for(n=0;n<e.header.length;n++)t(n,r,e.data[r][n])},e.longestWord=function(e){for(var t=0,n=0;n<e.data.length;n++)for(var r=0;r<e.data[n].length;r++)t<e.data[n][r].length&&(t=e.data[n][r].length);return t},e.numericSubset=function(e){return dex.csv.columnSlice(e,dex.csv.getNumericIndices(e))},e}(),dex.datagen=function(){var e={};return e.randomMatrix=function(e){var t,n,r=[],o=e.max-e.min;for(t=0;t<e.rows;t++){var i=[];for(n=0;n<e.columns;n++)i.push(Math.random()*o+e.min);r.push(i)}return r},e.identityCsv=function(e){var t={};return t.header=dex.datagen.identityHeader(e),t.data=dex.datagen.identityMatrix(e),t},e.identityMatrix=function(e){{var t,n,r=[];e.max-e.min}for(t=0;t<e.rows;t++){var o=[];for(n=0;n<e.columns;n++)o.push(\"R\"+(t+1)+\"C\"+(n+1));r.push(o)}return r},e.identityHeader=function(e){return dex.range(1,e.columns).map(function(e){return\"C\"+e})},e}(),dex.json=function(){var e={};return e.toCsv=function(e,t){var n,r,o=[];if(2==arguments.length){if(Array.isArray(e))for(n=0;n<e.length;n++){var i=[];for(r=0;r<t.length;r++)i.push(e[n][t[r]]);o.push(i)}else{var i=[];for(r=0;r<t.length;r++)i.push(e[n][t[r]]);o.push(i)}return dex.csv.csv(t,o)}return dex.json.toCsv(e,dex.json.keys(e))},e.keys=function(e){var t,n,r={},o=[];if(Array.isArray(e))for(t=0;t<e.length;t++)for(n in e[t])r[n]=!0;else for(n in e)r[n]=!0;for(n in r)o.push(n);return o},e}(),dex.matrix=function(){var e={};return e.slice=function(e,t,n){var r,o=[];if(3===arguments.length)for(r=0;r<n.length;r++)o.push(dex.array.slice(e[n[r]]));else for(r=0;r<e.length;r++)dex.console.trace(\"RI: \"+r,dex.array.slice(e[r],t)),o.push(dex.array.slice(e[r],t));return o},e.uniques=function(e){var t,n=[],r=dex.matrix.transpose(e),o=r.length;for(t=0;o>t;t+=1)n.push(dex.array.unique(r[t]));return n},e.transpose=function(e){var t,n,r=[];if(!e||e.length<=0||!e[0]||e[0].length<=0)return[];for(n=e[0].length,t=0;n>t;t++)r.push(e.map(function(e){return e[t]}));return r},e.columnSlice=function(e,t){var n,r,o=[];if(2!=arguments.length)return e;if(r=dex.matrix.transpose(e),Array.isArray(t))for(n=0;n<t.length;n+=1)o.push(r[t[n]]);else o.push(r[t]);return dex.matrix.transpose(o)},e.flatten=function(e){var t,n,r=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)r.push(e[t][n]);return r},e.extent=function(e,t){var n=e;if(2===arguments.length){n=dex.matrix.flatten(dex.matrix.slice(e,t));var r=Math.max.apply(null,n),o=Math.min.apply(null,n);return[o,r]}},e.combine=function(e,t){var n,r,o,i=[];for(n=0;n<e.length;n++)for(r=0;r<e[n].length;r++)for(o=0;o<t[n].length;o++)i.push([e[n][r],t[n][o],r,o]);return i},e.copy=function(e){var t,n,r=[];for(t=0;t<e.length;t++)for(r[t]=[],n=0;n<e[t].length;n++)r[t].push(e[t][n]);return r},e.addIndex=function(e){for(var t=dex.matrix.copy(e),n=0;n<e.length;n++)t[n].unshift(n+1);return dex.console.trace(\"Original Matrix:\",e,\"Indexed Matrix\",t),t},e.isColumnNumeric=function(e,t){var n;for(n=1;n<e.length;n++)if(!dex.object.isNumeric(e[n][t]))return!1;return!0},e.max=function(e,t){var n,r=e[0][t];if(dex.matrix.isColumnNumeric(e,t))for(r=parseFloat(e[0][t]),n=1;n<e.length;n++)r<parseFloat(e[n][t])&&(r=parseFloat(e[n][t]));else for(n=1;n<e.length;n++)r<e[n][t]&&(r=e[n][t]);return r},e.min=function(e,t){var n,r=e[0][t];if(dex.matrix.isColumnNumeric(e,t))for(r=parseFloat(e[0][t]),n=1;n<e.length;n++)r>parseFloat(e[n][t])&&(r=parseFloat(e[n][t]));else for(n=1;n<e.length;n++)r>e[n][t]&&(r=e[n][t]);return r},e}(),dex.object=function(){var e={};return e.keys=function t(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},e.clone=function(e){var t,n,r;if(null==e||\"object\"!=typeof e)return e;if(e instanceof Date){var o=new Date;return o.setTime(e.getTime()),o}if(e instanceof Array){var o=[];for(t=0,r=e.length;r>t;t++)o[t]=dex.object.clone(e[t]);return o}if(dex.object.isElement(e)||dex.object.isNode(e))return e;if(e instanceof Object){var o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=dex.object.clone(e[n]));return o}throw new Error(\"Unable to copy obj! Its type isn't supported.\")},e.isEmpty=function(e){if(!e||e instanceof Array)return!0;if(\"object\"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.overlay=function n(e,t){var r,n=dex.object.clone(t);if(\"undefined\"!==e)for(r in e)n[r]=\"object\"!=typeof e[r]||null==n[r]||e[r]instanceof Array?e[r]:dex.object.overlay(e[r],n[r]);return n},e.isNode=function(e){return\"object\"==typeof Node?e instanceof Node:e&&\"object\"==typeof e&&\"number\"==typeof e.nodeType&&\"string\"==typeof e.nodeName},e.isElement=function(e){return\"object\"==typeof HTMLElement?e instanceof HTMLElement:e&&\"object\"==typeof e&&1===e.nodeType&&\"string\"==typeof e.nodeName},e.contains=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},e.isFunction=function(e){return\"function\"==typeof e},e.visit=function(e,t){var n;t(e);for(n in e)e.hasOwnProperty(n)&&\"object\"==typeof e[n]&&dex.object.visit(e[n],t)},e.connect=function(e,t){return!t||t.length<=0?this:(e[t[0]]||(e[t[0]]={}),dex.object.connect(e[t[0]],t.slice(1)),this)},e.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.setHierarchical=function(e,t,n,r){return null==e&&(e={}),\"object\"!=typeof e?e:4==arguments.length?dex.object.setHierarchical(e,t.split(r),n):(1===t.length?e[t[0]]=n:(t[0]in e||(e[t[0]]={}),dex.object.setHierarchical(e[t[0]],t.splice(1),n)),e)},e}(),dex.svg.Circle=function(e){var t={parent:\"#CircleArea\",id:\"Circle\",\"class\":\"Circle\",width:\"100%\",height:\"100%\",csv:{header:[\"X\",\"Y\",\"P1\",\"P2\"],data:[[100,100,10,5],[200,200,20,10],[300,300,30,15]]},color:function(e){return console.log(e),o[e%o.length]}},n=dex.object.overlay(dex.config.expand(e),dex.config.expand(t)),r=new DexComponent(e,n),o=[\"red\",\"green\",\"blue\"];return r.render=function(){r.update()},r.update=function(){var e=this,t=e.config,n=t.csv,r=dex.csv.numericSubset(n);console.dir(r);var o=document.querySelector(t.parent),i=o.querySelector(\"#\"+t.id);i&&o.removeChild(i);for(var a=SVG(o).size(t.width,t.height).attr({id:t.id,\"class\":t[\"class\"]}),c=0;c<r.data.length;c++)for(var d=2;d<r.header.length;d++)a.circle().radius(n.data[c][d]).x(n.data[c][0]).y(n.data[c][1]).attr({fill:t.color(d)})},r},dex.ui.SqlQuery=function(e){var t={parent:\"#SqlQuery\",id:\"SqlQuery\",\"class\":\"SqlQuery\",query:\"select * from dex;\",csv:{header:[\"X\",\"Y\",\"Z\"],data:[[0,0,0],[1,1,1],[2,2,2]]}},n=new DexComponent(e,t),r=window.SQL,o=new r.Database;return n.render=function(){var e=\"create table dex(\"+csv.header.map(function(e,t){var n=e.trim();return\"'\"+n+\"' \"+(dex.csv.isColumnNumeric(csv,t)?\"float\":\"text\")}).join(\",\")+\")\";console.log(\"CREATESTR: \"+e),o.exec(\"drop table if exists dex;\"),o.exec(e);var t=\"BEGIN;\"+csv.data.map(function(e){var t=\"insert into dex values(\"+e.map(function(e){return\"'\"+e.replace(\"'\",\"\")+\"'\"}).join(\",\")+\");\";return t}).join(\"\")+\"COMMIT;\";console.log(t),o.exec(t),n.update()},n.query=function(e){var t=[],r=n.attr(\"query\");e&&e.length>0&&(r=e),console.log(\"QUERY: \"+r),t.header=[],t.data=[];var i=o.exec(r);return console.log(\"RS:\"),console.dir(i),t.header=i[0].columns.map(function(e){return e.trim()}),t.data=i[0].values,console.log(t),t},n.update=function(){},n},dex.ui.Table=function(e){var t={parent:\"#Table\",id:\"Table\",\"class\":\"Table\",csv:{header:[\"X\",\"Y\",\"Z\"],data:[[0,0,0],[1,1,1],[2,2,2]]}},n=new DexComponent(e,t);return n.render=function(){n.update()},n.update=function(){var e=this,t=e.config,n=t.csv;d3.selectAll(\"#\"+t.id).remove();var r=d3.select(t.parent).append(\"table\").attr(\"height\",\"100%\").attr(\"width\",\"100%\").attr(\"border\",1).attr(\"class\",t[\"class\"]).attr(\"id\",t.id),o=r.append(\"thead\"),i=r.append(\"tbody\");o.append(\"tr\").selectAll(\"th\").data(n.header).enter().append(\"th\").text(function(e){return e});{var a=i.selectAll(\"tr\").data(n.data).enter().append(\"tr\");a.selectAll(\"td\").data(function(e){return n.header.map(function(t,n){return{column:n,value:e[n]}})}).enter().append(\"td\").html(function(e){return e.value})}},n},dex.ui.TypesTable=function(e){var t={parent:\"#Table\",id:\"Table\",\"class\":\"Table\",csv:{header:[\"X\",\"Y\",\"Z\"],data:[[0,0,0],[1,1,1],[2,2,2]]}},n=new DexComponent(e,t);return n.render=function(){n.update()},n.update=function(){var e=this,t=e.config,n=dex.csv.guessTypes(t.csv),r=dex.csv.copy(t.csv);d3.selectAll(\"#\"+t.id).remove();var o=d3.select(t.parent).append(\"table\").attr(\"height\",\"100%\").attr(\"width\",\"100%\").attr(\"border\",1).attr(\"class\",t[\"class\"]).attr(\"id\",t.id),i=o.append(\"thead\"),a=o.append(\"tbody\");i.append(\"tr\").selectAll(\"th\").data(r.header).enter().append(\"th\").text(function(e,t){return e+\" (\"+n[t]+\")\"});{var c=a.selectAll(\"tr\").data(r.data).enter().append(\"tr\");c.selectAll(\"td\").data(function(e){return r.header.map(function(t,n){return{column:n,value:e[n]}})}).enter().append(\"td\").html(function(e){return e.value})}},n};","/**\r\n *\r\n *  @module dex.array\r\n *\r\n * This module provides routines for dealing with arrays.\r\n *\r\n */\r\ndex.array = (function () {\r\n  var my = {};\r\n\r\n  /**\r\n   *\r\n   * Take a slice of an array without modifying the original array.\r\n   *\r\n   * dex.array.slice(array) - Return a copy of the array.\r\n   * dex.array.slice(array, rowRange) - Copy the array, then return a slice\r\n   * within the specified range.\r\n   * dex.array.slice(array, rowRange, maxRows) - Copy the array, then return a slice\r\n   * within the specified range up to, but not exceeding, maxRows rows.\r\n   *\r\n   * @method dex.array.slice\r\n   * @param (array) array The array to slice.\r\n   * @param (array) rowRange The range of rows to slice.\r\n   * @param {integer} maxRows The maximum number of rows to return.\r\n   *\r\n   */\r\n  my.slice = function (array, rowRange, maxRows) {\r\n    var slice = [];\r\n    var range;\r\n    var i;\r\n    var arrayCopy = dex.array.copy(array);\r\n\r\n    // Numeric.\r\n    // Array.\r\n    // Object.  Numeric with start and end.\r\n    if (arguments.length < 2) {\r\n      return arrayCopy;\r\n    }\r\n    else if (arguments.length == 2) {\r\n      if (Array.isArray(rowRange)) {\r\n        range = rowRange;\r\n      }\r\n      else {\r\n        range = dex.range(rowRange, arrayCopy.length - rowRange);\r\n      }\r\n    }\r\n    else if (arguments.length > 2) {\r\n      if (Array.isArray(rowRange)) {\r\n        range = rowRange;\r\n      }\r\n      else {\r\n        range = dex.range(rowRange, maxRows);\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < range.length; i++) {\r\n      slice.push(arrayCopy[range[i]]);\r\n    }\r\n\r\n    return slice;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This method locates the array element whose id tag matches the supplied\r\n   * id.  It returns the index of the first matching array element, or -1 if\r\n   * none was found.\r\n   *\r\n   * @param array The array to search.\r\n   * @param id The id to search on.\r\n   * @returns {number} The index of the first matching array element, or -1\r\n   * if not found.\r\n   *\r\n   */\r\n  my.indexOfById = function (array, id) {\r\n    for (var i = 0; i < array.length; i++) {\r\n      if (array[i].id === id) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Is this routine actually used anymore?  Can I deprecate it?  It's long and\r\n   * I don't remember exactly what its doing.\r\n   *\r\n   * @param data\r\n   * @param numValues\r\n   * @returns {*}\r\n   *\r\n   */\r\n  my.indexBands = function (data, numValues) {\r\n    dex.console.log(\"BANDS\");\r\n    var interval, residual, tickIndices, last, i;\r\n\r\n    if (numValues <= 0) {\r\n      tickIndices = [];\r\n    }\r\n    else if (numValues == 1) {\r\n      tickIndices = [Math.floor(numValues / 2)];\r\n    }\r\n    else if (numValues == 2) {\r\n      tickIndices = [0, data.length - 1];\r\n    }\r\n    else {\r\n      // We have at least 2 ticks to display.\r\n      // Calculate the rough interval between ticks.\r\n      interval = Math.max(1, Math.floor(data.length / (numValues - 1)));\r\n\r\n      // If it's not perfect, record it in the residual.\r\n      residual = Math.floor(data.length % (numValues - 1));\r\n\r\n      // Always label our first datapoint.\r\n      tickIndices = [0];\r\n\r\n      // Set stop point on the interior ticks.\r\n      last = data.length - interval;\r\n\r\n      dex.console.log(\"TEST\", data, numValues, interval, residual, last);\r\n\r\n      // Figure out the interior ticks, gently drift to accommodate\r\n      // the residual.\r\n      for (i = interval; i <= last; i += interval) {\r\n        if (residual > 0) {\r\n          i += 1;\r\n          residual -= 1;\r\n        }\r\n        tickIndices.push(i);\r\n      }\r\n      // Always graph the last tick.\r\n      tickIndices.push(data.length - 1);\r\n    }\r\n    dex.console.log(\"BANDS\");\r\n    return tickIndices;\r\n  };\r\n\r\n  /**\r\n   * Return an array consisting of unique elements within the first.\r\n   *\r\n   * @param array The array to extract unique values from.\r\n   * @returns {Array} An array which consists of unique elements within\r\n   * the user supplied array.\r\n   *\r\n   */\r\n  my.unique = function (array) {\r\n    var uniqueMap =\r\n    {};\r\n    var unique = [];\r\n    var i, l;\r\n\r\n    for (i = 0, l = array.length; i < l; i += 1) {\r\n      if (uniqueMap.hasOwnProperty(array[i])) {\r\n        continue;\r\n      }\r\n      unique.push(array[i]);\r\n      uniqueMap[array[i]] = 1;\r\n    }\r\n    return unique;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Returns an array of the mathematically smallest and largest\r\n   * elements within the array.\r\n   *\r\n   * @param array The array to evaluate.\r\n   * @param indices The array indices to be considered in the evaluation.\r\n   *\r\n   * @returns {*[]} An array consisting of [ min, max ] of the array.\r\n   */\r\n  my.extent = function (array, indices) {\r\n    var values = getArrayValues(array, indices);\r\n    var max = Math.max.apply(null, values);\r\n    var min = Math.min.apply(null, values);\r\n    dex.console.debug(\"EXTENT:\", values, [min, max]);\r\n    return [min, max];\r\n  };\r\n\r\n  /**\r\n   * This routine looks foolish.  Deprecating.\r\n   *\r\n   * @param a1\r\n   * @param a2\r\n   * @returns {Array}\r\n   */\r\n  my.differenceDeprecated = function (a1, a2) {\r\n    var i, j;\r\n    var a = [], diff = [];\r\n    for (i = 0; i < a1.length; i++) {\r\n      a[a1[i]] = true;\r\n    }\r\n    for (i = 0; i < a2.length; i++) {\r\n      if (a[a2[i]]) {\r\n        delete a[a2[i]];\r\n      }\r\n      else {\r\n        a[a2[i]] = true;\r\n      }\r\n    }\r\n    for (j in a) {\r\n      diff.push(j);\r\n    }\r\n    return diff;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param array\r\n   * @param rows\r\n   * @param delimiter\r\n   * @returns {string}\r\n   */\r\n  my.selectiveJoinDeprecated = function (array, rows, delimiter) {\r\n    var delim = ':::';\r\n    var key = \"\";\r\n    if (arguments.length >= 3) {\r\n      delim = delimiter;\r\n    }\r\n    else if (arguments.length === 2) {\r\n      return dex.array.slice(array, rows).join(delimiter);\r\n    }\r\n    throw \"Invalid arguments.\";\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return a copy of array.\r\n   *\r\n   * @param array The array to copy.\r\n   * @returns {Array} The copy of the array.\r\n   *\r\n   */\r\n  my.copy = function (array) {\r\n    var copy = [];\r\n    for (var i = 0; i < array.length; i++) {\r\n      copy.push(array[i]);\r\n    }\r\n    return copy;\r\n  };\r\n\r\nreturn my;\r\n}());","dex.color = (function () {\r\n  var my = {};\r\n\r\n  my.toHex = function (color) {\r\n    if (color.substr(0, 1) === '#') {\r\n      return color;\r\n    }\r\n    //console.log(\"COLOR: \" + color)\r\n    var digits = /rgb\\((\\d+),(\\d+),(\\d+)\\)/.exec(color);\r\n    //console.log(\"DIGITS: \" + digits);\r\n    var red = parseInt(digits[1]);\r\n    var green = parseInt(digits[2]);\r\n    var blue = parseInt(digits[3]);\r\n\r\n    var rgb = blue | (green << 8) | (red << 16);\r\n    return '#' + rgb.toString(16);\r\n  };\r\n\r\n  my.colorScheme = function (colorScheme, numColors) {\r\n    if (colorScheme == \"1\") {\r\n      return d3.scale.category10();\r\n    }\r\n    else if (colorScheme == \"2\") {\r\n      return d3.scale.category20();\r\n    }\r\n    else if (colorScheme == \"3\") {\r\n      return d3.scale.category20b();\r\n    }\r\n    else if (colorScheme == \"4\") {\r\n      return d3.scale.category20c();\r\n    }\r\n    else if (colorScheme == \"HiContrast\") {\r\n      return d3.scale.ordinal().range(colorbrewer[colorScheme][9]);\r\n    }\r\n    else if (colorScheme in colorbrewer) {\r\n      //console.log(\"LENGTH: \" + len);\r\n      var c;\r\n      var effColors = Math.pow(2, Math.ceil(Math.log(numColors) / Math.log(2)));\r\n      //console.log(\"EFF LENGTH: \" + len);\r\n\r\n      // Find the best cmap:\r\n      if (effColors > 128) {\r\n        effColors = 256;\r\n      }\r\n\r\n      for (c = effColors; c >= 2; c--) {\r\n        if (colorbrewer[colorScheme][c]) {\r\n          return d3.scale.ordinal().range(colorbrewer[colorScheme][c]);\r\n        }\r\n      }\r\n      for (c = effColors; c <= 256; c++) {\r\n        if (colorbrewer[colorScheme][c]) {\r\n          return d3.scale.ordinal().range(colorbrewer[colorScheme][c]);\r\n        }\r\n      }\r\n      return d3.scale.category20();\r\n    }\r\n    else {\r\n      return d3.scale.category20();\r\n    }\r\n  };\r\n\r\n  my.shadeColor = function (color, percent) {\r\n    var R = parseInt(color.substring(1, 3), 16)\r\n    var G = parseInt(color.substring(3, 5), 16)\r\n    var B = parseInt(color.substring(5, 7), 16);\r\n\r\n    R = parseInt(R * (100 + percent) / 100);\r\n    G = parseInt(G * (100 + percent) / 100);\r\n    B = parseInt(B * (100 + percent) / 100);\r\n\r\n    R = (R < 255) ? R : 255;\r\n    G = (G < 255) ? G : 255;\r\n    B = (B < 255) ? B : 255;\r\n\r\n    var RR = ((R.toString(16).length == 1) ? \"0\" + R.toString(16) : R.toString(16));\r\n    var GG = ((G.toString(16).length == 1) ? \"0\" + G.toString(16) : G.toString(16));\r\n    var BB = ((B.toString(16).length == 1) ? \"0\" + B.toString(16) : B.toString(16));\r\n\r\n    return \"#\" + RR + GG + BB;\r\n  };\r\n\r\n  my.gradient = function (baseColor) {\r\n    if (baseColor.charAt(0) == 'r') {\r\n      baseColor = colorToHex(baseColor);\r\n    }\r\n    var gradientId;\r\n    gradientId = \"gradient\" + baseColor.substring(1)\r\n    console.log(\"GradientId: \" + gradientId);\r\n    console.log(\"BaseColor : \" + baseColor);\r\n\r\n    //var lightColor = shadeColor(baseColor, -10)\r\n    var darkColor = shadeColor(baseColor, -20)\r\n\r\n    var grad = d3.select(\"#gradients\").selectAll(\"#\" + gradientId)\r\n      .data([gradientId])\r\n      .enter()\r\n      .append(\"radialGradient\")\r\n      .attr(\"class\", \"colorGradient\")\r\n      .attr(\"id\", gradientId)\r\n      .attr(\"gradientUnits\", \"objectBoundingBox\")\r\n      .attr(\"fx\", \"30%\")\r\n      .attr(\"fy\", \"30%\")\r\n\r\n    grad.append(\"stop\")\r\n      .attr(\"offset\", \"0%\")\r\n      .attr(\"style\", \"stop-color:#FFFFFF\")\r\n\r\n    // Middle\r\n    grad.append(\"stop\")\r\n      .attr(\"offset\", \"40%\")\r\n      .attr(\"style\", \"stop-color:\" + baseColor)\r\n\r\n    // Outer Edges\r\n    grad.append(\"stop\")\r\n      .attr(\"offset\", \"100%\")\r\n      .attr(\"style\", \"stop-color:\" + darkColor)\r\n\r\n    return \"url(#\" + gradientId + \")\";\r\n  };\r\n\r\n  return my;\r\n}());","/**\r\n *\r\n * @module dex.config\r\n *\r\n * This module contains many support routines for configuring things.\r\n *\r\n */\r\ndex.config = (function () {\r\n  var my = {};\r\n\r\n  /**\r\n   *\r\n   * This routine supports a shorthand notation allowing the\r\n   * user to specify deeply nested configuration options without\r\n   * having to deal with nested json structures.\r\n   *\r\n   * Options like:\r\n   *\r\n   * {\r\n *   'cell' : {\r\n *     'rect' : {\r\n *       'width' : 10,\r\n *       'height' : 20,\r\n *       'events' : {\r\n *         'mouseover' : function(d) { console.log(\"MouseOver: \" + d); }\r\n *       }\r\n *     }\r\n *   }\r\n * }\r\n   *\r\n   * Can now be described more succinctly and more readably as:\r\n   *\r\n   * {\r\n *   'cell.rect.width'            : 10,\r\n *   'cell.rect.height'           : 20,\r\n *   'cell.rect.events.mouseover' : function(d) { console.log(\"Mouseover: \" + d); }\r\n * }\r\n   *\r\n   * Or a hybrid strategy can be used:\r\n   *\r\n   * {\r\n *   'cell.rect' : {\r\n *     'width' : 10,\r\n *     'height' : 20,\r\n *     'events.mouseover' : function(d) { console.log(\"Mouseover: \" + d); }\r\n *   }\r\n * }\r\n   *\r\n   * @param config The configuration to expand.\r\n   * @returns {*} The expanded configuration.  The original configuration\r\n   *   is left untouched.\r\n   *\r\n   */\r\n  my.expand = function expand(config) {\r\n    var name,\r\n      ci;\r\n    var expanded = {};\r\n\r\n    // We have nothing, return nothing.\r\n    if (!config) {\r\n      return config;\r\n    }\r\n\r\n    //dex.console.log(\"dex.config.expand(config=\", config);\r\n\r\n    for (var name in config) {\r\n      if (config.hasOwnProperty(name)) {\r\n        // Name contains hierarchy:\r\n        if (name && name.indexOf('.') > -1) {\r\n          expanded[name] = config[name];\r\n          dex.object.setHierarchical(expanded, name,\r\n            dex.object.clone(expanded[name]), '.');\r\n          delete expanded[name];\r\n        }\r\n        // Simple name\r\n        else {\r\n          // If the target is an object with no children, clone it.\r\n          if (dex.object.isEmpty(config[name])) {\r\n            //dex.console.log(\"SET PRIMITIVE: \" + name + \"=\" + config[name]);\r\n            expanded[name] = dex.object.clone(config[name]);\r\n            //expanded[name] = config[name];\r\n          }\r\n          else {\r\n            //dex.console.log(\"SET OBJECT: \" + name + \" to the expansion of\", config[name]);\r\n            expanded[name] = dex.config.expand(config[name]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //dex.console.log(\"CONFIG\", config, \"EXPANDED\", expanded);\r\n    return expanded;\r\n  };\r\n\r\n  /**\r\n   * This routine will expand hiearchically delimited names such as\r\n   * foo.bar into a structure { foo : { bar : value}}.  It will delete\r\n   * the hierarchical name and overwrite the value into the proper\r\n   * location leaving any previous object properties undisturbed.\r\n   *\r\n   * @param {Object} config The configuration which we will expand.\r\n   *\r\n   */\r\n  my.expand_deprecate = function expand(config) {\r\n    var name,\r\n      ci,\r\n      expanded;\r\n\r\n    // We have nothing, return nothing.\r\n    if (!config) {\r\n      return config;\r\n    }\r\n\r\n    //dex.console.log(\"dex.config.expand(config=\", config);\r\n\r\n    // Make a clone of the previous configuration.\r\n    expanded = dex.object.clone(config);\r\n\r\n    // Iterate over the property names.\r\n    for (name in config) {\r\n      // If this is our property the process it, otherwise ignore.\r\n      if (config.hasOwnProperty(name)) {\r\n        // The property name is non-null.\r\n        if (name) {\r\n          // Determine character index.\r\n          ci = name.indexOf('.');\r\n        }\r\n        else {\r\n          // Default to -1\r\n          ci = -1;\r\n        }\r\n\r\n        // if Character index is > -1, we have a hierarchical name.\r\n        // Otherwise do nothing, copying was already handled in the\r\n        // cloning activity.\r\n        if (ci > -1) {\r\n          // Set it...\r\n          dex.object.setHierarchical(expanded, name,\r\n            dex.object.clone(expanded[name]), '.');\r\n          // Delete the old name.\r\n          delete expanded[name];\r\n        }\r\n      }\r\n    }\r\n\r\n    //dex.console.log(\"CONFIG\", config, \"EXPANDED\", expanded);\r\n    return expanded;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This routine will take two hierarchies, top and bottom, and expand dot ('.')\r\n   * delimited names such as: 'foo.bar.biz.baz' into a structure:\r\n   * { 'foo' : { 'bar' : { 'biz' : 'baz' }}}\r\n   * It will then overlay the top hierarchy onto the bottom one.  This is useful\r\n   * for configuring objects based upon a default configuration while allowing\r\n   * the client to conveniently override these defaults as needed.\r\n   *\r\n   * @param top The top object hierarchy.\r\n   * @param bottom The bottom, base object hierarchy.\r\n   * @returns {Object|*} A new object representing the expanded top object\r\n   * hierarchy overlaid on top of the expanded bottom object hierarchy.\r\n   *\r\n   */\r\n  my.expandAndOverlay = function expandAndOverlay(top, bottom) {\r\n    //dex.console.log(\r\n    //dex.config.getCallerString(arguments.callee.caller),\r\n    //\"TOP\", top,\r\n    //\"BOTTOM\", bottom,\r\n    //\"EXPANDED TOP\", dex.config.expand(top),\r\n    //\"EXPANDED BOTTOM\", dex.config.expand(bottom));\r\n    return dex.object.overlay(dex.config.expand(top),\r\n      dex.config.expand(bottom));\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return the configuration for a font given the defaults and user\r\n   * customizations.\r\n   *\r\n   * @param custom The user customizations.\r\n   * @returns {Object|*}\r\n   */\r\n  my.font = function font(custom) {\r\n    var defaults =\r\n    {\r\n      'decoration'    : 'none',\r\n      'family'        : 'sans-serif',\r\n      'letterSpacing' : 'normal',\r\n      'size'          : 14,\r\n      'style'         : 'normal',\r\n      'weight'        : 'normal',\r\n      'wordSpacing'   : 'normal',\r\n      'variant'       : 'normal'\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param node The node to be configured.\r\n   * @param config The configuration. (family, size, weight, style,\r\n   * decoration, wordSpacing, letterSpacing, variant)\r\n   * @returns {*} The newly configured node.\r\n   *\r\n   */\r\n  my.configureFont = function configureFont(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, 'font-family', config.family);\r\n      dex.config.setAttr(node, 'font-size', config.size);\r\n      dex.config.setAttr(node, 'font-weight', config.weight);\r\n      dex.config.setAttr(node, 'font-style', config.style);\r\n      dex.config.setAttr(node, 'text-decoration', config.decoration);\r\n\r\n      dex.config.setAttr(node, 'word-spacing', config.wordSpacing);\r\n      dex.config.setAttr(node, 'letter-spacing', config.letterSpacing);\r\n      dex.config.setAttr(node, 'variant', config.variant);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param custom An object containing the caller's customizations.  Valid\r\n   * customizations include: font, x, y, textLength, lengthAdjust, transform,\r\n   * glyphOrientationVertical, text, dx, dy, writingMode, textAnchor, fill.\r\n   *\r\n   * @returns {Object|*} A text node with certain base defaults as well\r\n   * as the caller's customizations applied.\r\n   *\r\n   */\r\n  my.text = function text(custom) {\r\n    var defaults =\r\n    {\r\n      'font'                     : dex.config.font(),\r\n      'x'                        : 0,\r\n      'y'                        : 0,\r\n      'textLength'               : undefined,\r\n      'lengthAdjust'             : undefined,\r\n      'transform'                : '',\r\n      'glyphOrientationVertical' : undefined,\r\n      'text'                     : undefined,\r\n      'dx'                       : 0,\r\n      'dy'                       : 0,\r\n      'writingMode'              : undefined,\r\n      'anchor'                   : 'start',\r\n      'fill'                     : dex.config.fill(),\r\n      'format'                   : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This routine will dynamically configure an SVG text entity based upon the\r\n   * supplied configuration.\r\n   *\r\n   * @param node The SVG text node to be configured.\r\n   * @param config The configuration to be applied. (x, y, dx, dy, anchor,\r\n   * font, textLength, lengthAdjust, transform, glyphOrientationVertical,\r\n   * writingMode, text).\r\n   *\r\n   * @returns {*} The fully configured text node.\r\n   */\r\n  my.configureText = function configureText(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, \"x\", config.x);\r\n      dex.config.setAttr(node, \"y\", config.y);\r\n      dex.config.setAttr(node, \"dx\", config.dx);\r\n      dex.config.setAttr(node, \"dy\", config.dy);\r\n      dex.config.setStyle(node, \"text-anchor\", config.anchor);\r\n      dex.config.configureFont(node, config.font);\r\n      dex.config.setAttr(node, 'textLength', config.textLength);\r\n      dex.config.setAttr(node, 'lengthAdjust', config.lengthAdjust);\r\n      dex.config.setAttr(node, 'transform', config.transform);\r\n      dex.config.setAttr(node, 'glyph-orientation-vertical',\r\n        config.glyphOrientationVertical);\r\n      dex.config.setAttr(node, 'writing-mode', config.writingMode);\r\n      dex.config.callIfDefined(node, 'text', config.text);\r\n      dex.config.configureFill(node, config.fill);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return the configuration for a stroke.\r\n   *\r\n   * @param custom User customization. (width, color, opacity, dasharray)\r\n   * @returns The stroke configuration.\r\n   *\r\n   */\r\n  my.stroke = function stroke(custom) {\r\n    var defaults =\r\n    {\r\n      'width'     : 1,\r\n      'color'     : \"black\",\r\n      'opacity'   : 1,\r\n      'dasharray' : '',\r\n      'transform' : ''\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Apply a stroke configuration to a node.\r\n   *\r\n   * @param node The node to be configured.\r\n   * @param config The stroke configuration (width, color, opacity,\r\n   * dasharray).\r\n   * @returns The newly configured node.\r\n   */\r\n  my.configureStroke = function configureStroke(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, \"stroke\", config.color);\r\n      dex.config.setStyle(node, 'stroke-width', config.width);\r\n      dex.config.setStyle(node, 'stroke-opacity', config.opacity);\r\n      dex.config.setStyle(node, 'stroke-dasharray', config.dasharray);\r\n      dex.config.setAttr(node, 'transform', config.transform);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.fill = function fill(custom) {\r\n    var defaults =\r\n    {\r\n      'fillColor'   : \"grey\",\r\n      'fillOpacity' : 1\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.configureFill = function configureFill(node, config) {\r\n    if (config) {\r\n      dex.config.setStyle(node, 'fill', config.fillColor);\r\n      dex.config.setStyle(node, 'fill-opacity', config.fillOpacity);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.link = function link(custom) {\r\n    var defaults =\r\n    {\r\n      'fill'      : dex.config.fill(),\r\n      'stroke'    : dex.config.stroke(),\r\n      'transform' : '',\r\n      'd'         : undefined,\r\n      'events'    : dex.config.events()\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.configureLink = function configureLink(node, config) {\r\n    if (config) {\r\n      dex.config.configureStroke(node, config.stroke);\r\n      dex.config.configureFill(node, config.fill);\r\n      dex.config.setAttr(node, 'transform', config.transform);\r\n      dex.config.setAttr(node, 'd', config.d);\r\n      dex.config.configureEvents(node, config.events);\r\n    }\r\n    return node;\r\n  }\r\n\r\n  my.rectangle = function rectangle(custom) {\r\n    var config =\r\n    {\r\n      'width'     : 50,\r\n      'height'    : 50,\r\n      'x'         : 0,\r\n      'y'         : 0,\r\n      'rx'        : 0,\r\n      'ry'        : 0,\r\n      'stroke'    : dex.config.stroke(),\r\n      'opacity'   : 1,\r\n      'color'     : d3.scale.category20(),\r\n      'transform' : undefined,\r\n      'events'    : dex.config.events()\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.configureRectangle = function configureRectangle(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, 'width', config.width);\r\n      dex.config.setAttr(node, 'height', config.height);\r\n      dex.config.setAttr(node, 'x', config.x);\r\n      dex.config.setAttr(node, 'y', config.y);\r\n      dex.config.setAttr(node, 'rx', config.rx);\r\n      dex.config.setAttr(node, 'ry', config.ry);\r\n      dex.config.setAttr(node, 'opacity', config.opacity);\r\n      dex.config.setAttr(node, 'fill', config.color);\r\n      dex.config.setAttr(node, 'transform', config.transform);\r\n      dex.config.configureStroke(node, config.stroke);\r\n      dex.config.configureEvents(node, config.events);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.events = function events(custom) {\r\n    var defaults =\r\n    {\r\n      'mouseover' : function (d) {\r\n        //console.log(\"Default mouseover\");\r\n      }\r\n    };\r\n    var config = defaults;\r\n\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, defaults);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.configureEvents = function configureEvents(node, config) {\r\n    //dex.console.log(\"Configure Events\", config);\r\n    if (config) {\r\n      for (var key in config) {\r\n        //dex.console.log(\"KEY\", key, \"VALUE\", config[key]);\r\n        dex.config.setEventHandler(node, key, config[key]);\r\n      }\r\n    }\r\n\r\n    return node;\r\n  };\r\n\r\n  my.line = function line(custom) {\r\n    var defaults =\r\n    {\r\n      'start'  : dex.config.point(),\r\n      'end'    : dex.config.point(),\r\n      'stroke' : dex.config.stroke()\r\n    };\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.configureLine = function configureLine(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, 'x1', config.start.x);\r\n      dex.config.setAttr(node, 'y1', config.start.y);\r\n      dex.config.setAttr(node, 'x2', config.end.x);\r\n      dex.config.setAttr(node, 'y2', config.end.y);\r\n      dex.config.configureStroke(node, config.stroke);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.path = function path(custom) {\r\n    var defaults =\r\n    {\r\n      'fill'   : dex.config.fill(),\r\n      'stroke' : dex.config.stroke()\r\n    };\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.configurePath = function configurePath(node, config) {\r\n    if (config) {\r\n      dex.config.configureFill(node, config.fill);\r\n      dex.config.configureStroke(node, config.stroke);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.getCallers = function getCallers(caller) {\r\n    var callers = [];\r\n    var currentCaller = caller;\r\n    for (; currentCaller; currentCaller = currentCaller.caller) {\r\n      if (currentCaller.name) {\r\n        callers.push(currentCaller.name);\r\n      }\r\n    }\r\n\r\n    return callers.reverse();\r\n  }\r\n\r\n  my.getCallerString = function getCallerString(caller) {\r\n    return dex.config.getCallers(caller).join(\"->\");\r\n  }\r\n\r\n  my.setEventHandler = function setEventHandler(node, eventType, eventHandler) {\r\n    var callerStr = dex.config.getCallerString(arguments.callee.caller);\r\n\r\n    //dex.console.debug(callerStr + \": setEventHandler(node=\" + node + \", eventType=\" + eventType + \", eventHandler=\" + eventHandler);\r\n    if (!node) {\r\n      dex.console.warn(callerStr + \": dex.config.setEventHandler(eventType='\" + eventType + \"eventHandler=\" + eventHandler + \") : node is null.\");\r\n      return node;\r\n    }\r\n    if (!dex.object.isFunction(node.on)) {\r\n      dex.console.warn(callerStr + \": dex.config.setEventHandler(eventType='\" + eventType + \"', eventHandler='\" + eventHandler +\r\n      \"') : target node is missing function: node.on(eventType,eventHandler).  Node dump:\", node);\r\n      return node;\r\n    }\r\n    if (typeof eventHandler != 'undefined') {\r\n      dex.console.debug(callerStr + \": Set Event Handler: '\" + eventType + \"'='\" + eventHandler + \"'\");\r\n      node.on(eventType, eventHandler);\r\n    }\r\n    else {\r\n      dex.console.debug(callerStr += \": Undefined Event Handler: '\" + eventType + \"'='\" + eventHandler + \"'\");\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.setAttr = function setAttr(node, name, value) {\r\n    var callerStr = dex.config.getCallerString(arguments.callee.caller);\r\n    if (!node) {\r\n      dex.console.warn(callerStr + \": dex.config.setAttr(name='\" + name + \"value=\" + value + \") : node is null.\");\r\n      return node;\r\n    }\r\n    if (!dex.object.isFunction(node.attr)) {\r\n      dex.console.warn(callerStr + \": dex.config.setAttr(name='\" + name + \"', value='\" + value +\r\n      \"') : target node is missing function: node.attr.  Node dump:\", node);\r\n      return node;\r\n    }\r\n    if (typeof value != 'undefined') {\r\n      dex.console.debug(callerStr + \": Set Attr: '\" + name + \"'='\" + value + \"'\");\r\n      node.attr(name, dex.config.optionValue(value));\r\n    }\r\n    else {\r\n      dex.console.debug(callerStr += \": Undefined Attr: '\" + name + \"'='\" + value + \"'\");\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.setStyle = function setStyle(node, name, value) {\r\n    var callerStr = dex.config.getCallerString(arguments.callee.caller);\r\n    if (!node) {\r\n      dex.console.warn(callerStr + \": dex.config.setAttr(name='\" + name + \"value=\" + value + \") : node is null.\");\r\n      return node;\r\n    }\r\n    if (!dex.object.isFunction(node.style)) {\r\n      dex.console.warn(callerStr + \": dex.config.setStyle(name='\" + name + \"', value='\" + value +\r\n      \"') : target node is missing function: node.style.  Node Dump:\", node);\r\n      return node;\r\n    }\r\n    if (typeof value !== 'undefined' && node && dex.object.isFunction(node.style)) {\r\n      dex.console.debug(callerStr + \": Set Style: name='\" + name + \"', Value Dump:\",\r\n        dex.config.optionValue(value));\r\n      node.style(name, dex.config.optionValue(value));\r\n    }\r\n    else {\r\n      dex.console.debug(callerStr + \": Undefined Style: name='\" + name + \"', Value Dump:\", value);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.optionValue = function optionValue(option) {\r\n    return function (d, i) {\r\n      //dex.console.log(\"OPTION\", option);\r\n      if (dex.object.isFunction(option)) {\r\n        return option(d, i);\r\n      }\r\n      else {\r\n        return option;\r\n      }\r\n    };\r\n  };\r\n\r\n  my.callIfDefined = function callIfDefined(node, fn, value) {\r\n//dex.console.log(\"TYPE\", typeof value);\r\n    if (typeof value === 'undefined') {\r\n      //dex.console.log(\"Skipping: \" + fn + \"()\");\r\n    }\r\n    else {\r\n      //dex.console.log(\"Calling: '\" + fn + \"(\" + value + \")\");\r\n      return node[fn](dex.config.optionValue(value));\r\n    }\r\n\r\n    return node;\r\n  };\r\n\r\n  my.point = function point(custom) {\r\n    var config =\r\n    {\r\n      'x' : undefined,\r\n      'y' : undefined\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.configurePoint = function configurePoint(node, config) {\r\n    if (config) {\r\n      node\r\n        .attr('x', config.center.cx)\r\n        .attr('y', config.center.cy);\r\n    }\r\n    return node;\r\n  };\r\n\r\n// Configures: opacity, color, stroke.\r\n  my.configureShapeStyle = function configureShapeStyle(node, config) {\r\n    if (config) {\r\n      node\r\n        .call(dex.config.configureStroke, config.stroke)\r\n        .attr('opacity', config.opacity)\r\n        .style('fill', config.color);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.circle = function circle(custom) {\r\n    var config =\r\n    {\r\n      'cx'        : 0,\r\n      'cy'        : 0,\r\n      'r'         : 10,\r\n      'fill'      : dex.config.fill(),\r\n      'stroke'    : dex.config.stroke(),\r\n      'transform' : '',\r\n      'title'     : '',\r\n      'events'    : dex.config.events()\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.configureCircle = function configureCircle(node, config) {\r\n    if (config) {\r\n      dex.config.setAttr(node, \"r\", config.r);\r\n      dex.config.setAttr(node, \"cx\", config.cx);\r\n      dex.config.setAttr(node, \"cy\", config.cy);\r\n      dex.config.setAttr(node, \"transform\", config.transform);\r\n      dex.config.setAttr(node, \"title\", config.title);\r\n      dex.config.configureStroke(node, config.stroke);\r\n      dex.config.configureFill(node, config.fill);\r\n      dex.config.configureEvents(node, config.events);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  my.configureAxis_deprecated = function configureAxis_deprecated(config) {\r\n    var axis;\r\n\r\n    if (config) {\r\n      var axis = d3.svg.axis()\r\n        .ticks(config.tick.count)\r\n        .tickSubdivide(config.tick.subdivide)\r\n        .tickSize(config.tick.size.major, config.tick.size.minor,\r\n        config.tick.size.end)\r\n        .tickPadding(config.tick.padding);\r\n\r\n      // REM: Horrible way of doing this.  Need a function which\r\n      // is more generic and smarter to short circuit stuff like\r\n      // this.  But...for now it does what I want.\r\n      if (!dex.object.isFunction(config.tick.format)) {\r\n        axis.tickFormat(config.tick.format);\r\n      }\r\n\r\n      axis\r\n        .orient(config.orient)\r\n        .scale(config.scale);\r\n    }\r\n    else {\r\n      axis = d3.svg.axis();\r\n    }\r\n    //axis.scale = config.scale;\r\n    return axis;\r\n  };\r\n\r\n  my.tick = function tick(custom) {\r\n    var config =\r\n    {\r\n      'count'     : 5,\r\n      //'tickValues'  : undefined,\r\n      'subdivide' : 3,\r\n      'size'      : {\r\n        'major' : 5,\r\n        'minor' : 3,\r\n        'end'   : 5\r\n      },\r\n      'padding'   : 5,\r\n      'format'    : d3.format(\",d\"),\r\n      'label'     : dex.config.text()\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.xaxis_deprecate = function (custom) {\r\n    var config =\r\n    {\r\n      'scale'  : d3.scale.linear(),\r\n      'orient' : \"bottom\",\r\n      'tick'   : this.tick(),\r\n      'label'  : dex.config.text()\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.yaxis_deprecate = function (custom) {\r\n    var config =\r\n    {\r\n      'scale'  : d3.scale.linear(),\r\n      'orient' : 'left',\r\n      'tick'   : this.tick(),\r\n      'label'  : dex.config.text({'transform' : 'rotate(-90)'})\r\n    };\r\n    if (custom) {\r\n      config = dex.object.overlay(custom, config);\r\n    }\r\n    return config;\r\n  };\r\n\r\n  my.callConditionally = function callConditionally(fn, value) {\r\n    //dex.console.log(\"- FN:\" + fn);\r\n    //dex.console.log(\"- VALUE:\" + value);\r\n    if (value !== undefined) {\r\n      //dex.console.log(\"- CALLING: \" + fn + \" of \" + value);\r\n      fn(value);\r\n    }\r\n    else {\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Configure the input parameters for configuring an axis.\r\n   * Certain defaults are imposed should the \"custom\" variable\r\n   * not specify that parameter.\r\n   *\r\n   * @param custom The user supplied axis configuration.\r\n   *\r\n   * @returns {Object|*} The default axis configuration with\r\n   * user supplied overrides applied.\r\n   *\r\n   */\r\n  my.axis = function axis(custom) {\r\n    var defaults =\r\n    {\r\n      'scale'         : dex.config.scale({'type' : 'linear'}),\r\n      'orient'        : 'bottom',\r\n      'ticks'         : undefined,\r\n      'tickValues'    : undefined,\r\n      'tickSize'      : undefined,\r\n      'innerTickSize' : undefined,\r\n      'outerTickSize' : undefined,\r\n      'tickPadding'   : undefined,\r\n      'tickFormat'    : undefined,\r\n      'tickSubdivide' : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Create an axis with the specified configuration.\r\n   *\r\n   * @param axis The axis to configure.\r\n   * @param config The user specified axis configuration.\r\n   *\r\n   * @returns {*} The newly configured axis.\r\n   */\r\n  my.configureAxis = function configureAxis(axis, config) {\r\n    if (config) {\r\n      [\r\n        'scale',\r\n        'orient',\r\n        'ticks',\r\n        'tickValues',\r\n        'tickSize',\r\n        'innerTickSize',\r\n        'outerTickSize',\r\n        'tickPadding',\r\n        'tickFormat',\r\n        'tickSubdivide'\r\n      ].forEach(function (fn) {\r\n          //dex.console.log(\"Calling: \" + fn);\r\n          dex.config.callConditionally(axis[fn], config[fn]);\r\n        });\r\n    }\r\n    return axis;\r\n  };\r\n\r\n  my.createAxis = function createAxis(userConfig) {\r\n    var config = dex.config.axis(userConfig);\r\n    return dex.config.configureAxis(d3.svg.axis(), config);\r\n  };\r\n\r\n  my.scale = function scale(custom) {\r\n    var fmap =\r\n    {\r\n      'linear'   : dex.config.linearScale,\r\n      'sqrt'     : dex.config.sqrtScale,\r\n      'pow'      : dex.config.powScale,\r\n      'time'     : dex.config.timeScale,\r\n      'log'      : dex.config.logScale,\r\n      'ordinal'  : dex.config.ordinalScale,\r\n      'quantile' : dex.config.quantileScale,\r\n      'quantize' : dex.config.quantizeScale,\r\n      'identity' : dex.config.identityScale,\r\n      'ordinal'  : dex.config.ordinalScale\r\n    };\r\n\r\n    var defaults =\r\n    {\r\n      'type' : 'linear'\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n\r\n    return fmap[config.type](config);\r\n  }\r\n\r\n  my.createScale = function createScale(config) {\r\n    var scale;\r\n\r\n    var fmap =\r\n    {\r\n      'linear'   : d3.scale.linear,\r\n      'sqrt'     : d3.scale.sqrt,\r\n      'pow'      : d3.scale.pow,\r\n      'time'     : d3.time.scale,\r\n      'log'      : d3.scale.log,\r\n      'ordinal'  : d3.scale.ordinal,\r\n      'quantile' : d3.scale.quantile,\r\n      'quantize' : d3.scale.quantize,\r\n      'identity' : d3.scale.identity\r\n    };\r\n\r\n    if (config) {\r\n      scale = fmap[config.type]();\r\n\r\n      // Since we create a non-parameterized scale, here we parameterize it based upon\r\n      // the supplied configuration.\r\n      dex.config.configureScale(scale, config);\r\n    }\r\n    else {\r\n      scale = d3.scale.linear();\r\n    }\r\n\r\n    return scale;\r\n  }\r\n\r\n  my.linearScale = function linearScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'        : 'linear',\r\n      'domain'      : [0, 100],\r\n      'range'       : [0, 800],\r\n      'rangeRound'  : undefined,\r\n      'interpolate' : undefined,\r\n      'clamp'       : undefined,\r\n      'nice'        : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.powScale = function powScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'        : 'pow',\r\n      'domain'      : [0, 100],\r\n      'range'       : [0, 800],\r\n      'rangeRound'  : undefined,\r\n      'interpolate' : undefined,\r\n      'clamp'       : undefined,\r\n      'nice'        : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.sqrtScale = function sqrtScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'        : 'sqrt',\r\n      'domain'      : [0, 100],\r\n      'range'       : [0, 800],\r\n      'rangeRound'  : undefined,\r\n      'interpolate' : undefined,\r\n      'clamp'       : undefined,\r\n      'nice'        : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.logScale = function logScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'        : 'log',\r\n      'domain'      : [0, 100],\r\n      'range'       : [0, 800],\r\n      'rangeRound'  : undefined,\r\n      'interpolate' : undefined,\r\n      'clamp'       : undefined,\r\n      'nice'        : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.ordinalScale = function ordinalScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'            : 'ordinal',\r\n      'domain'          : undefined,\r\n      'range'           : undefined,\r\n      'rangeRoundBands' : undefined,\r\n      'rangePoints'     : undefined,\r\n      'rangeBands'      : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.timeScale = function timeScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'        : 'time',\r\n      'domain'      : undefined,\r\n      'range'       : undefined,\r\n      'rangeRound'  : undefined,\r\n      'interpolate' : undefined,\r\n      'clamp'       : undefined,\r\n      'ticks'       : undefined,\r\n      'tickFormat'  : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.quantileScale = function quantileScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'   : 'quantile',\r\n      'domain' : undefined,\r\n      'range'  : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.quantizeScale = function quantizeScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'   : 'quantize',\r\n      'domain' : undefined,\r\n      'range'  : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.identityScale = function identityScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'   : 'identity',\r\n      'domain' : undefined,\r\n      'range'  : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.thresholdScale = function thresholdScale(custom) {\r\n    var defaults =\r\n    {\r\n      'type'   : 'threshold',\r\n      'domain' : undefined,\r\n      'range'  : undefined\r\n    };\r\n\r\n    var config = dex.config.expandAndOverlay(custom, defaults);\r\n    return config;\r\n  };\r\n\r\n  my.configureScale = function configureScale(scale, config) {\r\n    if (config) {\r\n      for (var property in config) {\r\n        dex.console.trace(\"ConfigureScale Property: '\" + property + \"'\");\r\n        if (config.hasOwnProperty(property) && property !== 'type' && config[property] !== undefined) {\r\n          dex.console.trace(\"Property: '\" + property + \"'\");\r\n          dex.config.callConditionally(scale[property], config[property]);\r\n        }\r\n        else {\r\n          dex.console.debug(\"Missing Property: '\" + property + \"'\");\r\n        }\r\n      }\r\n    }\r\n\r\n    return scale;\r\n  };\r\n\r\n  return my;\r\n}());","dex.console = (function () {\r\n  var my = {};\r\n\r\n  /**\r\n   *\r\n   * @type {{TRACE: number, DEBUG: number, NORMAL: number, WARN: number, FATAL: number, NONE: number}}\r\n   */\r\n  var logLevels = {\r\n    'TRACE'  : 5,\r\n    'DEBUG'  : 4,\r\n    'NORMAL' : 3,\r\n    'WARN'   : 2,\r\n    'FATAL'  : 1,\r\n    'NONE'   : 0\r\n  };\r\n\r\n  var logLevel = logLevels.NORMAL;\r\n\r\n////\r\n//\r\n// dex.console : This module provides routines assisting with console output.\r\n//\r\n////\r\n\r\n  /**\r\n   * Log this message if the current log level is greater than or equal\r\n   * to dex.console.logLevel.\r\n   *\r\n   * @param msgLevel The log level for this message.\r\n   * @param msg One or more messages to be logged.  Strings will simply\r\n   * use console.log while objects will use console.dir.\r\n   *\r\n   * @returns {dex.console}\r\n   */\r\n  my.logWithLevel = function (msgLevel, msg) {\r\n//  console.log(dex.console.logLevel());\r\n//  console.log(msgLevel);\r\n//  console.dir(msg);\r\n    if (dex.console.logLevel() >= msgLevel) {\r\n      for (i = 0; i < msg.length; i++) {\r\n        if (typeof msg[i] == 'object') {\r\n          console.dir(msg[i]);\r\n        }\r\n        else {\r\n          console.log(msg[i]);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Write one or more TRACE level messages.\r\n   *\r\n   * @param msg One or more TRACE messages to log.\r\n   *\r\n   * @returns {dex.console|*}\r\n   */\r\n  my.trace = function () {\r\n    return dex.console.logWithLevel(logLevels.TRACE, arguments)\r\n  };\r\n\r\n  /**\r\n   * Write one or more DEBUG level messages.\r\n   *\r\n   * @param msg One or more DEBUG messages to log.\r\n   *\r\n   * @returns {dex.console|*}\r\n   */\r\n  my.debug = function () {\r\n    return dex.console.logWithLevel(logLevels.DEBUG, arguments)\r\n  };\r\n\r\n  /**\r\n   * Write one or more NORMAL level messages.\r\n   *\r\n   * @param msg One or more NORMAL messages to log.\r\n   *\r\n   * @returns {dex.console|*}\r\n   */\r\n  my.log = function () {\r\n    return dex.console.logWithLevel(logLevels.NORMAL, arguments)\r\n  };\r\n\r\n  /**\r\n   * Write one or more WARN level messages.\r\n   *\r\n   * @param msg One or more WARN messages to log.\r\n   *\r\n   * @returns {dex.console|*}\r\n   */\r\n  my.warn = function () {\r\n    return dex.console.logWithLevel(logLevels.WARN, arguments)\r\n  };\r\n\r\n  /**\r\n   * Write one or more FATAL level messages.\r\n   *\r\n   * @param msg One or more FATAL messages to log.\r\n   *\r\n   * @returns {dex.console|*}\r\n   */\r\n  my.fatal = function () {\r\n    return dex.console.logWithLevel(logLevels.FATAL, arguments)\r\n  };\r\n\r\n  /**\r\n   * This function returns the current log level.\r\n   *\r\n   * @returns The current log level.\r\n   *\r\n   */\r\n  my.logLevel = function (_) {\r\n    if (!arguments.length) return logLevel;\r\n    logLevel = logLevels[_];\r\n    return logLevel;\r\n  };\r\n\r\n  my.logLevels = function () {\r\n    return logLevels;\r\n  };\r\n\r\n  return my;\r\n}());","dex.csv = (function () {\r\n  var my = {};\r\n\r\n  my.csv = function (header, data) {\r\n    var csv =\r\n    {\r\n      \"header\" : header,\r\n      \"data\"   : data\r\n    };\r\n\r\n    return csv;\r\n  };\r\n\r\n  my.transpose = function (csv) {\r\n    return {\r\n      \"header\" : csv.header,\r\n      \"data\"   : dex.matrix.transpose(csv.data)\r\n    };\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Given a CSV, create a connection matrix suitable for feeding into a chord\r\n   * diagram.  Ex, given CSV:\r\n   *\r\n   */\r\n  my.getConnectionMatrix = function (csv) {\r\n    var matrix = [];\r\n    var ri, ci;\r\n    var row;\r\n    var cid;\r\n    var header = [];\r\n    var nameToIndex = {};\r\n    var connectionMatrix;\r\n    var uniques;\r\n    var nameIndices = [];\r\n    var src, dest;\r\n\r\n    // Create a list of unique values to relate to one another.\r\n    uniques = dex.matrix.uniques(csv.data);\r\n    // Flatten them into our header.\r\n    header = dex.matrix.flatten(uniques);\r\n\r\n    // Create a map of names to header index for each column.\r\n    nameToIndex = new Array(uniques.length);\r\n    for (ri = 0, cid = 0; ri < uniques.length; ri++) {\r\n      nameToIndex[ri] =\r\n      {};\r\n      for (ci = 0; ci < uniques[ri].length; ci++) {\r\n        nameToIndex[ri][header[cid]] = cid;\r\n        cid += 1;\r\n      }\r\n    }\r\n\r\n    // Create a N x N matrix of zero values.\r\n    matrix = new Array(header.length);\r\n    for (ri = 0; ri < header.length; ri++) {\r\n      row = new Array(header.length);\r\n      for (ci = 0; ci < header.length; ci++) {\r\n        row[ci] = 0;\r\n      }\r\n      matrix[ri] = row;\r\n    }\r\n    //dex.console.log(\"nameToIndex\", nameToIndex, \"matrix\", matrix);\r\n\r\n    for (ri = 0; ri < csv.data.length; ri++) {\r\n      for (ci = 1; ci < csv.header.length; ci++) {\r\n        src = nameToIndex[ci - 1][csv.data[ri][ci - 1]];\r\n        dest = nameToIndex[ci][csv.data[ri][ci]];\r\n\r\n        //dex.console.log(csv.data[ri][ci-1] + \"<->\" + csv.data[ri][ci], src + \"<->\" + dest);\r\n        matrix[src][dest] = 1;\r\n        matrix[dest][src] = 1;\r\n      }\r\n    }\r\n\r\n    connectionMatrix = {\"header\" : header, \"connections\" : matrix};\r\n    //dex.console.log(\"Connection Matrix\", connectionMatrix);\r\n    return connectionMatrix;\r\n  };\r\n\r\n  my.createMap = function (csv, keyIndex) {\r\n    var ri, ci, rowMap, map =\r\n    {};\r\n\r\n    for (ri = 0; ri < csv.data.length; ri += 1) {\r\n      if (csv.data[ri].length === csv.header.length) {\r\n        rowMap =\r\n        {};\r\n\r\n        for (ci = 0; ci < csv.header.length; ci += 1) {\r\n          rowMap[csv.header[ci]] = csv.data[ri][ci];\r\n        }\r\n        map[csv.data[ri][keyIndex]] = rowMap;\r\n      }\r\n    }\r\n    return map;\r\n  };\r\n\r\n  my.toJson = function (csv, rowIndex, columnIndex) {\r\n    var jsonData = [];\r\n    var ri, ci, jsonRow;\r\n\r\n    if (arguments.length >= 3) {\r\n      jsonRow = {};\r\n      jsonRow[csv.header[columnIndex]] = csv.data[rowIndex][columnIndex];\r\n      return jsonRow;\r\n    }\r\n    else if (arguments.length === 2) {\r\n      var jsonRow =\r\n      {};\r\n      for (ci = 0; ci < csv.header.length; ci += 1) {\r\n        jsonRow[csv.header[ci]] = csv.data[rowIndex][ci];\r\n      }\r\n      return jsonRow;\r\n    }\r\n    else if (arguments.length === 1) {\r\n      for (ri = 0; ri < csv.data.length; ri++) {\r\n        var jsonRow =\r\n        {};\r\n        for (ci = 0; ci < csv.header.length; ci++) {\r\n          jsonRow[csv.header[ci]] = csv.data[ri][ci];\r\n          //dex.console.log(csv.header[ci] + \"=\" + csv.data[ri][ci], jsonRow);\r\n        }\r\n        jsonData.push(jsonRow);\r\n      }\r\n    }\r\n    return jsonData;\r\n  };\r\n\r\n  my.toColumnArrayJson = function (csv) {\r\n    var json = {};\r\n    var ri, ci, jsonRow;\r\n\r\n    if (arguments.length === 1) {\r\n      for (ci = 0; ci < csv.header.length; ci++) {\r\n        json[csv.header[ci]] = [];\r\n      }\r\n\r\n      for (ri = 0; ri < csv.data.length; ri++) {\r\n        for (ci = 0; ci < csv.header.length; ci++) {\r\n          json[csv.header[ci]].push(csv.data[ri][ci]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return json;\r\n  };\r\n\r\n  my.copy = function (csv) {\r\n    var copy = {\r\n      'header' : dex.array.copy(csv.header),\r\n      'data'   : dex.matrix.copy(csv.data)\r\n    };\r\n    return copy;\r\n  };\r\n\r\n  /**\r\n   * Transforms:\r\n   * csv =\r\n   * {\r\n * \t header : {C1,C2,C3},\r\n *   data   : [\r\n *     [A,B,C],\r\n *     [A,B,D]\r\n *   ]\r\n * }\r\n   * into:\r\n   * json =\r\n   * {\r\n * \t\"name\"     : rootName,\r\n *  \"category\" : category,\r\n *  \"children\" :\r\n *  [\r\n *    \"children\" :\r\n *     [\r\n *       {\r\n *         \"name\"     : \"A\",\r\n *         \"category\" : \"C1\",\r\n *         \"children\" :\r\n *         [\r\n *           {\r\n * \t           \"name\" : \"B\",\r\n *             \"category\" : \"C2\",\r\n *             \"children\" :\r\n *             [\r\n *               {\r\n *                 \"name\"     : \"C\",\r\n *                 \"category\" : \"C3\",\r\n *                 \"size\"     : 1\r\n *               }\r\n *               {\r\n *                 \"name\"     : \"D\",\r\n *                 \"category\" : \"C3\",\r\n *                 \"size\"     : 1\r\n *               }\r\n *             ]\r\n *           }\r\n *         ]\r\n *       }\r\n *     ]\r\n *  ]\r\n * }\r\n   *\r\n   * @param {Object} csv\r\n   */\r\n  my.toHierarchicalJson = function (csv) {\r\n    var connections = dex.csv.connections(csv);\r\n    return getChildren(connections, 0);\r\n\r\n    function getChildren(connections, depth) {\r\n      //dex.console.log(\"connections:\", connections, \"depth=\"+depth);\r\n      var kids = [], cname;\r\n\r\n      if (typeof connections === 'undefined') {\r\n        return kids;\r\n      }\r\n\r\n      for (cname in connections) {\r\n        //dex.console.log(\"CNAME\", cname);\r\n        if (connections.hasOwnProperty(cname)) {\r\n          kids.push(createChild(cname, csv.header[depth],\r\n            getChildren(connections[cname], depth + 1)));\r\n        }\r\n      }\r\n\r\n      return kids;\r\n    }\r\n\r\n    function createChild(name, category, children) {\r\n      var child =\r\n      {\r\n        \"name\"     : name,\r\n        \"category\" : category,\r\n        \"children\" : children\r\n      };\r\n      return child;\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Transforms:\r\n   * csv =\r\n   * {\r\n * \t header : {C1,C2,C3},\r\n *   data   : [\r\n *     [A,B,C],\r\n *     [A,B,D]\r\n *   ]\r\n * }\r\n   * into:\r\n   * connections =\r\n   * { A:{B:{C:{},D:{}}}}\r\n   *\r\n   * @param {Object} csv\r\n   *\r\n   */\r\n  my.connections = function (csv) {\r\n    var connections =\r\n    {};\r\n    var ri;\r\n\r\n    for (ri = 0; ri < csv.data.length; ri++) {\r\n      dex.object.connect(connections, csv.data[ri]);\r\n    }\r\n\r\n    //dex.console.log(\"connections:\", connections);\r\n    return connections;\r\n  };\r\n\r\n  my.createRowMap = function (csv, keyIndex) {\r\n    var map =\r\n    {};\r\n    var ri;\r\n\r\n    for (ri = 0; ri < csv.data.length; ri++) {\r\n      if (csv.data[ri].length == csv.header.length) {\r\n        map[csv.data[ri][keyIndex]] = csv.data[ri];\r\n      }\r\n    }\r\n    return map;\r\n  };\r\n\r\n  my.columnSlice = function (csv, columns) {\r\n    var slice = {};\r\n    slice.header = dex.array.slice(csv.header, columns);\r\n    slice.data = dex.matrix.columnSlice(csv.data, columns);\r\n\r\n    return slice;\r\n  };\r\n\r\n  my.getNumericColumnNames = function (csv) {\r\n    var possibleNumeric =\r\n    {};\r\n    var i, j, ri, ci;\r\n    var numericColumns = [];\r\n\r\n    for (i = 0; i < csv.header.length; i++) {\r\n      possibleNumeric[csv.header[i]] = true;\r\n    }\r\n\r\n    // Iterate thru the data, skip the header.\r\n    for (ri = 0; ri < csv.data.length; ri++) {\r\n      for (ci = 0; ci < csv.data[ri].length && ci < csv.header.length; ci++) {\r\n        if (possibleNumeric[csv.header[ci]] && !dex.object.isNumeric(csv.data[ri][ci])) {\r\n          possibleNumeric[csv.header[ci]] = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (ci = 0; ci < csv.header.length; ci++) {\r\n      if (possibleNumeric[csv.header[ci]]) {\r\n        numericColumns.push(csv.header[ci]);\r\n      }\r\n    }\r\n\r\n    return numericColumns;\r\n  };\r\n\r\n  my.guessTypes = function (csv) {\r\n    var i = 0;\r\n    var testResults = [];\r\n    csv.header.forEach(function (hdr) {\r\n      testResults.push({})\r\n    });\r\n    var numCols = csv.header.length;\r\n\r\n    csv.data.forEach(function (row) {\r\n      for (i = 0; i < numCols; i++) {\r\n\r\n        if (!testResults[i][\"notDate\"]) {\r\n          var date = new Date(row[i]);\r\n          if (isNaN(date.getTime())) {\r\n            dex.console.log(\"not date\" + i);\r\n            testResults[i][\"notDate\"] = true;\r\n          }\r\n        }\r\n\r\n        if (!testResults[i][\"notNumber\"]) {\r\n          if (isNaN(row[i])) {\r\n            testResults[i][\"notNumber\"] = true;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    var types = [];\r\n\r\n    for (i = 0; i < numCols; i++) {\r\n      var results = testResults[i];\r\n      if (!results.notDate) {\r\n        types.push('date');\r\n      }\r\n      else if (!results.notNumber) {\r\n        types.push('number');\r\n      }\r\n      else {\r\n        types.push('string');\r\n      }\r\n    }\r\n\r\n    return types;\r\n  }\r\n\r\n  my.strictTypes = function strictTypes(csv) {\r\n    var types = dex.csv.guessTypes(csv);\r\n\r\n    for (var i = 0; i < types.length; i++) {\r\n      if (types[i] == 'date') {\r\n        csv.data.forEach(function (row, ri) {\r\n          dex.console.log(\"row[\" + ri + \"]=\" + row[ri]);\r\n          csv.data[ri][i] = new Date(csv.data[ri][i]);\r\n        })\r\n      }\r\n      else {\r\n        if (types[i] == 'number') {\r\n          csv.data.forEach(function (row, ri) {\r\n            dex.console.log(\"row[\" + ri + \"]=\" + row[ri]);\r\n            csv.data[ri][i] = new Double(csv.data[ri][i]);\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return csv;\r\n  };\r\n\r\n  my.getNumericIndices = function (csv) {\r\n    var possibleNumeric =\r\n    {};\r\n    var i, j;\r\n    var numericIndices = [];\r\n\r\n    for (i = 0; i < csv.header.length; i++) {\r\n      possibleNumeric[csv.header[i]] = true;\r\n    }\r\n\r\n    // Iterate thru the data, skip the header.\r\n    for (i = 1; i < csv.data.length; i++) {\r\n      for (j = 0; j < csv.data[i].length && j < csv.header.length; j++) {\r\n        if (possibleNumeric[csv.header[j]] && !dex.object.isNumeric(csv.data[i][j])) {\r\n          console.log(\"csv.header[\" + j + \"]=\" + csv.header[j] + \" is not numeric due to csv.data[\" + i + \"][\"\r\n          + j + \"]=\" + csv.data[i][j]);\r\n          possibleNumeric[csv.header[j]] = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < csv.header.length; i++) {\r\n      if (possibleNumeric[csv.header[i]]) {\r\n        numericIndices.push(i);\r\n      }\r\n    }\r\n\r\n    return numericIndices;\r\n  };\r\n\r\n  my.isColumnNumeric = function (csv, columnNum) {\r\n    var i;\r\n\r\n    for (i = 0; i < csv.data.length; i++) {\r\n      if (!dex.object.isNumeric(csv.data[i][columnNum])) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n// Used to be toMapArray\r\n  my.group = function (csv, columns) {\r\n    var ri, ci;\r\n    var groups = {};\r\n    var returnGroups = [];\r\n    var values;\r\n    var key;\r\n    var otherColumns;\r\n    var otherHeaders;\r\n    var groupName;\r\n\r\n    if (arguments < 2) {\r\n      return csv;\r\n    }\r\n\r\n    function compare(a, b) {\r\n      var si, h;\r\n\r\n      for (si = 0; si < columns.length; si++) {\r\n        h = csv.header[columns[si]]\r\n        if (a[h] < b[h]) {\r\n          return -1;\r\n        }\r\n        else if (a[h] > b[h]) {\r\n          return 1\r\n        }\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    //otherColumns = dex.array.difference(dex.range(0, csv.header.length), columns);\r\n    //otherHeaders = dex.array.slice(csv.header, otherColumns);\r\n\r\n    for (ri = 0; ri < csv.data.length; ri += 1) {\r\n      values = dex.array.slice(csv.data[ri], columns);\r\n      key = values.join(':::');\r\n\r\n      if (groups[key]) {\r\n        group = groups[key];\r\n      }\r\n      else {\r\n        //group = { 'csv' : dex.csv.csv(otherHeaders, []) };\r\n        group =\r\n        {\r\n          'key'    : key,\r\n          'values' : [],\r\n          'csv'    : dex.csv.csv(csv.header, [])\r\n        };\r\n        for (ci = 0; ci < values.length; ci++) {\r\n          group.values.push({'name' : csv.header[columns[ci]], 'value' : values[ci]});\r\n        }\r\n        groups[key] = group;\r\n      }\r\n      //group.csv.data.push(dex.array.slice(csv.data[ri], otherColumns));\r\n      group.csv.data.push(csv.data[ri]);\r\n      //groups[key] = group;\r\n    }\r\n\r\n    for (groupName in groups) {\r\n      if (groups.hasOwnProperty(groupName)) {\r\n        returnGroups.push(groups[groupName]);\r\n      }\r\n    }\r\n\r\n    return returnGroups.sort(compare);\r\n  };\r\n\r\n  my.visitCells = function (csv, func) {\r\n    var ci, ri;\r\n\r\n    for (ri = 0; ri < csv.data.length; ri++) {\r\n      for (ci = 0; ci < csv.header.length; ci++) {\r\n        func(ci, ri, csv.data[ri][ci]);\r\n      }\r\n    }\r\n  };\r\n\r\n  my.longestWord = function (csv) {\r\n    var longest = 0;\r\n    for (var row = 0; row < csv.data.length; row++) {\r\n      for (var col = 0; col < csv.data[row].length; col++) {\r\n        if (longest < csv.data[row][col].length) {\r\n          longest = csv.data[row][col].length;\r\n        }\r\n      }\r\n    }\r\n    return longest;\r\n  };\r\n\r\n  my.numericSubset = function (csv) {\r\n    return dex.csv.columnSlice(csv, dex.csv.getNumericIndices(csv));\r\n  };\r\n\r\n  return my;\r\n}());","dex.datagen = (function () {\r\n  var my = {};\r\n\r\n  /**\r\n   * Creates a matrix of random integers within the specified range.\r\n   *\r\n   * @param spec The matrix specification.  Ex: {\"rows\":10, \"columns\": 4, \"min\", 0, \"max\":100}\r\n   *\r\n   * @returns {Array} An array containing spec.rows number of rows.  Each row consisting of\r\n   * an array containing spec.columns elements.  Each element is a randomly generated integer\r\n   * within the range [spec.min, spec.max]\r\n   *\r\n   */\r\n  my.randomMatrix = function (spec) {\r\n    var ri, ci;\r\n\r\n    //{\"rows\":10, \"columns\": 4, \"min\", 0, \"max\":100})\r\n    var matrix = [];\r\n    var range = spec.max - spec.min;\r\n    for (ri = 0; ri < spec.rows; ri++) {\r\n      var row = [];\r\n\r\n      for (ci = 0; ci < spec.columns; ci++) {\r\n        row.push(Math.random() * range + spec.min);\r\n      }\r\n      matrix.push(row);\r\n    }\r\n    return matrix;\r\n  };\r\n\r\n  /**\r\n   * Creates a matrix of random integers within the specified range.\r\n   *\r\n   * @param spec The matrix specification.  Ex: {\"rows\":10, \"columns\": 4, \"min\", 0, \"max\":100}\r\n   *\r\n   * @returns {Array} An array containing spec.rows number of rows.  Each row consisting of\r\n   * an array containing spec.columns elements.  Each element is a randomly generated integer\r\n   * within the range [spec.min, spec.max]\r\n   *\r\n   */\r\n  my.identityCsv = function (spec) {\r\n    var ri, ci;\r\n    var csv = {};\r\n    csv.header = dex.datagen.identityHeader(spec);\r\n    csv.data = dex.datagen.identityMatrix(spec);\r\n    return csv;\r\n  };\r\n\r\n  my.identityMatrix = function (spec) {\r\n    var ri, ci;\r\n\r\n    //{\"rows\":10, \"columns\": 4, \"min\", 0, \"max\":100})\r\n    var matrix = [];\r\n    var range = spec.max - spec.min;\r\n    for (ri = 0; ri < spec.rows; ri++) {\r\n      var row = [];\r\n\r\n      for (ci = 0; ci < spec.columns; ci++) {\r\n        row.push(\"R\" + (ri + 1) + \"C\" + (ci + 1));\r\n      }\r\n      matrix.push(row);\r\n    }\r\n    return matrix;\r\n  };\r\n\r\n  my.identityHeader = function (spec) {\r\n    return dex.range(1, spec.columns).map(function (i) {\r\n      return \"C\" + i;\r\n    });\r\n  };\r\n\r\n  return my;\r\n}());","\r\nvar bus = PubSub;\r\n\r\nvar dex = (function ($) {\r\n  var my = {};\r\n\r\n  my.version = \"0.7\";\r\n  my.range = function (start, len) {\r\n    var range = [];\r\n    var end = start + len;\r\n\r\n    for (var i = start; i < end; i++) {\r\n      range.push(i);\r\n    }\r\n\r\n    return range;\r\n  };\r\n\r\n  my.svg = {};\r\n  my.ui = { 'jqueryui' : {} };\r\n  my.charts = { 'd3' : { 'map' : {}}, 'dygraphs' : {}, 'google' : {}, 'handlebars' : {}, 'threejs' : {} };\r\n\r\n  return my;\r\n}(jQuery, _));\r\n","dex.json = (function () {\r\n  var my = {};\r\n\r\n////\r\n//\r\n// dex.json : This module provides routines dealing with json data.\r\n//\r\n////\r\n\r\n  /**\r\n   *\r\n   * Take a slice of an array.\r\n   *\r\n   * @method dex.array.slice\r\n   * @param\r\n   */\r\n  my.toCsv = function (json, header) {\r\n    var csv;\r\n    var ri, ci;\r\n    var data = [];\r\n\r\n    // Keys are provided.\r\n    if (arguments.length == 2) {\r\n      if (Array.isArray(json)) {\r\n        for (ri = 0; ri < json.length; ri++) {\r\n          var row = [];\r\n          for (ci = 0; ci < header.length; ci++) {\r\n            row.push(json[ri][header[ci]]);\r\n          }\r\n          data.push(row);\r\n        }\r\n      }\r\n      else {\r\n        var row = [];\r\n        for (ci = 0; ci < header.length; ci++) {\r\n          row.push(json[ri][header[ci]]);\r\n        }\r\n        data.push(row);\r\n      }\r\n      return dex.csv.csv(header, data);\r\n    }\r\n    else {\r\n      return dex.json.toCsv(json, dex.json.keys(json));\r\n    }\r\n  };\r\n\r\n  my.keys = function (json) {\r\n    var keyMap = {};\r\n    var keys = [];\r\n    var ri, key;\r\n\r\n    if (Array.isArray(json)) {\r\n      for (ri = 0; ri < json.length; ri++) {\r\n        for (key in json[ri]) {\r\n          keyMap[key] = true;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      for (key in json) {\r\n        keyMap[key] = true;\r\n      }\r\n    }\r\n\r\n    for (key in keyMap) {\r\n      keys.push(key);\r\n    }\r\n\r\n    return keys;\r\n  };\r\n\r\n  return my;\r\n}());","dex.matrix = (function () {\r\n  var my = {};\r\n\r\n  /**\r\n   *\r\n   * Return the specified slice of the matrix.  The original matrix is\r\n   * not altered.\r\n   *\r\n   * @param matrix The matrix to be sliced.\r\n   * @param columns An array of column indices to include within the slice.\r\n   * @param {rows} If supplied, the slice will consist only of the specified\r\n   * number of rows.\r\n   *\r\n   * @returns {Array}\r\n   */\r\n  my.slice = function (matrix, columns, rows) {\r\n    var slice = [];\r\n    var ri;\r\n\r\n    if (arguments.length === 3) {\r\n      for (ri = 0; ri < rows.length; ri++) {\r\n        slice.push(dex.array.slice(matrix[rows[ri]]));\r\n      }\r\n    }\r\n    else {\r\n      for (ri = 0; ri < matrix.length; ri++) {\r\n        dex.console.trace(\"RI: \" + ri, dex.array.slice(matrix[ri], columns));\r\n        slice.push(dex.array.slice(matrix[ri], columns));\r\n      }\r\n    }\r\n    return slice;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Returns a matrix consisting of unique values relative to each\r\n   * column.\r\n   *\r\n   * @param matrix The matrix to evaluate.\r\n   * @returns {Array} The unique values relative to each column. In the form\r\n   * of [[ column 1 unique values], [column 2 unique values], ...]]\r\n   *\r\n   */\r\n  my.uniques = function (matrix) {\r\n    var ci;\r\n    var uniques = [];\r\n    var tmatrix = dex.matrix.transpose(matrix);\r\n    var ncol = tmatrix.length;\r\n\r\n    for (ci = 0; ci < ncol; ci += 1) {\r\n      uniques.push(dex.array.unique(tmatrix[ci]));\r\n    }\r\n    return uniques;\r\n  };\r\n\r\n  my.transpose = function (matrix) {\r\n    var ci;\r\n    var ncols;\r\n    var transposedMatrix = [];\r\n    //dex.console.log(\"Transposing:\", matrix);\r\n\r\n    if (!matrix || matrix.length <= 0 || !matrix[0] || matrix[0].length <= 0) {\r\n      return [];\r\n    }\r\n\r\n    ncols = matrix[0].length;\r\n\r\n    for (ci = 0; ci < ncols; ci++) {\r\n      transposedMatrix.push(matrix.map(function (row) {\r\n        return row[ci];\r\n      }));\r\n    }\r\n\r\n    //dex.console.log(\"Transpose\", transposedMatrix, \"Original Matrix\", matrix);\r\n    return transposedMatrix;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return a slice of this matrix based upon the supplied columns.\r\n   * The original matrix will be left untouched.\r\n   *\r\n   * @param matrix The matrix to slice.\r\n   * @param columns An array of column indexes to be included in the slice.\r\n   * @returns {*}\r\n   */\r\n  my.columnSlice = function (matrix, columns) {\r\n    // TODO: Determine, is this destructive?\r\n    var slice = [];\r\n    var ri;\r\n    var transposeMatrix;\r\n\r\n    if (arguments.length != 2) {\r\n      return matrix;\r\n    }\r\n\r\n    transposeMatrix = dex.matrix.transpose(matrix);\r\n    //dex.console.log(\"transposing\", matrix, \"transpose\", transposedMatrix);\r\n\r\n    // Specific columns targetted:\r\n    if (Array.isArray(columns)) {\r\n      for (ri = 0; ri < columns.length; ri += 1) {\r\n        slice.push(transposeMatrix[columns[ri]]);\r\n      }\r\n    }\r\n    // Single column.\r\n    else {\r\n      slice.push(transposeMatrix[columns]);\r\n    }\r\n\r\n    // Back to row/column format.\r\n    return dex.matrix.transpose(slice);\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return a flattened version of the matrix.\r\n   *\r\n   * @param matrix The matrix to flatten.\r\n   * @returns {Array} A flattened version of the matrix.\r\n   *\r\n   * Given:\r\n   *\r\n   * matrix = [[r1c1, r1c2], [r2c1, r2c2]]\r\n   * dex.matrix.flatten(matrix) will return: [r1c1, r1c2, r2c1, r2c2]\r\n   *\r\n   */\r\n  my.flatten = function (matrix) {\r\n    var array = [];\r\n    var ri, ci;\r\n\r\n    for (ri = 0; ri < matrix.length; ri++) {\r\n      for (ci = 0; ci < matrix[ri].length; ci++) {\r\n        array.push(matrix[ri][ci]);\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  /**\r\n   * Rewrite this!!! No dependencies on d3 here.\r\n   *\r\n   * @param data\r\n   * @param indices\r\n   * @returns {*|*[]}\r\n   */\r\n  my.extent = function (data, indices) {\r\n    var values = data;\r\n    if (arguments.length === 2) {\r\n      values = dex.matrix.flatten(dex.matrix.slice(data, indices));\r\n      var max = Math.max.apply(null, values);\r\n      var min = Math.min.apply(null, values);\r\n      //dex.console.log(\"*** EXTENT:\", values, \"MIN/MAX\", [min, max]);\r\n      return [min, max];\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Combine each column in matrix1 with each column in matrix2.\r\n   *\r\n   * @param matrix1 The first matrix to combine.\r\n   * @param matrix2 The second matrix to combine.\r\n   * @returns {Array} A resultant matrix such that:\r\n   *\r\n   * matrix1 = [[m1r1c1, m1r1c2], [m1r2c1, m1r2c2]]\r\n   * matrix2 = [[m2r1c1, m2r1c2], [m2r2c1, m2r2c2]]\r\n   * result = [[m1r1c1, m1r1c2, m2r1c1, m2r1c2], [m1r2c1, m1r2c2, m2r2c1, m2r2c2]]\r\n   *\r\n   */\r\n  my.combine = function (matrix1, matrix2) {\r\n    var result = [];\r\n    var ri, oci, ici;\r\n\r\n    // Iterate over the rows in matrix1:\r\n    for (ri = 0; ri < matrix1.length; ri++) {\r\n      // Iterate over the columns in matrix2:\r\n      for (oci = 0; oci < matrix1[ri].length; oci++) {\r\n        // Iterate over the columns in matrix2:\r\n        for (ici = 0; ici < matrix2[ri].length; ici++) {\r\n          result.push([matrix1[ri][oci], matrix2[ri][ici], oci, ici]);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return a copy of the supplied matrix.\r\n   *\r\n   * @param matrix The matrix to copy.\r\n   *\r\n   * @returns {Array} A copy of the original matrix.\r\n   */\r\n  my.copy = function (matrix) {\r\n    var copy = [];\r\n    var ri, ci;\r\n    for (ri = 0; ri < matrix.length; ri++) {\r\n      copy[ri] = [];\r\n      for (ci = 0; ci < matrix[ri].length; ci++) {\r\n        copy[ri].push(matrix[ri][ci]);\r\n      }\r\n    }\r\n\r\n    return copy;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Insert a new column at position 0 within this matrix which will contain\r\n   * integer values starting at 1, 2, 3, ...\r\n   *\r\n   * @param matrix The matrix to index.\r\n   * @returns {*} A copy of the original matrix with the index inserted.\r\n   *\r\n   */\r\n  my.addIndex = function (matrix) {\r\n    var indexMatrix = dex.matrix.copy(matrix);\r\n\r\n    for (var ri = 0; ri < matrix.length; ri++) {\r\n      indexMatrix[ri].unshift(ri + 1);\r\n    }\r\n\r\n    dex.console.trace(\"Original Matrix:\", matrix, \"Indexed Matrix\", indexMatrix);\r\n    return indexMatrix;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Determine whether the supplied columnNum within the supplied matrix is\r\n   * numeric or not.\r\n   *\r\n   * @param matrix The matrix to evaluate.\r\n   * @param columnNum The column within the matrix to evaluate.\r\n   *\r\n   * @returns {boolean} True if the column is numeric, false otherwise.\r\n   *\r\n   */\r\n  my.isColumnNumeric = function (matrix, columnNum) {\r\n    var i;\r\n\r\n    for (i = 1; i < matrix.length; i++) {\r\n      if (!dex.object.isNumeric(matrix[i][columnNum])) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return the maximum value of the specified columnNum within the\r\n   * supplied matrix.\r\n   *\r\n   * @param matrix The matrix to evaluate.\r\n   * @param columnNum The column number within the matrix to evaluate.\r\n   * @returns {*} The maximum value of the specified column within the\r\n   * supplied matrix.\r\n   *\r\n   */\r\n  my.max = function (matrix, columnNum) {\r\n    var maxValue = matrix[0][columnNum];\r\n    var i;\r\n\r\n    if (dex.matrix.isColumnNumeric(matrix, columnNum)) {\r\n      maxValue = parseFloat(matrix[0][columnNum]);\r\n      for (i = 1; i < matrix.length; i++) {\r\n        if (maxValue < parseFloat(matrix[i][columnNum])) {\r\n          maxValue = parseFloat(matrix[i][columnNum]);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      for (i = 1; i < matrix.length; i++) {\r\n        if (maxValue < matrix[i][columnNum]) {\r\n          maxValue = matrix[i][columnNum];\r\n        }\r\n      }\r\n    }\r\n\r\n    return maxValue;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return the minimum value of the specified columnNum within the\r\n   * supplied matrix.\r\n   *\r\n   * @param matrix The matrix to evaluate.\r\n   * @param columnNum The column number within the matrix to evaluate.\r\n   * @returns {*} The minimum value of the specified column within the\r\n   * supplied matrix.\r\n   *\r\n   */\r\n  my.min = function (matrix, columnNum) {\r\n    var minValue = matrix[0][columnNum];\r\n    var i;\r\n\r\n    if (dex.matrix.isColumnNumeric(matrix, columnNum)) {\r\n      minValue = parseFloat(matrix[0][columnNum]);\r\n      for (i = 1; i < matrix.length; i++) {\r\n        if (minValue > parseFloat(matrix[i][columnNum])) {\r\n          minValue = parseFloat(matrix[i][columnNum]);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      for (i = 1; i < matrix.length; i++) {\r\n        if (minValue > matrix[i][columnNum]) {\r\n          minValue = matrix[i][columnNum];\r\n        }\r\n      }\r\n    }\r\n\r\n    return minValue;\r\n  };\r\n\r\n  return my;\r\n}());","dex.object = (function () {\r\n  var my = {};\r\n\r\n////\r\n//\r\n// dex.object : This module provides routines dealing with basic javascript\r\n//              objects.\r\n//\r\n////\r\n\r\n  /**\r\n   *\r\n   * Return the lccal keys of this object without the inherited ones.\r\n   *\r\n   * @param obj The object whose local keys we are interested in.\r\n   *\r\n   * @returns {Array} An array of 0 or more lccal keys.\r\n   */\r\n  my.keys = function keys(obj) {\r\n    var keys = [];\r\n\r\n    for (var key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n\r\n    return keys;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * A pretty good, but imperfect mechanism for performing a deep\r\n   * clone of an object.\r\n   *\r\n   * @param obj The object to clone.\r\n   * @returns {*} The cloned object.\r\n   *\r\n   */\r\n  my.clone = function clone(obj) {\r\n    var i, attr, len;\r\n\r\n    // Handle the 3 simple types, and null or undefined\r\n    if (null == obj || \"object\" != typeof obj)\r\n      return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n      var copy = new Date();\r\n      copy.setTime(obj.getTime());\r\n      return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n      var copy = [];\r\n      for (i = 0, len = obj.length; i < len; i++) {\r\n        copy[i] = dex.object.clone(obj[i]);\r\n      }\r\n      return copy;\r\n    }\r\n\r\n    // DOM Nodes are nothing but trouble.\r\n    if (dex.object.isElement(obj) ||\r\n      dex.object.isNode(obj)) {\r\n      return obj;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n      var copy = {};\r\n      //jQuery.extend(copy, obj);\r\n      for (attr in obj) {\r\n        if (obj.hasOwnProperty(attr)) {\r\n          copy[attr] = dex.object.clone(obj[attr]);\r\n          //copy[attr] = obj[attr];\r\n        }\r\n      }\r\n      return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n  };\r\n\r\n// TODO: This is shaky at best.\r\n  my.isEmpty = function isEmpty(obj) {\r\n    //dex.console.log(\"isEmpty(\" + obj + \") typeof=\" + (typeof obj));\r\n    if (!obj || obj instanceof Array) {\r\n      return true;\r\n    }\r\n    if (\"object\" == typeof obj) {\r\n      for (var key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n          //dex.console.log(\"OBJ: \", obj, \" contains key '\" + key + \"'\");\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Overlay the top object on top of the bottom.  This method will first clone\r\n   * the bottom object.  Then it will drop the values within the top object\r\n   * into the clone.\r\n   *\r\n   * @method dex.object.overlay\r\n   * @param {Object} top The object who's properties will be on top.\r\n   * @param {Object} bottom The object who's properties will be on bottom.\r\n   * @return {Object} The overlaid object where the properties in top override\r\n   *                  properties in bottom.  The return object is a clone or\r\n   *                  copy.\r\n   *\r\n   */\r\n\r\n  my.overlay = function overlay(top, bottom) {\r\n    // Make a clone of the bottom object.\r\n    var overlay = dex.object.clone(bottom);\r\n    var prop;\r\n\r\n    // If we have parameters in the top object, overlay them on top\r\n    // of the bottom object.\r\n    if (top !== 'undefined') {\r\n      // Iterate over the props in top.\r\n      for (prop in top) {\r\n        // Arrays are special cases. [A] on top of [A,B] should give [A], not [A,B]\r\n        if (typeof top[prop] == 'object' && overlay[prop] != null && !(top[prop] instanceof Array)) {\r\n          //console.log(\"PROP: \" + prop + \", top=\" + top + \", overlay=\" + overlay);\r\n          overlay[prop] = dex.object.overlay(top[prop], overlay[prop]);\r\n        }\r\n        // Simply overwrite for simple cases and arrays.\r\n        else {\r\n          overlay[prop] = top[prop];\r\n        }\r\n      }\r\n    }\r\n\r\n    //console.dir(config);\r\n    return overlay;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This method returns whether or not the supplied object is a Node.\r\n   *\r\n   * @param obj The object to test.\r\n   * @returns {boolean} True if obj is a Node, false otherwise.\r\n   *\r\n   */\r\n  my.isNode = function isNode(obj) {\r\n    return (\r\n      typeof Node === \"object\" ? obj instanceof Node :\r\n      obj && typeof obj === \"object\" && typeof obj.nodeType === \"number\" && typeof obj.nodeName === \"string\"\r\n    );\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This method returns whether or not the supplied object is a\r\n   * DOM node.\r\n   *\r\n   * @param obj The object to test.\r\n   * @returns {boolean} True if obj is a DOM node, false otherwise.\r\n   *\r\n   */\r\n  my.isElement = function isElement(obj) {\r\n    return (\r\n      typeof HTMLElement === \"object\" ? obj instanceof HTMLElement : //DOM2\r\n      obj && typeof obj === \"object\" && obj.nodeType === 1 && typeof obj.nodeName === \"string\"\r\n    );\r\n  };\r\n\r\n  /**\r\n   *\r\n   * This method returns a boolean representing whether obj is contained\r\n   * within container.\r\n   *\r\n   * @param {Object} container\r\n   * @param {Object} obj\r\n   * @return True if container contains obj.  False otherwise.\r\n   */\r\n  my.contains = function contains(container, obj) {\r\n    var i = container.length;\r\n    while (i--) {\r\n      if (container[i] === obj) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Return whether or not the supplied object is a function.\r\n   *\r\n   * @param obj The object to check.\r\n   * @returns {boolean} True if obj is a function, false otherwise.\r\n   *\r\n   */\r\n  my.isFunction = function isFunction(obj) {\r\n    return typeof obj === 'function';\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Visit each local property within.\r\n   *\r\n   * @param obj\r\n   * @param func\r\n   */\r\n  my.visit = function (obj, func) {\r\n    var prop;\r\n    func(obj);\r\n    for (prop in obj) {\r\n      if (obj.hasOwnProperty(prop)) {\r\n        if (typeof obj[prop] === 'object') {\r\n          dex.object.visit(obj[prop], func);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  my.connect = function connect(map, values) {\r\n    //dex.console.log(\"  map:\", map, \"  values: \", values);\r\n    if (!values || values.length <= 0) {\r\n      return this;\r\n    }\r\n    if (!map[values[0]]) {\r\n      map[values[0]] = {};\r\n    }\r\n    dex.object.connect(map[values[0]], values.slice(1));\r\n\r\n    return this;\r\n  };\r\n\r\n  my.isNumeric = function (obj) {\r\n    return !isNaN(parseFloat(obj)) && isFinite(obj);\r\n  };\r\n\r\n  my.setHierarchical = function (hierarchy, name, value, delimiter) {\r\n    if (hierarchy == null) {\r\n      hierarchy = {};\r\n    }\r\n\r\n    if (typeof hierarchy != 'object') {\r\n      return hierarchy;\r\n    }\r\n\r\n    // Create an array of names by splitting delimiter, then call\r\n    // this function in the 3 argument (Array of paths) context.\r\n    if (arguments.length == 4) {\r\n      return dex.object.setHierarchical(hierarchy,\r\n        name.split(delimiter), value);\r\n    }\r\n\r\n    // Array of paths context.\r\n    else {\r\n      // This is the last variable name, just set the value.\r\n      if (name.length === 1) {\r\n        hierarchy[name[0]] = value;\r\n      }\r\n      // We still have to traverse.\r\n      else {\r\n        // Undefined container object, just create an empty.\r\n        if (!(name[0] in hierarchy)) {\r\n          hierarchy[name[0]] = {};\r\n        }\r\n\r\n        // Recursively traverse down the hierarchy.\r\n        dex.object.setHierarchical(hierarchy[name[0]], name.splice(1), value);\r\n      }\r\n    }\r\n\r\n    return hierarchy;\r\n  };\r\n\r\n  return my;\r\n}());"],"sourceRoot":"/source/"}