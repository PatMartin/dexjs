(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.dex=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(context){"use strict";function init(){var channels={},funcType=Function;return{publish:function(){var args=arguments,subs=channels[args[0]],len,params,x;if(subs){len=subs.length;params=args.length>1?Array.prototype.splice.call(args,1):[];setTimeout(function(){for(x=0;x<len;x+=1){subs[x].apply(context,params)}subs=context=params=null},0)}},subscribe:function(channel,callback){if(typeof channel!=="string"){throw"invalid or missing channel"}if(!(callback instanceof funcType)){throw"invalid or missing callback"}if(!channels[channel]){channels[channel]=[]}channels[channel].push(callback);return{channel:channel,callback:callback}},unsubscribe:function(handle,callback){if(handle.channel&&handle.callback){callback=handle.callback;handle=handle.channel}if(typeof handle!=="string"){throw"invalid or missing channel"}if(!(callback instanceof funcType)){throw"invalid or missing callback"}var subs=channels[handle],x,y=subs instanceof Array?subs.length:0;for(x=0;x<y;x+=1){if(subs[x]===callback){subs.splice(x,1);break}}}}}if(typeof define==="function"&&define.amd){define("pubsub",init)}else if(typeof module==="object"&&module.exports){module.exports=init()}else{context.PubSub=init()}})(this)},{}],2:[function(require,module,exports){var array={};module.exports=array;module.exports.slice=function(array,rowRange,maxRows){var arraySlice=[];var range;var i;var arrayCopy=dex.array.copy(array);if(arguments.length<2){return arrayCopy}else if(arguments.length==2){if(Array.isArray(rowRange)){range=rowRange}else{range=dex.range(rowRange,arrayCopy.length-rowRange)}}else if(arguments.length>2){if(Array.isArray(rowRange)){range=rowRange}else{range=dex.range(rowRange,maxRows)}}for(i=0;i<range.length;i++){arraySlice.push(arrayCopy[range[i]])}return arraySlice};module.exports.extent=function(matrix,indices){if(!matrix||matrix.length<=0||!indices||indices.length<=0){return[0,0]}var min=matrix[0][indices[0]];var max=min;indices.forEach(function(ci){matrix.forEach(function(row){if(min>row[ci]){min=row[ci]}if(max<row[ci]){max=row[ci]}})});return[min,max]};module.exports.copy=function(array){return _.clone(array)}},{}],3:[function(require,module,exports){var areachart=function(userConfig){var chart;var defaults={parent:"#AreaChart",id:"AreaChart","class":"AreaChart",resizable:true,csv:{header:[],data:[]},linktype:"area-spline",width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var gtypes=dex.csv.guessTypes(csv);var ncsv=dex.csv.numericSubset(csv);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var types={};dex.range(1,ncsv.header.length).map(function(hi){types[ncsv.header[hi-1]]=config.linktype});var c3config={bindto:config.parent,data:{columns:columns.data,types:types,color:d3.scale.category20()},subchart:{show:true},zoom:{enabled:true},legend:{position:"right"}};if(gtypes[0]=="string"){c3config["axis"]={x:{type:"category",label:{text:csv.header[0],position:"outer-center"},categories:dex.csv.transpose(dex.csv.columnSlice(csv,[0])).data[0]}}}var chart=c3.generate(c3config)};$(document).ready(function(){});return chart};module.exports=areachart},{}],4:[function(require,module,exports){var barchart=function(userConfig){var chart;var defaults={parent:"#BarChart",id:"BarChart","class":"BarChart",resizable:true,csv:{header:[],data:[]},width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var gtypes=dex.csv.guessTypes(csv);var ncsv=dex.csv.numericSubset(csv);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var c3config={bindto:config.parent,data:{columns:columns.data,type:"bar",color:d3.scale.category20()},bar:{width:{ratio:.9}},subchart:{show:true},zoom:{enabled:true},legend:{position:"right"}};if(gtypes[0]=="string"){c3config["axis"]={x:{type:"category",label:{text:csv.header[0],position:"outer-center"},categories:dex.csv.transpose(dex.csv.columnSlice(csv,[0])).data[0]}}}var chart=c3.generate(c3config)};$(document).ready(function(){});return chart};module.exports=barchart},{}],5:[function(require,module,exports){var linechart=function(userConfig){var chart;var defaults={parent:"#LineChart",id:"LineChart","class":"LineChart",resizable:true,csv:{header:[],data:[]},linktype:"area",width:"100%",height:"100%"};var chart=new dex.component(userConfig,defaults);var internalChart;var selectedColumns=[];chart.render=function render(){var config=chart.config;var csv=config.csv;window.onresize=this.render;if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height)}d3.select(config.parent).selectAll("*").remove();var gtypes=dex.csv.guessTypes(csv);selectedColumns=dex.csv.getNumericIndices(csv);if(gtypes[0]=="string"){selectedColumns.unshift(0)}var ncsv=dex.csv.columnSlice(csv,selectedColumns);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var types={};dex.range(1,ncsv.header.length).map(function(hi){types[ncsv.header[hi-1]]=config.linktype});var c3config={bindto:config.parent,data:{x:columns.header[0],columns:columns.data,types:types},subchart:{show:true},zoom:{enabled:true},legend:{position:"right"},groups:config.groups};if(gtypes[0]=="string"){c3config["axis"]={x:{type:"category",categories:[].concat.apply([],dex.matrix.uniques(dex.matrix.slice(csv.data,[0]))).sort()}}}internalChart=c3.generate(c3config)};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var gtypes=dex.csv.guessTypes(csv);var ncsv=dex.csv.columnSlice(csv,selectedColumns);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var types={};dex.range(1,ncsv.header.length).map(function(hi){types[ncsv.header[hi-1]]=config.linktype});var c3config={columns:columns.data};internalChart.load(c3config)};$(document).ready(function(){});return chart};module.exports=linechart},{}],6:[function(require,module,exports){var stackedareachart=function(userConfig){var chart;var defaults={parent:"#AreaChart",id:"AreaChart","class":"AreaChart",resizable:true,csv:{header:[],data:[]},width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var gtypes=dex.csv.guessTypes(csv);var ncsv=dex.csv.numericSubset(csv);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var types={};dex.range(1,ncsv.header.length).map(function(hi){types[ncsv.header[hi-1]]="area-spline"});var c3config={bindto:config.parent,data:{columns:columns.data,types:types,groups:[columns.header],color:d3.scale.category20()},subchart:{show:true},zoom:{enabled:true},legend:{position:"right"}};if(gtypes[0]=="string"){c3config["axis"]={x:{type:"category",label:{text:csv.header[0],position:"outer-center"},categories:dex.csv.transpose(dex.csv.columnSlice(csv,[0])).data[0]}}}var chart=c3.generate(c3config)};$(document).ready(function(){});return chart};module.exports=stackedareachart},{}],7:[function(require,module,exports){var stackedbarchart=function(userConfig){var chart;var defaults={parent:"#BarChart",id:"BarChart","class":"BarChart",resizable:true,csv:{header:[],data:[]},width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var gtypes=dex.csv.guessTypes(csv);var ncsv=dex.csv.numericSubset(csv);var columns=dex.csv.transpose(ncsv);for(var ci=0;ci<columns.header.length;ci++){columns.data[ci].unshift(columns.header[ci])}var c3config={bindto:config.parent,data:{columns:columns.data,type:"bar",color:d3.scale.category20(),groups:[columns.header]},bar:{width:{ratio:.9}},subchart:{show:true},zoom:{enabled:true},legend:{position:"right"}};if(gtypes[0]=="string"){c3config["axis"]={x:{type:"category",label:{text:csv.header[0],position:"outer-center"},categories:dex.csv.transpose(dex.csv.columnSlice(csv,[0])).data[0]}}}var chart=c3.generate(c3config)};$(document).ready(function(){});return chart};module.exports=stackedbarchart},{}],8:[function(require,module,exports){var c3={};c3.AreaChart=require("./AreaChart");c3.BarChart=require("./BarChart");c3.LineChart=require("./LineChart");c3.StackedAreaChart=require("./StackedAreaChart");c3.StackedBarChart=require("./StackedBarChart");module.exports=c3},{"./AreaChart":3,"./BarChart":4,"./LineChart":5,"./StackedAreaChart":6,"./StackedBarChart":7}],9:[function(require,module,exports){var charts={};charts.c3=require("./c3/c3");charts.d3=require("./d3/d3");charts.d3plus=require("./d3plus/d3plus");charts.dygraphs=require("./dygraphs/dygraphs");charts.google=require("./google/google");charts.threejs=require("./threejs/threejs");module.exports=charts},{"./c3/c3":8,"./d3/d3":36,"./d3plus/d3plus":38,"./dygraphs/dygraphs":40,"./google/google":46,"./threejs/threejs":48}],10:[function(require,module,exports){var axis=function(userConfig){var defaults={parent:null,id:"Axis","class":"Axis",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},margin:{left:25,right:25,top:0,bottom:0},transform:"translate(0,2)",column:0,axis:dex.config.axis({type:"linear",orient:"bottom",scale:dex.config.scale({type:"linear"}),ticks:5,tickSize:10,tickLine:dex.config.line({stroke:dex.config.stroke({color:"black",width:2}),fill:dex.config.fill({fillColor:"none"})}),path:dex.config.path({fill:dex.config.fill({fillColor:"none"}),stroke:dex.config.stroke({color:"black",width:2})})}),"title.text":"axis","title.anchor":"middle","title.color":"red","title.y":-8,"title.font.weight":"italic","title.transform":function(d,i){return"translate("+chart.config.width/2+","+(chart.config.height-chart.config.margin.bottom)+")"}};console.log("Creating axis...");console.dir(userConfig);var chart=new dex.component(userConfig,defaults);console.dir(chart);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function update(){var chart=this;var config=chart.config;var axis=d3.svg.axis();dex.console.trace("axis.update()",config);config.axis.scale.range=[config.margin.left,config.width-config.margin.right];config.axis.scale.domain=dex.matrix.extent(config.csv.data,[config.column-1]);console.log(config.id+":"+config.width+"x"+config.height+", domain: "+config.axis.scale.domain+", range: "+config.axis.scale.range);var axisScale=dex.config.createScale(config.axis.scale);dex.console.log(config.axis.scale);dex.config.configureAxis(axis,config.axis).scale(axisScale);d3.selectAll("#"+chart.config.id).remove();var chartContainer=d3.select(config.parent).append("g").attr("class",config["class"]).attr("id",config["id"]).attr("transform",config.transform).call(axis);chartContainer.select("path").call(dex.config.configurePath,config.axis.path);var lines=chartContainer.selectAll(".tick line").call(dex.config.configureLine,config.axis.tickLine);chartContainer.append("text").call(dex.config.configureText,dex.config.text(config.title))};return chart};module.exports=axis},{}],11:[function(require,module,exports){var barchart=function(userConfig){var config;var defaults={parent:null,id:"BarChart","class":"BarChart",resizeable:true,csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},ymin:0,xmin:0,xaxis:dex.config.axis({type:"linear",orient:"bottom",label:dex.config.text()}),yaxis:dex.config.axis({type:"linear",orient:"left",label:dex.config.text()}),width:"100%",height:"100%",xi:0,yi:[1],transform:"translate(100 100)",color:d3.scale.category20(),bars:{mouseover:dex.config.rectangle({stroke:{width:2,color:"red"},color:function(d){return config.color(d[3])}}),mouseout:dex.config.rectangle({color:function(d){return config.color(d[3])}})}};var chart=new dex.component(userConfig,defaults);var config=chart.config;var xscale=dex.config.createScale(dex.config.scale(config.xaxis.scale));config.xaxis.scale=xscale;var yscale=dex.config.createScale(dex.config.scale(config.yaxis.scale));config.yaxis.scale=yscale;config.bars.mouseover.height=config.bars.mouseout.height=function(d){return config.height-yscale(d[1])};config.bars.mouseout.width=config.bars.mouseover.width=xscale(config.csv.data[1][config.xi])-xscale(config.csv.data[0][config.xi]);config.bars.mouseout.x=config.bars.mouseover.x=function(d){return xscale(d[0])};config.bars.mouseout.y=config.bars.mouseover.y=function(d){return yscale(d[1])};var data=config.csv.data;data.forEach(function(d){config.yi.forEach(function(c){d[c]=+d[c]})});var yextent=dex.matrix.extent(data,config.yi);if(config.ymin!=null){yextent[0]=config.ymin}if(config.ymax!=null){yextent[1]=config.ymax}config.yaxis.scale.domain(yextent);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(config.resizeable){var width=d3.select(config.parent).property("clientWidth");var height=d3.select(config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function update(){d3.selectAll("#"+config.id).remove();var xaxis=dex.config.createAxis(config.xaxis);var yaxis=dex.config.createAxis(config.yaxis);var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);chartContainer.append("g").attr("class","xaxis").attr("transform","translate(0,"+config.height+")").call(xaxis);chartContainer.select(".xaxis").append("text").call(dex.config.configureText,config.xaxis.label);chartContainer.append("g").attr("class","yaxis").call(yaxis);chartContainer.select(".yaxis").append("text").call(dex.config.configureText,config.yaxis.label);var barData=dex.matrix.combine(dex.matrix.slice(data,[config.xi]),dex.matrix.slice(data,config.yi));chartContainer.selectAll(".bar").data(barData).enter().append("rect").call(dex.config.configureRectangle,config.bars.mouseout).on("mouseover",function(){d3.select(this).call(dex.config.configureRectangle,config.bars.mouseover)}).on("mouseout",function(){d3.select(this).call(dex.config.configureRectangle,config.bars.mouseout)})};$(document).ready(function(){});return chart};module.exports=barchart},{}],12:[function(require,module,exports){var chord=function(userConfig){var chart;var defaults={parent:"#ChordDiagram",id:"Chord","class":"Chord",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",transform:"translate(0 0)",padding:.05,nodes:{mouseout:dex.config.link({"stroke.color":"black","stroke.width":1,"fill.fillColor":function(d,i){return chart.config.color(d.index)},"fill.fillOpacity":.5,"fill.fill":"none",d:d3.svg.arc(),transform:""}),mouseover:dex.config.link({"stroke.color":"red","stroke.width":1,"fill.fillColor":function(d,i){return chart.config.color(d.index)},"fill.fillOpacity":1,"fill.fill":"none",d:d3.svg.arc(),transform:""})},links:{mouseout:dex.config.link({"stroke.color":"grey","stroke.dasharray":"","stroke.width":0,"fill.fillColor":function(d,i){return chart.config.color(d.target.index)},"fill.fillOpacity":.5,"fill.fill":"none",d:d3.svg.chord(),transform:""}),mouseover:dex.config.link({"stroke.color":"red","stroke.dasharray":"","stroke.width":0,"fill.fillColor":function(d,i){return chart.config.color(d.target.index)},transform:"","fill.fillOpacity":1,"fill.fill":"none",d:d3.svg.chord()})},color:d3.scale.category20(),innerRadius:130,outerRadius:200,"tick.start.x":1,"tick.start.y":0,"tick.end.x":5,"tick.end.y":0,"tick.padding":10,"tick.stroke":dex.config.stroke({width:2,color:"black"}),title:dex.config.text(),label:dex.config.text()};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var minDimension=Math.min(config.width,config.height);var outer=Math.min(config.width,config.height)/3;var inner=Math.max(outer-20,10);config.innerRadius=inner;config.outerRadius=outer;config.nodes.mouseover.d.innerRadius(config.innerRadius).outerRadius(config.outerRadius+2);config.nodes.mouseout.d.innerRadius(config.innerRadius).outerRadius(config.outerRadius);config.links.mouseover.d.radius(config.innerRadius);config.links.mouseout.d.radius(config.innerRadius);chart.attr("transform","translate("+config.width/2+","+config.height/2+")");if(config.debug){console.log("===== Chord#"+config.id+"."+config.class+" Configuration =====");console.dir(config)}var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);chordData=dex.csv.getConnectionMatrix(csv);var chord=d3.layout.chord().padding(config.padding).sortSubgroups(d3.descending).matrix(chordData.connections);chartContainer.append("g").selectAll("path").data(chord.groups).enter().append("path").attr("id","fillpath").call(dex.config.configureLink,config.nodes.mouseout).on("mouseover",function(activeChord){d3.select(this).call(dex.config.configureLink,config.nodes.mouseover);d3.selectAll("g.chord path").filter(function(d){return d.source.index==activeChord.index||d.target.index==activeChord.index}).call(dex.config.configureLink,config.links.mouseover)}).on("mouseout",function(inactiveChord){d3.select(this).call(dex.config.configureLink,config.nodes.mouseout);d3.selectAll("g.chord path").filter(function(d){return d.source.index==inactiveChord.index||d.target.index==inactiveChord.index}).call(dex.config.configureLink,config.links.mouseout)});var ticks=chartContainer.append("g").attr("id","ChordTicks").selectAll("g").data(chord.groups).enter().append("g").selectAll("g").data(groupTicks).enter().append("g").attr("transform",function(d){var startAngle=this.parentNode.__data__.startAngle;var endAngle=this.parentNode.__data__.endAngle;var midAngle=startAngle+(endAngle-startAngle)/2;return"rotate("+(midAngle*180/Math.PI-90)+")"+"translate("+config.outerRadius+",0)"});ticks.append("line").call(dex.config.configureLine,config.tick);ticks.append("text").attr("x",config.tick.padding+config.tick.padding/4).attr("dy",".35em").attr("font-size",config.label.font.size).attr("text-anchor",function(d){return d.angle>Math.PI?"end":null}).attr("transform",function(d){return d.angle>Math.PI?"rotate(180)translate(-"+(config.tick.padding*2+config.tick.padding/2)+")":null}).text(function(d){return d.label});chartContainer.append("g").attr("class","chord").selectAll("path").data(chord.chords).enter().append("path").call(dex.config.configureLink,config.links.mouseout).on("mouseover",function(){d3.select(this).call(dex.config.configureLink,config.links.mouseover)}).on("mouseout",function(){d3.select(this).call(dex.config.configureLink,config.links.mouseout)});var chartTitle=chartContainer.append("text").call(dex.config.configureText,config.title,config.title.text);function groupTicks(d){var k=(d.endAngle-d.startAngle)/d.value;return d3.range(0,d.value,1e3).map(function(v,i){return{angle:v*k+d.startAngle,label:chordData.header[d.index]}})}};$(document).ready(function(){});return chart};module.exports=chord},{}],13:[function(require,module,exports){var clusteredforce=function(userConfig){var defaults={parent:null,id:"ClusteredForce","class":"ClusteredForce",height:"100%",width:"100%",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},xi:0,yi:2,transform:"",color:d3.scale.category20(),padding:10,sizingFunction:function(){return d3.scale.linear()},minRadius:1,maxRadius:20,gravity:10,charge:-100,scaleColumns:true,circle:dex.config.circle({r:function(d){return dex.object.isNumeric(d.radius)?d.radius:1},fill:dex.config.fill({fillColor:function(d){return d.color}}),stroke:dex.config.stroke(),tooltip:function(d){return d.text},transform:""})};var chart=new dex.component(userConfig,defaults);chart.render=function(){window.onresize=this.resize;chart.resize()};chart.resize=function(){d3.selectAll("#"+chart.config.id).remove();var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function(){var config=chart.config;var csv=config.csv;var ri,ci,hi;var numericHeaders=dex.csv.getNumericColumnNames(csv);var numericIndices=dex.csv.getNumericIndices(csv);var i;var m=numericHeaders.length,radius=d3.scale.sqrt().range([0,12]);var n=(dex.length-1)*numericHeaders.length;var minValue,maxValue;if(!config.scaleColumns){minValue=dex.matrix.min(csv.data,numericIndices[0]);maxValue=dex.matrix.max(csv.data,numericIndices[0]);for(i=0;i<numericIndices.length;i++){minValue=Math.min(minValue,dex.matrix.min(csv.data,numericIndices[i]));maxValue=Math.max(maxValue,dex.matric.max(csv.data,numericIndices[i]))}}var nodes=[];function scaleNodes(minRadius,maxRadius){var numericScales=[];for(i=0;i<numericIndices.length;i++){if(config.scaleColumns){minValue=dex.matrix.min(csv.data,numericIndices[i]);maxValue=dex.matrix.max(csv.data,numericIndices[i])}numericScales.push(config.sizingFunction().domain([minValue,maxValue]).range([config.minRadius,config.maxRadius]))}if(nodes.length==0){nodes=new Array((csv.data.length-1)*numericIndices.length)}for(ri=0;ri<csv.data.length;ri++){dex.console.debug("RI:",ri,csv.data[ri]);for(ci=0;ci<numericIndices.length;ci++){var label="<table border='1'>";for(hi=0;hi<csv.data[ri].length;hi++){if(hi==numericIndices[ci]){label+="<tr><td><b>"+csv.data[0][hi]+"</b></td><td><b>"+csv.data[ri][hi]+"</b></td></tr>"}else{label+="<tr><td>"+csv.data[0][hi]+"</td><td>"+csv.data[ri][hi]+"</td></tr>"}}label+="</table>";nodes[ri*numericIndices.length+ci]={radius:numericScales[ci](csv.data[ri][numericIndices[ci]]),color:config.color(ci),text:label}}}}scaleNodes(config.minRadius,config.maxRadius);force=d3.layout.force().nodes(nodes).size([config.width,config.height]).gravity(config.gravity/100).charge(config.charge/100).on("tick",tick).start();var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var circle=chartContainer.selectAll("circle").data(nodes).enter().append("circle").call(dex.config.configureCircle,config.circle).call(force.drag);circle.append("text").text(config.circle.tooltip);function tick(e){circle.each(cluster(10*e.alpha*e.alpha)).each(collide(.5)).attr("radius",function(d){return dex.object.isNumeric(d.radius)?d.radius:1}).attr("cx",function(d){return dex.object.isNumeric(d.x)?d.x:0}).attr("cy",function(d){return dex.object.isNumeric(d.y)?d.y:0})}function cluster(alpha){var max={};nodes.forEach(function(d){if(!(d.color in max)||d.radius>max[d.color].radius){max[d.color]=d}});return function(d){var node=max[d.color],l,r,x,y,i=-1;if(node==d)return;x=d.x-node.x;y=d.y-node.y;l=Math.sqrt(x*x+y*y);r=d.radius+node.radius;if(l!=r){l=(l-r)/l*alpha;d.x-=x*=l;d.y-=y*=l;node.x+=x;node.y+=y}}}function collide(alpha){var quadtree=d3.geom.quadtree(nodes);return function(d){var r=d.radius+radius.domain()[1]+config.padding,nx1=d.x-r,nx2=d.x+r,ny1=d.y-r,ny2=d.y+r;quadtree.visit(function(quad,x1,y1,x2,y2){if(quad.point&&quad.point!==d){var x=d.x-quad.point.x,y=d.y-quad.point.y,l=Math.sqrt(x*x+y*y),r=d.radius+quad.point.radius+(d.color!==quad.point.color)*config.padding;if(l<r){l=(l-r)/l*alpha;d.x-=x*=l;d.y-=y*=l;quad.point.x+=x;quad.point.y+=y}}return x1>nx2||x2<nx1||y1>ny2||y2<ny1})}}};$(document).ready(function(){$(chart.config.parent).tooltip({items:"circle",content:function(){return $(this).find("text").text()},track:true})});return chart};module.exports=clusteredforce},{}],14:[function(require,module,exports){var dendrogram=function Dendrogram(userConfig){var defaults={parent:null,id:"Dendrogram","class":"Dendrogram",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},width:"100%",height:"100%",connection:{length:180,style:{stroke:dex.config.stroke()}},transform:"translate(20,0)",root:{name:"ROOT",category:"ROOT"},color:d3.scale.category20(),node:{expanded:{label:dex.config.text({x:8,y:4,"font.weight":"bold","fill.fillColor":"black",text:function(d){return d.name?d.name:d.category}}),circle:dex.config.circle({r:4,fill:{fillColor:"steelblue"}})},collapsed:{label:dex.config.text({x:8,y:4,"font.weight":"bold",text:function(d){return d.name?d.name:d.category}}),circle:dex.config.circle({r:5,fill:{fillColor:"green",fillOpacity:.8}})}},link:dex.config.link({fill:{fillColor:"none"},stroke:dex.config.stroke({color:"green",width:1,opacity:.3,dasharray:"5 5"})})};var chart=new dex.component(userConfig,defaults);chart.render=function render(){var chart=this;window.onresize=chart.resize;chart.resize()};chart.resize=function resize(){dex.console.log("PARENT: '"+chart.config.parent+"'");var width=$(""+chart.config.parent).width();var height=$(""+chart.config.parent).height();dex.console.log("RESIZE: "+width+"x"+height);chart.attr("width",width).attr("height",height).attr("connection.length",width/chart.config.csv.header.length-chart.config.csv.header.length*chart.config.node.expanded.label.font.size).update()};chart.update=function update(){var chart=this;var config=chart.config;var csv=config.csv;var json;d3.selectAll("#"+chart.config.id).remove();if(config.debug){console.log("===== Dendrogram Configuration =====");console.dir(config)}var i=0,root;var tree=d3.layout.tree().size([config.height,config.width]);var diagonal=d3.svg.diagonal().projection(function(d){return[d.y,d.x]});var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);json={name:config.root.name,category:config.root.category,children:dex.csv.toHierarchicalJson(csv)};root=json;root.x0=config.height/2;root.y0=0;function toggleAll(d){if(d.children){d.children.forEach(toggleAll);toggle(d)}else if(d.kids){d.kids.forEach(toggleAll);toggle(d)}}chart.root=json;update(chart.root);function update(source){var duration=d3.event&&d3.event.altKey?5e3:500;var depthY=new Array;var nodes=tree.nodes(root).reverse();var fixedLength=true;if(String(config.connection.length).indexOf(",")>-1){fixedLength=false;depthY=String(config.connection.length).split(",")}nodes.forEach(function(d){if(fixedLength){d.y=d.depth*config.connection.length}else{d.y=+depthY[d.depth]}});var node=chartContainer.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i)});var nodeEnter=node.enter().append("svg:g").attr("class","node").attr("transform",function(d){return"translate("+source.y0+","+source.x0+")"}).on("click",function(d){toggle(d);update(d)});nodeEnter.append("svg:circle").each(function(d){var nodeConfig=d._children?config.node.collapsed.circle:config.node.expanded.circle;d3.select(this).call(dex.config.configureCircle,nodeConfig)}).attr("r",1e-6);nodeEnter.append("text").each(function(d){var nodeConfig=d._children?config.node.collapsed.label:config.node.expanded.label;d3.select(this).call(dex.config.configureText,nodeConfig)}).style("fill-opacity",1e-6);var nodeUpdate=node.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")"});nodeUpdate.selectAll("circle").each(function(d){var nodeConfig=d._children?config.node.collapsed.circle:config.node.expanded.circle;d3.select(this).transition().call(dex.config.configureCircle,nodeConfig)});nodeUpdate.select("text").each(function(d){var nodeConfig=d._children?config.node.collapsed.label:config.node.expanded.label;d3.select(this).call(dex.config.configureText,nodeConfig)}).style("fill-opacity",1);var nodeExit=node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")"}).remove();nodeExit.select("circle").attr("r",1e-6);nodeExit.select("text").style("fill-opacity",1e-6);var link=chartContainer.selectAll("path.link").data(tree.links(nodes),function(d){return d.target.id});link.enter().insert("svg:path","g").attr("class","link").call(dex.config.configureLink,config.link).attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o})}).transition().duration(duration).attr("d",diagonal);link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o})}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y})}function toggle(d){if(d.children){d._children=d.children;d.children=null}else{d.children=d._children;d._children=null}}};$(document).ready(function(){
$(chart.config.parent).draggable()});return chart};module.exports=dendrogram},{}],15:[function(require,module,exports){var force=function(userConfig){var chart;var defaults={parent:"#Force",id:"Force","class":"Force",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",transform:"translate(0 0)",label:dex.config.text({x:8,y:4,"font.size":26,"font.weight":"bold","fill.fillColor":"black"}),link:dex.config.link({"stroke.color":"grey","stroke.dasharray":"2 2","stroke.width":.5,"fill.fillOpacity":.1,transform:""}),linkDistance:60,charge:-300};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var links=[];for(var ci=1;ci<csv.header.length;ci++){for(var ri=0;ri<csv.data.length;ri++){links.push({source:csv.data[ri][ci-1],target:csv.data[ri][ci],group:csv.header[ci]})}}var fill=d3.scale.category20();var nodes={};links.forEach(function(link){link.source=nodes[link.source]||(nodes[link.source]={name:link.source,group:link.group});link.target=nodes[link.target]||(nodes[link.target]={name:link.target,group:link.group})});var width=config.width,height=config.height;var force=d3.layout.force().nodes(d3.values(nodes)).links(links).size([width,height]).linkDistance(config.linkDistance).charge(config.charge).on("tick",tick).start();var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);var link=chartContainer.selectAll(".link").data(force.links()).enter().append("line").attr("class","link").call(dex.config.configureLink,config.link);var node=chartContainer.selectAll(".node").data(force.nodes()).enter().append("g").attr("class","node").on("mouseover",mouseover).on("mouseout",mouseout).call(force.drag);node.append("circle").attr("r",8).style("fill",function(d){return fill(d.group)});node.append("text").attr("x",12).attr("dy",".35em").text(function(d){return d.name}).call(dex.config.configureText,config.label);function tick(){link.attr("x1",function(d){return d.source.x}).attr("y1",function(d){return d.source.y}).attr("x2",function(d){return d.target.x}).attr("y2",function(d){return d.target.y});node.attr("transform",function(d){return"translate("+d.x+","+d.y+")"})}function mouseover(){d3.select(this).select("circle").transition().duration(750).attr("r",16)}function mouseout(){d3.select(this).select("circle").transition().duration(750).attr("r",8)}};$(document).ready(function(){});return chart};module.exports=force},{}],16:[function(require,module,exports){var heatmap=function(userConfig){var defaults={parent:null,id:"HeatMap","class":"HeatMap",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},width:600,height:400,xi:0,yi:1,hi:2,transform:function(d,i){return"translate(180 20)"},heat:{color:d3.scale.category20(),scale:d3.scale.linear().range(["white","red"])},xaxis:dex.config.axis({orient:"bottom",label:dex.config.text()}),yaxis:dex.config.axis({orient:"left",label:dex.config.text()}),rect:dex.config.rectangle({})};var chart=new dex.component(userConfig,defaults);var config=chart.config;var xscale=dex.config.createScale(dex.config.scale(chart.config.xaxis.scale));chart.config.xaxis.scale=xscale;var yscale=dex.config.createScale(dex.config.scale(chart.config.yaxis.scale));chart.config.yaxis.scale=yscale;chart.render=function(){window.onresize=this.resize;chart.resize()};chart.resize=function(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+chart.config.id).remove();if(config.debug){console.log("===== HeatMap Configuration =====");console.dir(config)}var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",dex.config.optionValue(config.transform));var x=config.xaxis.scale.range([0,config.width]),y=config.yaxis.scale.range([config.height,0]);heat=config.heat.scale;var xStep=864e5,yStep=100;var data=csv.data;data.forEach(function(d){d[config.x]=+d[config.xi];d[config.yi]=+d[config.yi];d[config.hi]=+d[config.hi]});x.domain(d3.extent(data,function(d){return d[config.xi]}));y.domain(d3.extent(data,function(d){return d[config.yi]}));heat.domain(d3.extent(data,function(d){return d[config.hi]}));x.domain([x.domain()[0],+x.domain()[1]+xStep]);y.domain([y.domain()[0],y.domain()[1]+yStep]);var rect=chartContainer.selectAll(".tile").data(data).enter().append("rect").attr("class","tile").call(dex.config.configureRectangle,config.rect).attr("x",function(d){return x(d[config.xi])}).attr("y",function(d){return y(d[config.yi]+yStep)}).attr("width",x(xStep)-x(0)).attr("height",y(0)-y(yStep)).style("fill",function(d){return heat(d[config.hi])}).on("mouseover",function(d){if(config.event&&config.event.mouseover){config.event.mouseover(d)}else{}});var xaxis=d3.svg.axis();dex.config.configureAxis(xaxis,config.xaxis);var yaxis=d3.svg.axis();dex.config.configureAxis(yaxis,config.yaxis);chartContainer.append("g").attr("class","x axis").attr("transform","translate(0,"+config.height+")").call(xaxis).append("text").attr("class","label").call(dex.config.configureText,config.xaxis.label);chartContainer.append("g").attr("class","y axis").call(yaxis).append("text").attr("class","label").call(dex.config.configureText,config.yaxis.label)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=heatmap},{}],17:[function(require,module,exports){var horizonchart=function(userConfig){var defaults={parent:"#HorizonChartArea",id:"HorizonChart","class":"DexComponent",csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},margin:{top:2,bottom:0,left:1,right:1},interpolate:"basis",numBands:4,mode:"mirror",bandColors:["#08519c","#bdd7e7","#bae4b3","#006d2c"],width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){window.onresize=this.resize;chart.resize()};chart.resize=function(){d3.selectAll("#"+chart.config.id).remove();var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var ncsv=dex.csv.numericSubset(csv);var ri,ci;var numCharts=ncsv.header.length-1;var chartHeight=(config.height-(config.margin.top+config.margin.bottom)*numCharts)/numCharts;for(ci=1;ci<ncsv.header.length;ci++){var svg=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("width",config.width).attr("height",chartHeight).attr("transform","translate("+config.margin.left+", "+(chartHeight*(ci-1)+config.margin.top*ci+config.margin.bottom*(ci-1))+")");var hchart=d3.horizon(config).width(config.width).height(chartHeight).bands(config.numBands).mode(config.mode).interpolate(config.interpolate);var seriesData=dex.csv.columnSlice(dex.csv.copy(ncsv),[0,ci]);var mean=seriesData.data.reduce(function(prev,cur){return prev+cur[1]},0)/seriesData.data.length;data=seriesData.data.map(function(row){return[row[0],row[1]-mean]});svg.data([data]).call(hchart)}};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};(function(){d3.horizon=function(config){var bands=1,mode="offset",interpolate="linear",x=d3_horizonX,y=d3_horizonY,w=960,h=40,duration=0;var color=d3.scale.linear().domain([-1,0,0,1]).range(config.bandColors);function horizon(g){g.each(function(d,i){var g=d3.select(this),n=2*bands+1,xMin=Infinity,xMax=-Infinity,yMax=-Infinity,x0,y0,id;var data=d.map(function(d,i){var xv=x.call(this,d,i),yv=y.call(this,d,i);if(xv<xMin)xMin=xv;if(xv>xMax)xMax=xv;if(-yv>yMax)yMax=-yv;if(yv>yMax)yMax=yv;return[xv,yv]});var x1=d3.scale.linear().domain([xMin,xMax]).range([0,w]),y1=d3.scale.linear().domain([0,yMax]).range([0,h*bands]),t1=d3_horizonTransform(bands,h,mode);if(this.__chart__){x0=this.__chart__.x;y0=this.__chart__.y;t0=this.__chart__.t;id=this.__chart__.id}else{x0=x1.copy();y0=y1.copy();t0=t1;id=++d3_horizonId}var defs=g.selectAll("defs").data([null]);defs.enter().append("defs").append("clipPath").attr("id","d3_horizon_clip"+id).append("rect").attr("width",w).attr("height",h);defs.select("rect").transition().duration(duration).attr("width",w).attr("height",h);g.selectAll("g").data([null]).enter().append("g").attr("clip-path","url(#d3_horizon_clip"+id+")");var path=g.select("g").selectAll("path").data(d3.range(-1,-bands-1,-1).concat(d3.range(1,bands+1)),Number);var d0=d3_horizonArea.interpolate(interpolate).x(function(d){return x0(d[0])}).y0(h*bands).y1(function(d){return h*bands-y0(d[1])})(data);var d1=d3_horizonArea.x(function(d){return x1(d[0])}).y1(function(d){return h*bands-y1(d[1])})(data);path.enter().append("path").style("fill",color).attr("transform",t0).attr("d",d0);path.transition().duration(duration).style("fill",color).attr("transform",t1).attr("d",d1);path.exit().transition().duration(duration).attr("transform",t1).attr("d",d1).remove();this.__chart__={x:x1,y:y1,t:t1,id:id}});d3.timer.flush()}horizon.duration=function(x){if(!arguments.length)return duration;duration=+x;return horizon};horizon.bands=function(x){if(!arguments.length)return bands;bands=+x;color.domain([-bands,0,0,bands]);return horizon};horizon.mode=function(x){if(!arguments.length)return mode;mode=x+"";return horizon};horizon.colors=function(x){if(!arguments.length)return color.range();color.range(x);return horizon};horizon.interpolate=function(x){if(!arguments.length)return interpolate;interpolate=x+"";return horizon};horizon.x=function(z){if(!arguments.length)return x;x=z;return horizon};horizon.y=function(z){if(!arguments.length)return y;y=z;return horizon};horizon.width=function(x){if(!arguments.length)return w;w=+x;return horizon};horizon.height=function(x){if(!arguments.length)return h;h=+x;return horizon};return horizon};var d3_horizonArea=d3.svg.area(),d3_horizonId=0;function d3_horizonX(d){return d[0]}function d3_horizonY(d){return d[1]}function d3_horizonTransform(bands,h,mode){return mode=="offset"?function(d){return"translate(0,"+(d+(d<0)-bands)*h+")"}:function(d){return(d<0?"scale(1,-1)":"")+"translate(0,"+(d-bands)*h+")"}}})();module.exports=horizonchart},{}],18:[function(require,module,exports){var horizontallegend=function(userConfig){var defaults={parent:null,labels:["A","B","C"],id:"HorizontalLegend","class":"HorizontalLegend",transform:"translate(20,20)",tickLength:25,color:d3.scale.category20c(),caption:dex.config.text({text:"Legend",x:0,y:-6,anchor:"start",font:dex.config.font({size:14,weight:"bold"}),fill:dex.config.fill({fillColor:"black"})}),axis:dex.config.axis({tickSize:25,tickPadding:10,orient:"bottom",tickFormat:function(d){return d},tickLine:dex.config.line({stroke:dex.config.stroke({color:"grey",width:1}),fill:dex.config.fill({fillColor:"none"})}),path:dex.config.path({fill:dex.config.fill({fillColor:"none"}),stroke:dex.config.stroke({color:"grey",width:1})})}),cell:dex.config.rectangle({stroke:dex.config.stroke(),color:d3.scale.category10(),height:20,width:30})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){this.update()};chart.update=function(){var chart=this;var config=chart.config;dex.console.log("HorizontalLegend config:",config);var x=d3.scale.ordinal().domain(config.labels).range(d3.range(config.labels.length).map(function(i){return i*config.cell.width}));var xAxis=dex.config.createAxis(config.axis).scale(x).tickValues(config.labels);var chartContainer=d3.select(config.parent).append("g").attr("class",config["class"]).attr("id",config["id"]).attr("transform",config.transform);chartContainer.selectAll("rect").data(config.labels).enter().append("rect").call(dex.config.configureRectangle,config.cell).attr("x",function(d,i){return x(i)});chartContainer.call(xAxis).append("text").call(dex.config.configureText,config.caption);chartContainer.select("path").call(dex.config.configurePath,config.axis.path);chartContainer.selectAll(".tick line").call(dex.config.configureLine,config.axis.tickLine)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=horizontallegend},{}],19:[function(require,module,exports){var linechart=function(userConfig){var defaults={parent:null,id:"LineChart","class":"LineChart",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},width:600,height:400,xi:0,yi:[1],transform:"",pointColors:d3.scale.category20(),pointLabel:dex.config.text(),lineColors:d3.scale.category20(),xaxis:dex.config.axis({type:"linear",orient:"bottom",axisLabel:dex.config.text(),tickLabel:dex.config.text({dy:25}),tickLine:dex.config.line({"stroke.color":"red","stroke.width":2})}),yaxis:dex.config.axis({type:"linear",orient:"left",axisLabel:dex.config.text(),tickLabel:dex.config.text({dy:6,dx:-10}),tickLine:dex.config.line({"stroke.color":"red","stroke.width":2})})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){this.update()};chart.update=function(){var chart=this;var csv=config.csv;var i;var cfg=dex.config.expandAndOverlay(userConfig,defaults);var xscale=dex.config.createScale(dex.config.scale(cfg.xaxis.scale));chart.config.xaxis.scale=xscale;var yscale=dex.config.createScale(dex.config.scale(cfg.yaxis.scale));chart.config.yaxis.scale=yscale;xscale.domain(d3.extent(config.csv.data,function(d){return+d[config.xi]})).range([0,config.width]);yscale.range([config.height,0]);var xaxis=d3.svg.axis();dex.config.configureAxis(xaxis,config.xaxis);var yaxis=d3.svg.axis();dex.config.configureAxis(yaxis,config.yaxis);var y=yaxis.scale().domain(d3.extent(dex.matrix.flatten(dex.matrix.slice(csv.data,config.yi)))).range([config.height,0]);chart.xaxis=xaxis;chart.yaxis=yaxis;var lines=[];for(i=0;i<config.yi.length;i++){var line=d3.svg.line().x(function(d){return xaxis.scale()(+d[config.xi])}).y(function(d){return yaxis.scale()(+d[config.yi[i]])});lines.push(line)}d3.selectAll("#"+config["id"]).remove();var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var xaxisG=chartContainer.append("g").attr("class","x axis").attr("transform","translate(0,"+config.height+")").call(xaxis);var yaxisG=chartContainer.append("g").attr("class","y axis").call(yaxis);chartContainer.selectAll(".y.axis text").call(dex.config.configureText,config.yaxis.tickLabel);chartContainer.selectAll(".x.axis text").call(dex.config.configureText,config.xaxis.tickLabel);chartContainer.selectAll(".y.axis line").call(dex.config.configureLine,config.yaxis.tickLine);chartContainer.selectAll(".x.axis line").call(dex.config.configureLine,config.xaxis.tickLine);chartContainer.selectAll(".y.axis").append("text").call(dex.config.configureText,config.yaxis.axisLabel);chartContainer.selectAll(".x.axis").append("text").call(dex.config.configureText,config.xaxis.axisLabel);yaxisG.append("text").attr("class","label").call(dex.config.configureText,config.yaxis.tickLabel);xaxisG.append("text").attr("class","label").call(dex.config.configureText,config.xaxis.tickLabel).text(config.xaxis.tickLabel.text);for(i=0;i<lines.length;i++){chartContainer.append("path").datum(csv.data).attr("class","line").attr("d",lines[i]).style("stroke",config.lineColors(i))}var rectalWidth=csv.data.length>1?xaxis.scale()(csv.data[1][config.xi])-xaxis.scale()(csv.data[0][config.xi]):0;chartContainer.selectAll("rect").data(csv.data.map(function(d){return d})).enter().append("rect").attr("class","overlay").attr("transform",function(d,i){return"translate("+xaxis.scale()(d[config.xi])+",0)"}).attr("opacity",0).attr("width",rectalWidth).attr("height",config.height).on("mouseover",function(d){var chartEvent={type:"mouseover",data:d};chart.mouseOverHandler(chartEvent);chart.publish(chartEvent)})};chart.mouseOverHandler=function(chartEvent){var i;var xaxis=chart.xaxis;var yaxis=chart.yaxis;var config=chart.config;if(!config){return}var chartContainer=d3.select("#"+config.id);chartContainer.selectAll("circle").remove();chartContainer.selectAll("#circleLabel").remove();for(i=0;i<config.yi.length;i++){var circle=chartContainer.append("circle").attr("fill",config.pointColors(i)).attr("r",4).attr("cx",xaxis.scale()(chartEvent.data[config.xi])).attr("cy",yaxis.scale()(chartEvent.data[config.yi[i]]));chartContainer.append("text").attr("id","circleLabel").call(dex.config.configureText,config.pointLabel).attr("x",xaxis.scale()(chartEvent.data[config.xi])).attr("y",yaxis.scale()(chartEvent.data[config.yi[i]])-10).text(function(d){if(typeof config.pointLabel==="undefined"||typeof config.pointLabel.format==="undefined"){return chartEvent.data[config.yi[i]]}else{return config.pointLabel.format(chartEvent.data[config.yi[i]])}})}};$(document).ready(function(){});return chart};module.exports=linechart},{}],20:[function(require,module,exports){var motionbarchart=function(userConfig){var defaultColor=d3.scale.category10();var csv={header:["name","color","time","x","y","size"],data:[]};var i=0;for(var time=1800;time<1810;time+=1){for(var color=1;color<4;color++){csv.data.push(["name-"+color,color,time,i*color,i*i*color,i*i*i*color])}i+=1}var color=d3.scale.category20c();var defaults={parent:null,id:"MotionBarhart","class":"MotionBarChart",csv:csv,index:{name:0,color:0,time:1,y:2},width:600,height:400,margin:{top:20,right:100,bottom:100,left:100},bar:dex.config.rectangle({color:function(d,i){return color(i)},"stroke.width":1,"stroke.color":"black",events:{mouseover:function(){d3.select(this).style("stroke","red").style("stroke-width",2)},mouseout:function(){d3.select(this).style("stroke",chart.config.bar.stroke.color).style("stroke-width",chart.config.bar.stroke.width)}}}),"label.font.size":64,"label.fill.fillColor":"steelblue","label.fill.fillOpacity":.4,"label.y":function(d){return 0},"label.x":function(d){return chart.config.width*.5},transform:"translate(0,0)",duration:1e4,xaxis:dex.config.axis({"scale.type":"linear",orient:"bottom",label:dex.config.text({x:function(d){return(chart.config.width-chart.config.margin.right)/2},y:function(d){return chart.config.height-chart.config.margin.bottom+20},anchor:"end"}),"tick.stroke.color":"black","tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"}),yaxis:dex.config.axis({"scale.type":"linear",orient:"left",label:dex.config.text({x:function(d){return 0},y:function(d){return 10},anchor:"end",dy:".75em",transform:"rotate(-90)"}),"tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function render(){window.onresize=this.resize;this.resize()};chart.resize=function resize(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function update(){var chart=this.chart;var config=this.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var keyMap={};csv.data.forEach(function(row){var curName=row[config.index.name];var curColor=row[config.index.color];var curTime=row[config.index.time];var curY=row[config.index.y];var curSize=+row[config.index.size];if(!keyMap[curName]){keyMap[curName]={name:curName,color:curColor,time:curTime,y:[[curTime,curY]],size:[[curTime,curSize]]}}else{keyMap[curName].y.push([curTime,curY]);keyMap[curName].size.push([curTime,curSize])}});var uniques=dex.matrix.uniques(csv.data);var timeExtents=dex.matrix.extent(csv.data,[config.index.time]);var yExtents=dex.matrix.extent(csv.data,[config.index.y]);dex.console.log("EXTENTS: Y",yExtents,"UNIQUES",uniques[config.index.name]);var width=config.width-config.margin.right;var height=config.height-config.margin.top-config.margin.bottom;var xScale=d3.scale.ordinal().domain(uniques[config.index.name]).rangePoints([0,width]);var yScale=dex.config.createScale(config.yaxis.scale).domain([0,yExtents[1]]).range([height,0]);var xAxis=dex.config.createAxis(config.xaxis).scale(xScale);var yAxis=dex.config.createAxis(config.yaxis).scale(yScale);var svg=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);svg.append("g").attr("class","xaxis").attr("transform","translate(0,"+height+")").call(xAxis);svg.append("g").attr("class","yaxis").call(yAxis);var xticks=svg.selectAll(".xaxis .tick");var xtickLines=xticks.selectAll("line").call(dex.config.configureStroke,config.xaxis.tick.stroke).call(dex.config.configureFill,config.xaxis.tick.fill);var yticks=svg.selectAll(".yaxis .tick");var yTickLines=yticks.selectAll("line").call(dex.config.configureStroke,config.yaxis.tick.stroke).call(dex.config.configureFill,config.yaxis.tick.fill);svg.selectAll(".xaxis path").call(dex.config.configureStroke,config.xaxis.axisLine.stroke).call(dex.config.configureFill,config.xaxis.axisLine.fill);svg.selectAll(".yaxis path").call(dex.config.configureStroke,config.yaxis.axisLine.stroke).call(dex.config.configureFill,config.yaxis.axisLine.fill);var xTickLabels=xticks.selectAll("text").style("text-anchor","start");svg.append("text").attr("class","xLabel").call(dex.config.configureText,config.xaxis.label).text(config.csv.header[config.index.name]);svg.append("text").attr("class","yLabel").call(dex.config.configureText,config.yaxis.label).text(config.csv.header[config.index.y]);var label=svg.append("text").attr("class","timeLabel").attr("text-anchor","end").call(dex.config.configureText,config.label).text(timeExtents[0]);var bisect=d3.bisector(function(d){return d[0]});var bars=svg.append("g").attr("class","bars").selectAll(".bar").data(interpolateData(timeExtents[0])).enter().append("rect").attr("class","bar").call(dex.config.configureRectangle,config.bar).call(position);bars.append("tooltip-content").text(function(d,i){return"<table>"+"<tr><td>Name:</td><td>"+d.name+"</td></tr>"+"<tr><td>Category:</td><td>"+d.color+"</td></tr>"+"</table>"});var box=label.node().getBBox();var overlay=svg.append("rect").attr("class","overlay").attr("x",box.x).attr("y",box.y).attr("width",box.width).attr("height",box.height).attr("fill","none").style("pointer-events","all").style("cursor","ew-resize").on("mouseover",enableInteraction);svg.transition().duration(config.duration).ease("linear").tween("year",tweenYear).each("end",enableInteraction);function position(bar){var barWidth=Math.floor((config.width-config.margin.left-config.margin.right)/bar.size());bar.attr("x",function(d,i){return xScale(d.name)}).attr("y",function(d){return yScale(d.y)}).attr("width",function(d){return barWidth}).attr("height",function(d){return yScale(0)-yScale(d.y)})}function enableInteraction(){var yearScale=d3.scale.linear().domain(timeExtents).range([box.x+10,box.x+box.width-10]).clamp(true);svg.transition().duration(0);overlay.on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",mousemove).on("touchmove",mousemove);function mouseover(){label.classed("active",true)}function mouseout(){label.classed("active",false)}function mousemove(){displayYear(yearScale.invert(d3.mouse(this)[0]))}}function tweenYear(){var year=d3.interpolateNumber(timeExtents[0],timeExtents[1]);return function(t){displayYear(year(t))}}function displayYear(year){bars.data(interpolateData(year),function(d){return d.name}).call(position);label.text(Math.round(year))}function interpolateData(year){var timeData=[];for(var name in keyMap){if(keyMap.hasOwnProperty(name)){var entry=keyMap[name];timeData.push({time:year,name:entry.name,color:entry.color,y:interpolateValues(entry.y,year),size:interpolateValues(entry.size,year)})}}return timeData}function interpolateValues(values,year){var i=bisect.left(values,year,0,values.length-1),a=values[i];if(i>0){var b=values[i-1],t=(year-a[0])/(b[0]-a[0]);return a[1]*(1-t)+b[1]*t}return a[1]}};$(document).ready(function(){$(chart.config.parent).tooltip({items:"rect",content:function(){return $(this).find("tooltip-content").text()},track:true});$(chart.config.parent).draggable();$(chart.config.parent).find("rect").draggable()});return chart};module.exports=motionbarchart},{}],21:[function(require,module,exports){var motionchart=function(userConfig){var defaultColor=d3.scale.category10();var csv={header:["name","color","time","x","y","size"],data:[]};var i=0;for(var time=1800;time<1810;time+=1){for(var color=1;color<4;color++){csv.data.push(["name-"+color,color,time,i*color,i*i*color,i*i*i*color])}i+=1}var defaults={parent:null,id:"MotionChart","class":"MotionChart",csv:csv,index:{name:0,time:1,x:2,y:3,color:4,size:5},width:600,height:400,margin:{top:50,right:50,bottom:50,left:100},circle:dex.config.circle({colorscale:d3.scale.category10(),"stroke.width":1,"stroke.color":"black","fill.fillColor":function(d){return chart.config.circle.colorscale(d.name)},"fill.fillOpacity":.4,"sizeScale.type":"linear",events:{mouseover:function(){d3.select(this).style("stroke","red").style("stroke-width",4).style("fill-opacity",1)},mouseout:function(){d3.select(this).style("stroke",chart.config.circle.stroke.color).style("stroke-width",chart.config.circle.stroke.width).style("opacity",chart.config.circle.fill.fillOpacity)}}}),"label.font.size":128,"label.fill.fillColor":"steelblue","label.fill.fillOpacity":.4,"label.y":function(d){return chart.config.height*.5},"label.x":function(d){return chart.config.width*.8},transform:"translate(0,0)",duration:1e4,xaxis:dex.config.axis({"scale.type":"linear",orient:"bottom",label:dex.config.text({x:function(d){return chart.config.width-chart.config.margin.left-chart.config.margin.right},y:function(d){return chart.config.height-chart.config.margin.top-chart.config.margin.bottom-chart.config.xaxis.label.font.size},anchor:"end"}),"tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.fill.fillColor":"none"}),yaxis:dex.config.axis({"scale.type":"linear",orient:"left",label:dex.config.text({x:function(d){return chart.config.width-chart.config.margin.right},y:function(d){return chart.config.height-chart.config.margin.top-chart.config.margin.bottom-chart.config.xaxis.label.font.size}}),"tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.fill.fillColor":"none"})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function render(){window.onresize=this.resize;this.resize()};chart.resize=function resize(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function update(){var chart=this.chart;var config=this.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();if(config.debug){console.log("===== Motion Chart Configuration =====");console.dir(config)}var keyMap={};csv.data.forEach(function(row){var curName=row[config.index.name];var curColor=row[config.index.color];var curTime=row[config.index.time];var curX=row[config.index.x];var curY=row[config.index.y];var curSize=+row[config.index.size];if(!keyMap[curName]){keyMap[curName]={name:curName,color:curColor,time:curTime,x:[[curTime,curX]],y:[[curTime,curY]],size:[[curTime,curSize]]}}else{keyMap[curName].x.push([curTime,curX]);keyMap[curName].y.push([curTime,curY]);keyMap[curName].size.push([curTime,curSize])}});function key(d){return d.name}function color(d){return d.color}function x(d){return d.x}function y(d){return d.y}function radius(d){return d.size}var timeExtents=dex.matrix.extent(csv.data,[config.index.time]);var xExtents=dex.matrix.extent(csv.data,[config.index.x]);var yExtents=dex.matrix.extent(csv.data,[config.index.y]);var sizeExtents=dex.matrix.extent(csv.data,[config.index.size]);var width=config.width-config.margin.right;var height=config.height-config.margin.top-config.margin.bottom;var xScale=dex.config.createScale(config.xaxis.scale).domain(xExtents).range([0,width-60]);var yScale=dex.config.createScale(config.yaxis.scale).domain(yExtents).range([height,60]);var radiusScale=dex.config.createScale(config.circle.sizeScale).domain(sizeExtents).range([2,50]);var xAxis=dex.config.createAxis(config.xaxis).scale(xScale);var yAxis=dex.config.createAxis(config.yaxis).scale(yScale);var svg=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);svg.append("g").attr("class","xaxis").attr("transform","translate(0,"+height+")").call(xAxis);svg.append("g").attr("class","yaxis").call(yAxis);var xticks=svg.selectAll(".xaxis .tick line").call(dex.config.configureStroke,config.xaxis.tick.stroke).call(dex.config.configureFill,config.xaxis.tick.fill);var yticks=svg.selectAll(".yaxis .tick line").call(dex.config.configureStroke,config.yaxis.tick.stroke).call(dex.config.configureFill,config.yaxis.tick.fill);svg.selectAll(".xaxis path").call(dex.config.configureStroke,config.xaxis.axisLine.stroke).call(dex.config.configureFill,config.xaxis.axisLine.fill);svg.selectAll(".yaxis path").call(dex.config.configureStroke,config.yaxis.axisLine.stroke).call(dex.config.configureFill,config.yaxis.axisLine.fill);svg.append("text").attr("class","xLabel").call(dex.config.configureText,config.xaxis.label).text(config.csv.header[config.index.x]);svg.append("text").attr("class","yLabel").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").text(config.csv.header[config.index.y]);var label=svg.append("text").attr("class","timeLabel").attr("text-anchor","end").attr("y",height-24).attr("x",width).call(dex.config.configureText,config.label).text(timeExtents[0]);var bisect=d3.bisector(function(d){return d[0]});var dot=svg.append("g").attr("class","dots").selectAll(".dot").data(interpolateData(timeExtents[0])).enter().append("circle").attr("class","dot").call(dex.config.configureCircle,config.circle).call(position).sort(order);dot.append("tooltip-content").text(function(d){return"<table>"+"<tr><td>Name:</td><td>"+d.name+"</td></tr>"+"<tr><td>Category:</td><td>"+d.color+"</td></tr>"+"<tr><td>Time:</td><td>"+d.time+"</td></tr>"+"<tr><td>X:</td><td>"+d.x+"</td></tr>"+"<tr><td>Y:</td><td>"+d.y+"</td></tr>"+"<tr><td>Size:</td><td>"+d.size+"</td></tr>"+"</table>"});var box=label.node().getBBox();var overlay=svg.append("rect").attr("class","overlay").attr("x",box.x).attr("y",box.y).attr("width",box.width).attr("height",box.height).attr("fill","none").style("pointer-events","all").style("cursor","ew-resize").on("mouseover",enableInteraction);svg.transition().duration(config.duration).ease("linear").tween("year",tweenYear).each("end",enableInteraction);function position(dot){dot.attr("cx",function(d){return xScale(x(d))}).attr("cy",function(d){return yScale(y(d))}).attr("r",function(d){return radiusScale(radius(d))})}function order(a,b){return radius(b)-radius(a)}function enableInteraction(){var yearScale=d3.scale.linear().domain(timeExtents).range([box.x+10,box.x+box.width-10]).clamp(true);svg.transition().duration(0);overlay.on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",mousemove).on("touchmove",mousemove);

function mouseover(){label.classed("active",true)}function mouseout(){label.classed("active",false)}function mousemove(){displayYear(yearScale.invert(d3.mouse(this)[0]))}}function tweenYear(){var year=d3.interpolateNumber(timeExtents[0],timeExtents[1]);return function(t){displayYear(year(t))}}function displayYear(year){dot.data(interpolateData(year),key).call(position).sort(order);label.text(Math.round(year))}function interpolateData(year){var timeData=[];for(var name in keyMap){if(keyMap.hasOwnProperty(name)){var entry=keyMap[name];timeData.push({time:year,name:entry.name,color:entry.color,x:interpolateValues(entry.x,year),y:interpolateValues(entry.y,year),size:interpolateValues(entry.size,year)})}}return timeData}function interpolateValues(values,year){var i=bisect.left(values,year,0,values.length-1),a=values[i];if(i>0){var b=values[i-1],t=(year-a[0])/(b[0]-a[0]);return a[1]*(1-t)+b[1]*t}return a[1]}};$(document).ready(function(){$(document).tooltip({items:"circle",content:function(){return $(this).find("tooltip-content").text()},track:true})});return chart};module.exports=motionchart},{}],22:[function(require,module,exports){var motioncirclechart=function(userConfig){var defaultColor=d3.scale.category10();var csv={header:["name","color","time","x","y","size"],data:[]};var i=0;for(var time=1800;time<1810;time+=1){for(var color=1;color<4;color++){csv.data.push(["name-"+color,color,time,i*color,i*i*color,i*i*i*color])}i+=1}var color=d3.scale.category20c();var defaults={parent:null,id:"MotionCircleChart","class":"MotionCircleChart",csv:csv,index:{name:0,color:1,time:2,y:4},width:600,height:400,margin:{top:20,right:100,bottom:100,left:100},circle:dex.config.circle({"fill.fillColor":function(d,i){return color(i)},"stroke.width":1,"stroke.color":"black",events:{mouseover:function(){d3.select(this).style("stroke","red").style("stroke-width",2)},mouseout:function(){d3.select(this).style("stroke",chart.config.circle.stroke.color).style("stroke-width",chart.config.circle.stroke.width)}}}),"label.font.size":64,"label.fill.fillColor":"steelblue","label.fill.fillOpacity":.4,"label.y":function(d){return 0},"label.x":function(d){return chart.config.width*.5},transform:"translate(0,0)",duration:1e4,xaxis:dex.config.axis({"scale.type":"linear",orient:"bottom",label:dex.config.text({x:function(d){return(chart.config.width-chart.config.margin.right)/2},y:function(d){return chart.config.height-chart.config.margin.bottom+20},anchor:"end"}),"tick.stroke.color":"black","tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"}),yaxis:dex.config.axis({"scale.type":"linear",orient:"left",label:dex.config.text({x:function(d){return 0},y:function(d){return 10},anchor:"end",dy:".75em",transform:"rotate(-90)"}),"tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function render(){window.onresize=this.resize;this.resize()};chart.resize=function resize(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function update(){var chart=this.chart;var config=this.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var keyMap={};csv.data.forEach(function(row){var curName=row[config.index.name];var curColor=row[config.index.color];var curTime=row[config.index.time];var curY=row[config.index.y];var curSize=+row[config.index.size];if(!keyMap[curName]){keyMap[curName]={name:curName,color:curColor,time:curTime,y:[[curTime,curY]],size:[[curTime,curSize]]}}else{keyMap[curName].y.push([curTime,curY]);keyMap[curName].size.push([curTime,curSize])}});var uniques=dex.matrix.uniques(csv.data);var timeExtents=dex.matrix.extent(csv.data,[config.index.time]);var yExtents=dex.matrix.extent(csv.data,[config.index.y]);dex.console.log("EXTENTS: Y",yExtents,"UNIQUES",uniques[config.index.name]);var width=config.width-config.margin.right;var height=config.height-config.margin.top-config.margin.bottom;var xScale=d3.scale.ordinal().domain(uniques[config.index.name]).rangePoints([0,width]);var yScale=dex.config.createScale(config.yaxis.scale).domain([0,yExtents[1]]).range([height,0]);var xAxis=dex.config.createAxis(config.xaxis).scale(xScale);var yAxis=dex.config.createAxis(config.yaxis).scale(yScale);var svg=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);svg.append("g").attr("class","xaxis").attr("transform","translate(0,"+height+")").call(xAxis);svg.append("g").attr("class","yaxis").call(yAxis);var xticks=svg.selectAll(".xaxis .tick");var xtickLines=xticks.selectAll("line").call(dex.config.configureStroke,config.xaxis.tick.stroke).call(dex.config.configureFill,config.xaxis.tick.fill);var yticks=svg.selectAll(".yaxis .tick");var yTickLines=yticks.selectAll("line").call(dex.config.configureStroke,config.yaxis.tick.stroke).call(dex.config.configureFill,config.yaxis.tick.fill);svg.selectAll(".xaxis path").call(dex.config.configureStroke,config.xaxis.axisLine.stroke).call(dex.config.configureFill,config.xaxis.axisLine.fill);svg.selectAll(".yaxis path").call(dex.config.configureStroke,config.yaxis.axisLine.stroke).call(dex.config.configureFill,config.yaxis.axisLine.fill);var xTickLabels=xticks.selectAll("text").style("text-anchor","start");svg.append("text").attr("class","xLabel").call(dex.config.configureText,config.xaxis.label).text(config.csv.header[config.index.name]);svg.append("text").attr("class","yLabel").call(dex.config.configureText,config.yaxis.label).text(config.csv.header[config.index.y]);var label=svg.append("text").attr("class","timeLabel").attr("text-anchor","end").call(dex.config.configureText,config.label).text(timeExtents[0]);var bisect=d3.bisector(function(d){return d[0]});var circles=svg.append("g").attr("class","circles").selectAll(".circle").data(interpolateData(timeExtents[0])).enter().append("circle").attr("class","circle").call(dex.config.configureCircle,config.circle).call(position);circles.append("tooltip-content").text(function(d,i){return"<table>"+"<tr><td>Name:</td><td>"+d.name+"</td></tr>"+"<tr><td>Category:</td><td>"+d.color+"</td></tr>"+"</table>"});var box=label.node().getBBox();var overlay=svg.append("rect").attr("class","overlay").attr("x",box.x).attr("y",box.y).attr("width",box.width).attr("height",box.height).attr("fill","none").style("pointer-events","all").style("cursor","ew-resize").on("mouseover",enableInteraction);svg.transition().duration(config.duration).ease("linear").tween("year",tweenYear).each("end",enableInteraction);function position(circle){var circleRadius=10;circle.attr("cx",function(d,i){return xScale(d.name)}).attr("cy",function(d){return yScale(d.y)}).attr("r",function(d){return 10})}function enableInteraction(){var yearScale=d3.scale.linear().domain(timeExtents).range([box.x+10,box.x+box.width-10]).clamp(true);svg.transition().duration(0);overlay.on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",mousemove).on("touchmove",mousemove);function mouseover(){label.classed("active",true)}function mouseout(){label.classed("active",false)}function mousemove(){displayYear(yearScale.invert(d3.mouse(this)[0]))}}function tweenYear(){var year=d3.interpolateNumber(timeExtents[0],timeExtents[1]);return function(t){displayYear(year(t))}}function displayYear(year){circles.data(interpolateData(year),function(d){return d.name}).call(position);label.text(Math.round(year))}function interpolateData(year){var timeData=[];for(var name in keyMap){if(keyMap.hasOwnProperty(name)){var entry=keyMap[name];timeData.push({time:year,name:entry.name,color:entry.color,y:interpolateValues(entry.y,year),size:interpolateValues(entry.size,year)})}}return timeData}function interpolateValues(values,year){var i=bisect.left(values,year,0,values.length-1),a=values[i];if(i>0){var b=values[i-1],t=(year-a[0])/(b[0]-a[0]);return a[1]*(1-t)+b[1]*t}return a[1]}};$(document).ready(function(){$(chart.config.parent).tooltip({items:"rect",content:function(){return $(this).find("tooltip-content").text()},track:true});$(chart.config.parent).draggable();$(chart.config.parent).find("rect").draggable()});return chart};module.exports=motioncirclechart},{}],23:[function(require,module,exports){var motionlinechart=function(userConfig){var defaultColor=d3.scale.category10();var csv={header:["name","color","time","x","y","size"],data:[]};var i=0;for(var time=1800;time<1810;time+=1){for(var color=1;color<4;color++){csv.data.push(["name-"+color,color,time,i*color,i*i*color,i*i*i*color])}i+=1}var color=d3.scale.category20c();var defaults={parent:null,id:"MotionLineChart","class":"MotionLineChart",csv:csv,index:{name:0,color:1,time:2,y:4},width:600,height:400,margin:{top:20,right:100,bottom:100,left:100},circle:dex.config.path({"fill.fillColor":function(d,i){return color(i)},"stroke.width":1,"stroke.color":"black",events:{mouseover:function(){d3.select(this).style("stroke","red").style("stroke-width",2)},mouseout:function(){d3.select(this).style("stroke",chart.config.circle.stroke.color).style("stroke-width",chart.config.circle.stroke.width)}}}),line:dex.config.line({"stroke.color":"black","stroke.width":1,"fill.fillColor":"none","fill.opacity":0,interpolate:"cardinal"}),"label.font.size":64,"label.fill.fillColor":"steelblue","label.fill.fillOpacity":.4,"label.y":function(d){return 0},"label.x":function(d){return chart.config.width*.5},transform:"translate(0,0)",duration:1e4,xaxis:dex.config.axis({"scale.type":"linear",orient:"bottom",label:dex.config.text({x:function(d){return(chart.config.width-chart.config.margin.right)/2},y:function(d){return chart.config.height-chart.config.margin.bottom+20},anchor:"end"}),"tick.stroke.color":"black","tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"}),yaxis:dex.config.axis({"scale.type":"linear",orient:"left",label:dex.config.text({x:function(d){return 0},y:function(d){return 10},anchor:"end",dy:".75em",transform:"rotate(-90)"}),"tick.stroke.width":1,"tick.fill.fillColor":"none","axisLine.stroke.color":"black","axisLine.stroke.width":1,"axisLine.stroke.dasharray":"10 10","axisLine.fill.fillColor":"none"})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function render(){window.onresize=this.resize;this.resize()};chart.resize=function resize(){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function update(){var chart=this.chart;var config=this.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var keyMap={};csv.data.forEach(function(row){var curName=row[config.index.name];var curColor=row[config.index.color];var curTime=row[config.index.time];var curY=row[config.index.y];var curSize=+row[config.index.size];if(!keyMap[curName]){keyMap[curName]={name:curName,color:curColor,time:curTime,y:[[curTime,curY]],size:[[curTime,curSize]]}}else{keyMap[curName].y.push([curTime,curY]);keyMap[curName].size.push([curTime,curSize])}});var uniques=dex.matrix.uniques(csv.data);var timeExtents=dex.matrix.extent(csv.data,[config.index.time]);var yExtents=dex.matrix.extent(csv.data,[config.index.y]);dex.console.log("EXTENTS: Y",yExtents,"UNIQUES",uniques[config.index.name]);var width=config.width-config.margin.right;var height=config.height-config.margin.top-config.margin.bottom;var xScale=d3.scale.ordinal().domain(uniques[config.index.name]).rangePoints([0,width]);var yScale=dex.config.createScale(config.yaxis.scale).domain([0,yExtents[1]]).range([height,0]);var xAxis=dex.config.createAxis(config.xaxis).scale(xScale);var yAxis=dex.config.createAxis(config.yaxis).scale(yScale);var svg=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);svg.append("g").attr("class","xaxis").attr("transform","translate(0,"+height+")").call(xAxis);svg.append("g").attr("class","yaxis").call(yAxis);var xticks=svg.selectAll(".xaxis .tick");var xtickLines=xticks.selectAll("line").call(dex.config.configureStroke,config.xaxis.tick.stroke).call(dex.config.configureFill,config.xaxis.tick.fill);var yticks=svg.selectAll(".yaxis .tick");var yTickLines=yticks.selectAll("line").call(dex.config.configureStroke,config.yaxis.tick.stroke).call(dex.config.configureFill,config.yaxis.tick.fill);svg.selectAll(".xaxis path").call(dex.config.configureStroke,config.xaxis.axisLine.stroke).call(dex.config.configureFill,config.xaxis.axisLine.fill);svg.selectAll(".yaxis path").call(dex.config.configureStroke,config.yaxis.axisLine.stroke).call(dex.config.configureFill,config.yaxis.axisLine.fill);var xTickLabels=xticks.selectAll("text").style("text-anchor","start");svg.append("text").attr("class","xLabel").call(dex.config.configureText,config.xaxis.label).text(config.csv.header[config.index.name]);svg.append("text").attr("class","yLabel").call(dex.config.configureText,config.yaxis.label).text(config.csv.header[config.index.y]);var label=svg.append("text").attr("class","timeLabel").attr("text-anchor","end").call(dex.config.configureText,config.label).text(timeExtents[0]);var bisect=d3.bisector(function(d){return d[0]});var initialData=interpolateData(timeExtents[0]);var circles=svg.append("g").attr("class","circles").selectAll(".circle").data(initialData).enter().append("circle").attr("class","circle").call(dex.config.configureCircle,config.circle).call(position);dex.console.log("INITIAL DATA:",initialData);var d3line=d3.svg.line();dex.config.configureLine(d3line,config.line);d3line.x(function(d,i){return xScale(d.name)}).y(function(d,i){return yScale(d.y)});var line=svg.selectAll("path.dataline").data([initialData]).enter().append("svg:path").attr("d",d3line);dex.console.log("LINE: ",line);circles.append("tooltip-content").text(function(d,i){return"<table>"+"<tr><td>Name:</td><td>"+d.name+"</td></tr>"+"<tr><td>Category:</td><td>"+d.color+"</td></tr>"+"</table>"});var box=label.node().getBBox();var overlay=svg.append("rect").attr("class","overlay").attr("x",box.x).attr("y",box.y).attr("width",box.width).attr("height",box.height).attr("fill","none").style("pointer-events","all").style("cursor","ew-resize").on("mouseover",enableInteraction);svg.transition().duration(config.duration).ease("linear").tween("year",tweenYear).each("end",enableInteraction);function enableInteraction(){var yearScale=d3.scale.linear().domain(timeExtents).range([box.x+10,box.x+box.width-10]).clamp(true);svg.transition().duration(0);overlay.on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",mousemove).on("touchmove",mousemove);function mouseover(){label.classed("active",true)}function mouseout(){label.classed("active",false)}function mousemove(){displayYear(yearScale.invert(d3.mouse(this)[0]))}}function tweenYear(){var year=d3.interpolateNumber(timeExtents[0],timeExtents[1]);return function(t){displayYear(year(t))}}function position(circle){var circleRadius=10;circle.attr("cx",function(d,i){return xScale(d.name)}).attr("cy",function(d){return yScale(d.y)}).attr("r",function(d){return 10})}function displayYear(year){var yearData=interpolateData(year);circles.data(yearData,function(d){return d.name}).call(position);label.text(Math.round(year));line.data([yearData]).attr("d",d3line).call(dex.config.configurePath,config.line)}function interpolateData(year){var timeData=[];for(var name in keyMap){if(keyMap.hasOwnProperty(name)){var entry=keyMap[name];timeData.push({time:year,name:entry.name,color:entry.color,y:interpolateValues(entry.y,year),size:interpolateValues(entry.size,year)})}}return timeData}function interpolateValues(values,year){var i=bisect.left(values,year,0,values.length-1),a=values[i];if(i>0){var b=values[i-1],t=(year-a[0])/(b[0]-a[0]);return a[1]*(1-t)+b[1]*t}return a[1]}};$(document).ready(function(){$(chart.config.parent).tooltip({items:"rect",content:function(){return $(this).find("tooltip-content").text()},track:true});$(chart.config.parent).draggable();$(chart.config.parent).find("rect").draggable()});return chart};module.exports=motionlinechart},{}],24:[function(require,module,exports){var orbitallayout=function(userConfig){var chart;var defaults={parent:"#ChordDiagram",id:"Chord","class":"Chord",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text(),circles:dex.config.circle(),orbits:dex.config.circle({r:5,fill:{fillColor:"none",fillOpacity:1},stroke:dex.config.stroke({width:1,color:"green",opacity:.5,dasharray:"2 2"})}),refreshFrequencyMs:50,tickRadianStep:.004363323129985824};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var data=dex.csv.toNestedJson(dex.csv.copy(csv));d3.layout.orbit=function(){var currentTickStep=0;var orbitNodes;var orbitSize=[1,1];var nestedNodes;var flattenedNodes=[];var orbitDispatch=d3.dispatch("tick");var tickInterval;var tickRadianStep=config.tickRadianStep;var orbitalRings=[];var orbitDepthAdjust=function(){return 2.95};var childrenAccessor=function(d){return d.children};var tickRadianFunction=function(){return 1};function _orbitLayout(){return _orbitLayout}_orbitLayout.mode=function(){};_orbitLayout.start=function(){tickInterval=setInterval(function(){currentTickStep++;flattenedNodes.forEach(function(_node){if(_node.parent){_node.x=_node.parent.x+_node.parent.ring/2*Math.sin(_node.angle+currentTickStep*config.tickRadianStep*tickRadianFunction(_node));_node.y=_node.parent.y+_node.parent.ring/2*Math.cos(_node.angle+currentTickStep*config.tickRadianStep*tickRadianFunction(_node))}});orbitalRings.forEach(function(_ring){_ring.x=_ring.source.x;_ring.y=_ring.source.y});orbitDispatch.tick()},config.refreshFrequencyMs)};_orbitLayout.stop=function(){clearInterval(tickInterval)};_orbitLayout.speed=function(_degrees){if(!arguments.length)return tickRadianStep/(Math.PI/360);tickRadianStep=tickRadianStep=_degrees*(Math.PI/360);return this};_orbitLayout.size=function(_value){if(!arguments.length)return orbitSize;orbitSize=_value;return this};_orbitLayout.revolution=function(_function){if(!arguments.length)return tickRadianFunction;tickRadianFunction=_function;return this};_orbitLayout.orbitSize=function(_function){if(!arguments.length)return orbitDepthAdjust;orbitDepthAdjust=_function;return this};_orbitLayout.orbitalRings=function(){if(!arguments.length)return orbitalRings;return this};_orbitLayout.nodes=function(_data){if(!arguments.length)return flattenedNodes;nestedNodes=_data;calculateNodes();return this};_orbitLayout.children=function(_function){if(!arguments.length)return childrenAccessor;childrenAccessor=_function;return this};d3.rebind(_orbitLayout,orbitDispatch,"on");return _orbitLayout;function calculateNodes(){var _data=nestedNodes;if(!childrenAccessor(_data)){orbitNodes={key:"root",values:_data};childrenAccessor(orbitNodes).forEach(function(_node){_node.parent=orbitNodes})}else{orbitNodes=_data}orbitNodes.x=orbitSize[0]/2;orbitNodes.y=orbitSize[1]/2;orbitNodes.deltaX=function(_x){return _x};orbitNodes.deltaY=function(_y){return _y};orbitNodes.ring=orbitSize[0]/2;orbitNodes.depth=0;flattenedNodes.push(orbitNodes);traverseNestedData(orbitNodes);function traverseNestedData(_node){if(childrenAccessor(_node)){var thisPie=d3.layout.pie().value(function(d){return childrenAccessor(d)?4:1});var piedValues=thisPie(childrenAccessor(_node));orbitalRings.push({source:_node,x:_node.x,y:_node.y,r:_node.ring/2});for(var x=0;x<childrenAccessor(_node).length;x++){childrenAccessor(_node)[x].angle=(piedValues[x].endAngle-piedValues[x].startAngle)/2+piedValues[x].startAngle;childrenAccessor(_node)[x].parent=_node;childrenAccessor(_node)[x].depth=_node.depth+1;childrenAccessor(_node)[x].x=childrenAccessor(_node)[x].parent.x+childrenAccessor(_node)[x].parent.ring/2*Math.sin(childrenAccessor(_node)[x].angle);childrenAccessor(_node)[x].y=childrenAccessor(_node)[x].parent.y+childrenAccessor(_node)[x].parent.ring/2*Math.cos(childrenAccessor(_node)[x].angle);childrenAccessor(_node)[x].deltaX=function(_x){return _x};childrenAccessor(_node)[x].deltaY=function(_y){return _y};childrenAccessor(_node)[x].ring=childrenAccessor(_node)[x].parent.ring/orbitDepthAdjust(_node);flattenedNodes.push(childrenAccessor(_node)[x]);traverseNestedData(childrenAccessor(_node)[x])}}}}};colors=d3.scale.category20();orbitScale=d3.scale.linear().domain([1,3]).range([3.8,1.5]).clamp(true);radiusScale=d3.scale.linear().domain([0,1,2,3]).range([20,10,3,1]).clamp(true);var minSize=Math.min(config.width,config.height);orbit=d3.layout.orbit().size([minSize,minSize]).children(function(d){return d.children}).revolution(function(d){return d.depth}).orbitSize(function(d){return orbitScale(d.depth)}).speed(.1).nodes(data);var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);chartContainer.selectAll("g.node").data(orbit.nodes()).enter().append("g").attr("class","node").attr("transform",function(d){return"translate("+d.x+","+d.y+")"}).on("mouseover",nodeOver).on("mouseout",nodeOut);var circles=d3.selectAll("g.node").append("circle");circles.call(dex.config.configureCircle,config.circles);circles.attr("r",function(d){return radiusScale(d.depth)}).style("fill",function(d){return colors(d.depth)});chartContainer.selectAll("circle.orbits").data(orbit.orbitalRings()).enter().insert("circle","g").call(dex.config.configureCircle,config.orbits).attr("class","ring").attr("r",function(d){return d.r}).attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y});orbit.on("tick",function(){d3.selectAll("g.node").attr("transform",function(d){return"translate("+d.x+","+d.y+")"});d3.selectAll("circle.ring").attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y})});orbit.start();function nodeOver(d){orbit.stop();d3.select(this).append("text").text(d.name).style("text-anchor","middle").attr("y",35);d3.select(this).select("circle").style("stroke","black").style("stroke-width",3)}function nodeOut(){orbit.start();d3.selectAll("g.node > circle").style("stroke","none").style("stroke-width",0)}};$(document).ready(function(){});return chart};module.exports=orbitallayout},{}],25:[function(require,module,exports){var parallelcoordinates=function(userConfig){var chart;defaults={id:"ParallelCoordinates","class":"ParallelCoordinates",parent:null,width:"100%",height:"100%",resizable:true,color:d3.scale.category20(),title:"Parallel Coordinates",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},rows:0,normalize:false,margin:{left:80,right:60,top:60,bottom:20},axis:{orient:"left"},"axis.line":dex.config.line({stroke:dex.config.stroke({color:function(d,i){return"black"},width:1}),fill:{fillColor:"none",fillOpacity:1}}),"axis.label":dex.config.text({font:{size:function(d,i){var uniques=_.uniq(_.flatten(dex.matrix.slice(chart.config.csv.data,[i])));var maxLabelLength=Math.min((""+_.max(uniques,function(item){return(""+item).length})).length,40);var maxFontSizeByHeight=chart.config.height/(uniques.length?uniques.length:1)-2;var maxFontSizeByWidth=chart.config.width/(chart.config.csv.header.length-1)/maxLabelLength;return Math.min(Math.max(Math.min(maxFontSizeByWidth,maxFontSizeByHeight),4),18)}},anchor:function(d,i){if(i<chart.config.csv.header.length-1){return"end"}else{return"start"}},dx:function(d,i){return-1*Math.max(chart.config.axis.label.font.size(d,i)/2,8)},dy:".35em","fill.fillColor":"black","fill.fillOpacity":1,events:{mouseover:function(d,i){d3.select(this).style("fill","red").style("fill-opacity",1)},mouseout:function(d,i){d3.select(this).style("fill","black").style("fill-opacity",1)}}}),verticalLabel:dex.config.text({dy:function(d,i){return i%2?-chart.config.margin.top*.6:-chart.config.margin.top*.2},"font.size":function(d){var maxFontSizeByHeight=chart.config.margin.top*.5;var maxFontSizeByWidth=(chart.config.width-chart.config.margin.left-chart.config.margin.right)/chart.config.csv.header.length/10;return Math.max(Math.min(maxFontSizeByWidth,maxFontSizeByHeight),4)},anchor:"middle",text:function(d){return d},events:{mouseover:function(d){}}}),"selected.link":{stroke:dex.config.stroke({color:function(d,i){return chart.config.color(i)},width:2}),fill:{fillColor:"none",fillOpacity:1},events:{mouseover:function(){d3.select(this).style("stroke-width",chart.config.selected.link.stroke.width+Math.max(4,chart.config.selected.link.stroke.width/3)).style("stroke-opacity",chart.config.selected.link.stroke.opacity)},mouseout:function(){d3.select(this).style("stroke-width",chart.config.selected.link.stroke.width).style("stroke-opacity",chart.config.selected.link.stroke.opacity)}}},"unselected.link":{stroke:dex.config.stroke({color:function(d,i){return chart.config.color(i)},width:1,dasharray:"10 10"}),fill:{fillColor:"none",fillOpacity:.1}},brush:{width:12,x:-6,opacity:.8,color:"steelblue",stroke:dex.config.stroke({color:"black",width:1})},"ui.config":{}};chart=new dex.component(userConfig,defaults);chart.render=function render(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+chart.config.id).remove();window.onresize=this.resize;chart.resize();var chartContainer;var background;var foreground;var numericColumns=dex.csv.getNumericColumnNames(csv);var jsonData=dex.csv.toJson(csv);var x=d3.scale.ordinal().rangePoints([0,config.width],1);var y={};var line=d3.svg.line();var dimensions;var key;chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var allExtents=[];numericColumns.forEach(function(d){allExtents=allExtents.concat(d3.extent(jsonData,function(p){return+p[d]}))});var normalizedExtent=d3.extent(allExtents);x.domain(dimensions=d3.keys(jsonData[0]).filter(function(d){if(d==="name")return false;if(dex.object.contains(numericColumns,d)){var extent=d3.extent(jsonData,function(p){return+p[d]});if(config.normalize){extent=normalizedExtent}y[d]=d3.scale.linear().domain(extent).range([config.height,0]);allExtents.concat(extent)}else{y[d]=d3.scale.ordinal().domain(jsonData.map(function(p){return p[d]})).rangePoints([config.height,0])}return true}));background=chartContainer.append("g").attr("class","background").selectAll("path").data(jsonData).enter().append("path").call(dex.config.configureLink,config.unselected.link).attr("d",path).attr("id","fillpath");foreground=chartContainer.append("g").attr("class","foreground").selectAll("path").data(jsonData).enter().append("path").attr("d",path).call(dex.config.configureLink,config.selected.link);foreground.append("tooltip-content").text(function(d,i){var info='<table border="1">';for(key in jsonData[i]){info+="<tr><td><b><i>"+key+"</i></b></td><td>"+jsonData[i][key]+"</td></tr>"}return info+"</table>"});function path(d){return line(dimensions.map(function(p){return[x(p),y[p](d[p])]}))}chart.update()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width-chart.config.margin.left-chart.config.margin.right).attr("height",height-chart.config.margin.top-chart.config.margin.bottom).attr("transform","translate("+chart.config.margin.left+","+chart.config.margin.top+")")}};chart.update=function update(){var chart=this;var config=chart.config;var csv=config.csv;var jsonData=dex.csv.toJson(csv);var allExtents=[];var numericColumns=dex.csv.getNumericColumnNames(csv);var x=d3.scale.ordinal().rangePoints([0,config.width],1);var y={};var line=d3.svg.line();numericColumns.forEach(function(d){allExtents=allExtents.concat(d3.extent(jsonData,function(p){return+p[d]}))});var normalizedExtent=d3.extent(allExtents);x.domain(dimensions=d3.keys(jsonData[0]).filter(function(d){if(d==="name")return false;if(dex.object.contains(numericColumns,d)){var extent=d3.extent(jsonData,function(p){return+p[d]});if(config.normalize){extent=normalizedExtent}y[d]=d3.scale.linear().domain(extent).range([config.height,0]);allExtents.concat(extent)}else{y[d]=d3.scale.ordinal().domain(jsonData.map(function(p){return p[d]})).rangePoints([config.height,0])}return true}));function path(d){return line(dimensions.map(function(p){return[x(p),y[p](d[p])]}))}d3.select("g .foreground").selectAll("path").data(jsonData).transition(20).attr("d",path);d3.select("g .foreground").selectAll("path").data(jsonData);d3.select("g .foreground").selectAll("path").data(jsonData).exit().remove();d3.selectAll("g .foreground").selectAll("path").selectAll("tooltip-content").remove();d3.selectAll("g .foreground").selectAll("path").append("tooltip-content").text(function(d,i){var info='<table border="1">';for(key in jsonData[i]){info+="<tr><td><b><i>"+key+"</i></b></td><td>"+jsonData[i][key]+"</td></tr>"}return info+"</table>"});d3.selectAll("g .background").selectAll("path").data(jsonData).transition(20).attr("d",path);d3.selectAll("g .background").selectAll("path").data(jsonData).enter().append("path").call(dex.config.configureLink,config.unselected.link).attr("d",path).attr("id","fillpath");d3.selectAll("g .background").selectAll("path").data(jsonData).exit().remove();chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var dimensions=chartContainer.selectAll(".dimension").data(dimensions).attr("class","dimension").attr("transform",function(d){return"translate("+x(d)+")"});dimensions.enter().append("g").attr("class","dimension").attr("transform",function(d){return"translate("+x(d)+")"});d3.selectAll("g .axis").remove();d3.selectAll("g .brush").remove();dimensions.append("g").attr("class","axis").each(function(d,i){var axisScale=dex.config.createScale(dex.config.scale(config.axis.scale));var axis=d3.svg.axis().scale(axisScale);var myConfig=dex.object.clone(config.axis);if(i==config.csv.header.length-1){myConfig.orient="right";myConfig.label.dx=function(d,i){return Math.max(chart.config.axis.label.font.size(d,i)/2,8)}}dex.config.configureAxis(axis,myConfig,i);d3.select(this).call(axis.scale(y[d]));var tickLabels=d3.select(this).selectAll(".tick").selectAll("text").call(dex.config.configureText,myConfig.label,i)}).append("text").call(dex.config.configureText,config.verticalLabel);dimensions.append("g").attr("class","brush").each(function(d){d3.select(this).call(y[d].brush=d3.svg.brush().y(y[d]).on("brush",brush).on("brushend",brushend))}).selectAll("rect").call(dex.config.configureRectangle,config.brush);d3.selectAll(".domain").call(dex.config.configurePath,config.axis.line);function brush(){var actives=dimensions.filter(function(p){return!y[p].brush.empty()}),extents=actives.map(function(p){return y[p].brush.extent()});foreground.style("display",function(d){return actives.every(function(p,i){if(!dex.object.contains(numericColumns,p)){return extents[i][0]<=y[p](d[p])&&y[p](d[p])<=extents[i][1]}else{return extents[i][0]<=d[p]&&d[p]<=extents[i][1]}})?null:"none"})}function brushend(){var activeData=[];

var i;for(i=0;i<foreground[0].length;i++){if(!(foreground[0][i]["style"]["display"]=="none")){activeData.push(foreground[0][i]["__data__"])}}chart.publish({type:"select",selected:dex.json.toCsv(activeData,dimensions)})}};$(document).ready(function(){$(document).tooltip({items:"path",content:function(){return $(this).find("tooltip-content").text()},track:true})});return chart};module.exports=parallelcoordinates},{}],26:[function(require,module,exports){var piechart=function(userConfig){var chart=new dex.component(userConfig,{parent:"#PieChart",id:"PieChart","class":"PieChart",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},xi:0,yi:2,xoffset:200,yoffset:0,colors:d3.scale.category20(),innerRadius:0,outerRadius:190,radius:200,label:{fontSize:16,textAnchor:"middle"},caption:{text:"",fontSize:24,textAnchor:"middle"}});chart.render=function(){window.onresize=this.resize;chart.resize()};chart.resize=function(){d3.selectAll("#"+chart.config.id).remove();var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).attr("outerRadius",Math.min(width/2,height/2)).attr("transform","translate("+width/2+","+height/2+")").update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var color=d3.scale.ordinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]);var arc=d3.svg.arc().outerRadius(config.outerRadius).innerRadius(config.innerRadius);var pie=d3.layout.pie().sort(null).value(function(d){return d[config.yi]});var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var data=csv.data;data.forEach(function(d){d[config.yi]=+d[config.yi]});var g=chartContainer.selectAll(".arc").data(pie(data,function(d){return d[config.yi]})).enter().append("g").attr("class",function(d){return"arc"});g.append("path").attr("d",arc).style("fill",function(d,i){return config.colors(i)});g.append("text").attr("transform",function(d){return"translate("+arc.centroid(d)+")"}).attr("dy",".35em").style("text-anchor",config.label.textAnchor).style("font-size",config.label.fontSize).text(function(d){return d.data[config.xi]});chartContainer.append("text").attr("y",-config.radius).style("font-size",config.caption.fontSize).style("text-anchor",config.caption.textAnchor).text(config.caption.text)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=piechart},{}],27:[function(require,module,exports){var radarchart=function(userConfig){var chart;var defaults={parent:"#RadarChart",id:"RadarChart","class":"RadarChart",resizable:true,csv:{header:["Salesman","Q1","Q2","Q3","Q4"],data:[["Bob",Math.random(),Math.random(),Math.random(),Math.random()],["Sue",Math.random(),Math.random(),Math.random(),Math.random()],["Joe",Math.random(),Math.random(),Math.random(),Math.random()],["Peg",Math.random(),Math.random(),Math.random(),Math.random()],["Pat",Math.random(),Math.random(),Math.random(),Math.random()],["Jim",Math.random(),Math.random(),Math.random(),Math.random()],["Tim",Math.random(),Math.random(),Math.random(),Math.random()],["Sam",Math.random(),Math.random(),Math.random(),Math.random()]]},width:"100%",height:"100%",transform:"",margin:{top:20,right:20,bottom:20,left:20},wrapWidth:60,levels:5,maxValue:0,labelFactor:1.25,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:false,color:d3.scale.category10(),title:dex.config.text(),label:dex.config.text(),opacityArea:.35,"radar.circle":dex.config.circle({opacity:.1,fill:{fillColor:"#CDCDCD",fillOpacity:.2},stroke:{width:1,color:"black",opacity:.1,dasharray:"0"},events:{mouseover:function(){d3.select(this).style("stroke","red").style("stroke-width",2)},mouseout:function(){d3.select(this).style("stroke",chart.config.radar.circle.stroke.color).style("stroke-width",chart.config.radar.circle.stroke.width)}}})};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();data=csv.data.map(function(row){return{key:row[0],values:row.slice(1).map(function(d,i){return{axis:csv.header[i+1],value:+d}})}});console.dir(data);data=data.map(function(d){return d.values});console.dir(data);var extents=dex.matrix.extent(csv.data,dex.range(1,csv.header.length-1));var maxValue=extents[1];var allAxis=data[0].map(function(i,j){return i.axis}),total=allAxis.length,radius=Math.min((config.width-config.margin.left-config.margin.right)/2,(config.height-config.margin.top-config.margin.bottom)/2),angleSlice=Math.PI*2/total;var rScale=d3.scale.linear().range([0,radius]).domain([0,maxValue]);var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform+"translate("+config.width/2+" "+config.height/2+")");var filter=chartContainer.append("defs").append("filter").attr("id","glow"),feGaussianBlur=filter.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),feMerge=filter.append("feMerge"),feMergeNode_1=feMerge.append("feMergeNode").attr("in","coloredBlur"),feMergeNode_2=feMerge.append("feMergeNode").attr("in","SourceGraphic");var axisGrid=chartContainer.append("g").attr("class","axisWrapper");axisGrid.selectAll(".levels").data(d3.range(1,config.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").call(dex.config.configureCircle,config.radar.circle).attr("r",function(d,i){return radius/config.levels*d});axisGrid.selectAll(".axisLabel").data(d3.range(1,config.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(d){return-d*radius/config.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(function(d,i){return maxValue*d/config.levels});var axis=axisGrid.selectAll(".axis").data(allAxis).enter().append("g").attr("class","axis");axis.append("line").attr("x1",0).attr("y1",0).attr("x2",function(d,i){return rScale(maxValue*1.1)*Math.cos(angleSlice*i)}).attr("y2",function(d,i){return rScale(maxValue*1.1)*Math.sin(angleSlice*i)}).attr("class","line").style("stroke","white").style("stroke-width","2px");axis.append("text").attr("class","legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(d,i){return rScale(maxValue*config.labelFactor)*Math.cos(angleSlice*i-Math.PI/2)}).attr("y",function(d,i){return rScale(maxValue*config.labelFactor)*Math.sin(angleSlice*i-Math.PI/2)}).text(function(d){return d}).call(wrap,config.wrapWidth);var radarLine=d3.svg.line.radial().interpolate("linear-closed").radius(function(d){return rScale(d.value)}).angle(function(d,i){return i*angleSlice});if(config.roundStrokes){radarLine.interpolate("cardinal-closed")}var blobWrapper=chartContainer.selectAll(".radarWrapper").data(data).enter().append("g").attr("class","radarWrapper");blobWrapper.append("path").attr("class","radarArea").attr("d",function(d,i){return radarLine(d)}).style("fill",function(d,i){return config.color(i)}).style("fill-opacity",config.opacityArea).on("mouseover",function(d,i){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1);d3.select(this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",config.opacityArea)});blobWrapper.append("path").attr("class","radarStroke").attr("d",function(d,i){return radarLine(d)}).style("stroke-width",config.strokeWidth+"px").style("stroke",function(d,i){return config.color(i)}).style("fill","none").style("filter","url(#glow)");blobWrapper.selectAll(".radarCircle").data(function(d,i){return d}).enter().append("circle").attr("class","radarCircle").attr("r",config.dotRadius).attr("cx",function(d,i){return rScale(d.value)*Math.cos(angleSlice*i-Math.PI/2)}).attr("cy",function(d,i){return rScale(d.value)*Math.sin(angleSlice*i-Math.PI/2)}).style("fill",function(d,i,j){return config.color(j)}).style("fill-opacity",.8);var blobCircleWrapper=chartContainer.selectAll(".radarCircleWrapper").data(data).enter().append("g").attr("class","radarCircleWrapper");blobCircleWrapper.selectAll(".radarInvisibleCircle").data(function(d,i){return d}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",config.dotRadius*1.5).attr("cx",function(d,i){return rScale(d.value)*Math.cos(angleSlice*i-Math.PI/2)}).attr("cy",function(d,i){return rScale(d.value)*Math.sin(angleSlice*i-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseover",function(d,i){newX=parseFloat(d3.select(this).attr("cx"))-10;newY=parseFloat(d3.select(this).attr("cy"))-10;tooltip.attr("x",newX).attr("y",newY).text(Format(d.value)).transition().duration(200).style("opacity",1)}).on("mouseout",function(){tooltip.transition().duration(200).style("opacity",0)});var tooltip=chartContainer.append("text").attr("class","tooltip").style("opacity",0);function wrap(text,width){text.each(function(){var text=d3.select(this),words=text.text().split(/\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1.4,y=text.attr("y"),x=text.attr("x"),dy=parseFloat(text.attr("dy")),tspan=text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy",dy+"em");while(word=words.pop()){line.push(word);tspan.text(line.join(" "));if(tspan.node().getComputedTextLength()>width){line.pop();tspan.text(line.join(" "));line=[word];tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy",++lineNumber*lineHeight+dy+"em").text(word)}}})}};$(document).ready(function(){});return chart};module.exports=radarchart},{}],28:[function(require,module,exports){var radialtree=function(userConfig){var chart;var defaults={parent:"#RadialTree",id:"RadialTree","class":"RadialTree",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text({font:dex.config.font({family:"sans-serif",size:10})}),connectionLength:80};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var data=dex.csv.toNestedJson(dex.csv.copy(csv));dex.console.log("DATA",csv,data);var diameter=Math.min(config.height,config.width);var margin={top:20,right:60,bottom:20,left:60},width=diameter,height=diameter;var i=0,duration=350,root;var tree=d3.layout.tree().size([360,diameter/2-80]).separation(function(a,b){return(a.parent==b.parent?1:10)/a.depth});var diagonal=d3.svg.diagonal.radial().projection(function(d){return[d.y,d.x/180*Math.PI]});var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform","translate("+diameter/2+","+diameter/2+")");root=data;root.x0=height/2;root.y0=0;update(root);function update(source){var nodes=tree.nodes(root),links=tree.links(nodes);nodes.forEach(function(d){d.y=d.depth*config.connectionLength});var node=chartContainer.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i)});var nodeEnter=node.enter().append("g").attr("class","node").on("click",click);nodeEnter.append("circle").attr("r",1e-6).style("fill",function(d){return d._children?"lightsteelblue":"#fff"});nodeEnter.append("text").attr("x",10).attr("dy",".35em").attr("text-anchor","start").text(function(d){return d.name}).call(dex.config.configureText,config.label);var nodeUpdate=node.transition().duration(duration).attr("transform",function(d){return"rotate("+(d.x-90)+")translate("+d.y+")"});nodeUpdate.select("circle").attr("r",4.5).style("fill",function(d){return d._children?"lightsteelblue":"#fff"});nodeUpdate.select("text").style("fill-opacity",1).attr("transform",function(d){return d.x<180?"translate(0)":"rotate(180)translate(-"+(d.name.length+50)+")"});var nodeExit=node.exit().transition().duration(duration).remove();nodeExit.select("circle").attr("r",1e-6);nodeExit.select("text").style("fill-opacity",1e-6);var link=chartContainer.selectAll("path.link").data(links,function(d){return d.target.id});link.enter().insert("path","g").attr("class","link").attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o})});link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o})}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y})}function click(d){if(d.children){d._children=d.children;d.children=null}else{d.children=d._children;d._children=null}update(d)}function collapse(d){if(d.children){d._children=d.children;d._children.forEach(collapse);d.children=null}}};$(document).ready(function(){});return chart};module.exports=radialtree},{}],29:[function(require,module,exports){var sankey=function(userConfig){var defaultColor=d3.scale.category20c();var defaults={parent:null,id:"Sankey","class":"Sankey",csv:{header:["X","Y","WEIGHT"],data:[["A1","A2",1],["B1","B2",2],["C1","C2",2],["C2","C3",4]]},relationships:null,width:"100%",height:"100%",transform:"translate(5,0) scale(.95)",layoutIterations:32,columnTitle:dex.config.text({"fill.fillColor":"black",x:function(d){var center=window.innerWidth/2;var nodeWidth=userConfig.mouseout&&userConfig.mouseout.node&&userConfig.mouseout.node.rectangle&&userConfig.mouseout.node.rectangle.width?userConfig.mouseout.node.rectangle.width:defaults.mouseout.node.rectangle.width;var nodePadding=userConfig.mouseout&&userConfig.mouseout.node&&userConfig.mouseout.node.padding?userConfig.mouseout.node.padding:defaults.mouseout.node.padding;if(+d>center){return+d+nodeWidth/2}else{return+d+nodeWidth/2}},y:10,writingMode:"tb",glyphOrientationVertical:0,anchor:function(d,i){var center=window.innerWidth/2;if(+d>center){return"start"}else{return"start"}},text:function(d,i){return d+", i"+i}}),label:dex.config.text({"fill.fillColor":"black",x:function(d){var center=window.innerWidth/2;var nodeWidth=userConfig.mouseout&&userConfig.mouseout.node&&userConfig.mouseout.node.rectangle&&userConfig.mouseout.node.rectangle.width?userConfig.mouseout.node.rectangle.width:defaults.mouseout.node.rectangle.width;var nodePadding=userConfig.mouseout&&userConfig.mouseout.node&&userConfig.mouseout.node.padding?userConfig.mouseout.node.padding:defaults.mouseout.node.padding;if(d.x>center){return-nodePadding}else{return nodeWidth+nodePadding}},y:function(d){return d.dy/2},transform:null,dy:".35em",anchor:function(d,i){var center=window.innerWidth/2;if(d.x>center){return"end"}else{return"start"}},font:{size:14},color:"black",opacity:1,text:function(d){return d.name}}),mouseout:{link:{stroke:dex.config.stroke({opacity:.2,color:function(d){return defaultColor(d.category)},width:function(d){return Math.max(1,d.dy)}}),fill:dex.config.fill({fillColor:"none",fillOpacity:.4}),curvature:.5},node:{padding:4,rectangle:dex.config.rectangle({width:32,color:function(d){return defaultColor(d.name.replace(/ .*/,""))},height:function(d){return d.dy},stroke:dex.config.stroke({color:function(d){return d3.rgb(d.color).darker(2)}})})}},mouseover:{link:{stroke:dex.config.stroke({opacity:.8,width:function(d){return Math.max(1,d.dy)},color:function(d){return defaultColor(d.category)}}),fill:dex.config.fill({fillColor:"none",fillOpacity:.8})},node:{stroke:dex.config.stroke({opacity:.8,width:function(d){return Math.max(1,d.dy)},color:function(d){return defaultColor(d.category)}}),fill:dex.config.fill({fillColor:"none",fillOpacity:.8})}},node:{padding:4,rectangle:dex.config.rectangle({width:32,color:function(d){return defaultColor(d.name.replace(/ .*/,""))},height:function(d){return d.dy},stroke:dex.config.stroke({color:function(d){return d3.rgb(d.color).darker(2)}})})},manualColumnLayout:false};var config=dex.object.overlay(dex.config.expand(userConfig),dex.config.expand(defaults));if(!config.relationships){if(config.csv.header.length<3||!dex.csv.isColumnNumeric(config.csv,config.csv.header.length-1)){config.relationships=[];for(i=1;i<config.csv.header.length;i++){config.relationships.push({source:i-1,target:i,value:function(csv,ri){return 1},category:function(csv,ri){return 1},column:function(csv,ri,ci){return i}})}}else{config.relationships=[];for(i=1;i<config.csv.header.length-1;i++){config.relationships.push({source:i-1,target:i,value:function(csv,ri){return csv.data[ri][csv.header.length-1]},category:function(csv,ri){return 1},column:function(csv,ri,ci){return i}})}}}var chart=new dex.component(userConfig,config);chart.renderGui=function(){dex.console.log("SETTINGS",d3.select("#settings").select("#"+chart.config.id).selectAll("#setting"));d3.select("#settings").select("#"+chart.config.id).selectAll("#setting").each(function(d){dex.console.log("SETTING",d)})};chart.render=function(){window.onresize=this.resize;this.update()};chart.resize=function(){var width=window.innerWidth;var height=window.innerHeight;d3.selectAll("#"+config.id).remove();chart.attr("width",width).attr("height",height).update()};chart.update=function(){var config=chart.config;var width=d3.select(config.parent).property("clientWidth");var height=d3.select(config.parent).property("clientHeight");d3.selectAll("#"+config.id).remove();var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("width",config.width).attr("height",config.height).attr("transform",config.transform);var sankeyData=[];var nodeMap={};for(ri=0;ri<config.relationships.length;ri++){for(i=0;i<config.csv.data.length;i++){var relation=[];var source;var target;if(dex.object.isFunction(config.relationships[ri].source)){source=config.relationships[ri].source(config.csv,i)}else{source={nodeName:config.csv.data[i][config.relationships[ri].source],name:config.csv.data[i][config.relationships[ri].source],column:config.relationships[ri].column?config.relationships[ri].column(csv,i,config.relationships[ri].source):config.relationships[ri].source}}if(dex.object.isFunction(config.relationships[ri].target)){target=config.relationships[ri].target(config.csv,i)}else{target={nodeName:config.csv.data[i][config.relationships[ri].target],name:config.csv.data[i][config.relationships[ri].target],column:config.relationships[ri].column?config.relationships[ri].column(csv,i,config.relationships[ri].target):config.relationships[ri].target}}relation.source=source.nodeName;relation.target=target.nodeName;nodeMap[source.nodeName]=source;nodeMap[target.nodeName]=target;if(typeof config.relationships[ri].category==="undefined"){relation.category=1}else if(dex.object.isFunction(config.relationships[ri].category)){relation.category=config.relationships[ri].category(config.csv,i)}else{relation.category=config.relationships[ri].category}relation.linkid="L"+i;if(typeof config.relationships[ri].value==="undefined"){relation.value=1}else if(dex.object.isFunction(config.relationships[ri].value)){relation.value=config.relationships[ri].value(config.csv,i)}else{relation.value=config.relationships[ri].value}sankeyData.push(relation)}}var units="Units";var formatNumber=d3.format(",.0f"),format=function(d){return formatNumber(d)+" "+units};chartContainer.onresize=chart.resize;function manualColumnLayout(nodes,nodeWidth,size){var numSinks=1;nodes.forEach(function(node){node.x=(nodeMap[node.name].column-1)*nodeWidth;numSinks=Math.max(numSinks,node.x);node.dx=nodeWidth});var nodeBreadth=(size[0]-nodeWidth)/(numSinks-1);nodes.forEach(function(node){node.x*=nodeBreadth})}var sankey=d3.sankey().nodeWidth(config.mouseout.node.rectangle.width).nodePadding(config.mouseout.node.padding).size([width-config.mouseout.node.padding,height-config.mouseout.node.padding]);if(config.manualColumnLayout){sankey.columnLayout(manualColumnLayout)}var path=sankey.link();graph={nodes:[],links:[]};sankeyData.forEach(function(d,i){graph.nodes.push({name:d.source});graph.nodes.push({name:d.target});graph.links.push({source:d.source,target:d.target,value:+d.value,category:d.category,linkid:d.linkid})});graph.nodes=d3.keys(d3.nest().key(function(d){return d.name}).map(graph.nodes));graph.links.forEach(function(d,i){graph.links[i].source=graph.nodes.indexOf(graph.links[i].source);graph.links[i].target=graph.nodes.indexOf(graph.links[i].target)});graph.nodes.forEach(function(d,i){graph.nodes[i]={name:d}});sankey.nodes(graph.nodes).links(graph.links).curvature(config.mouseout.link.curvature).layout(config.layoutIterations);var link=chartContainer.append("g").selectAll(".link").data(graph.links).enter().append("path").attr("class","link").attr("id",function(d){return d.linkid}).attr("d",path).call(dex.config.configureLink,config.mouseout.link).sort(function(a,b){return b.dy-a.dy}).on("mouseover",function(d){d3.selectAll("#"+d.linkid).call(dex.config.configureLink,config.mouseover.link)}).on("mouseout",function(d){d3.selectAll("#"+d.linkid).call(dex.config.configureLink,config.mouseout.link)});link.append("tooltip-content").text(function(d){return nodeMap[d.source.name].name+" -> "+nodeMap[d.target.name].name+"\n"+format(d.value)});var node=chartContainer.append("g").selectAll(".node").data(graph.nodes).enter().append("g").attr("class","node").attr("transform",function(d){return"translate("+d.x+","+d.y+")"}).call(d3.behavior.drag().origin(function(d){return d}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",dragmove));node.append("rect").call(dex.config.configureRectangle,config.mouseout.node.rectangle).on("mouseover",function(d){var links=d.sourceLinks.length>0?d.sourceLinks:d.targetLinks;links.forEach(function(link){d3.selectAll("#"+link.linkid).call(dex.config.configureLink,config.mouseover.node)})}).on("mouseout",function(d){var links=d.sourceLinks.length>0?d.sourceLinks:d.targetLinks;links.forEach(function(link){d3.selectAll("#"+link.linkid).call(dex.config.configureLink,config.mouseout.link)})}).append("title").text(function(d){return nodeMap[d.name].name+"\n"+format(d.value)});config.label.text=function(d){return nodeMap[d.name].name};var locations={};var rects=d3.selectAll("rect").each(function(rect){locations[rect.x]=true});var orderedLocations=dex.object.keys(locations).sort(function(a,b){return a-b});var titles=chartContainer.append("g").selectAll("text").data(orderedLocations).enter().append("text").call(dex.config.configureText,config.columnTitle).text(function(d,i){return csv.header[i]});node.append("text").call(dex.config.configureText,config.label);function dragmove(d){d3.select(this).attr("transform","translate("+(d.x=Math.max(0,Math.min(width-d.dx,d3.event.x)))+","+(d.y=Math.max(0,Math.min(height-d.dy,d3.event.y)))+")");sankey.relayout();link.attr("d",path)}};return chart};d3.sankey=function(){var sankey={},nodeWidth=24,nodePadding=8,columnLayout=defaultColumnLayout,curvature=.5,size=[1,1],nodes=[],links=[];sankey.columnLayout=function(_){if(!arguments.length)return columnLayout;columnLayout=_;return sankey};sankey.curvature=function(_){if(!arguments.length)return curvature;curvature=+_;return sankey};sankey.nodeWidth=function(_){if(!arguments.length)return nodeWidth;nodeWidth=+_;return sankey};sankey.nodePadding=function(_){if(!arguments.length)return nodePadding;nodePadding=+_;return sankey};sankey.nodes=function(_){if(!arguments.length)return nodes;nodes=_;return sankey};sankey.links=function(_){if(!arguments.length)return links;links=_;return sankey};sankey.size=function(_){if(!arguments.length)return size;size=_;return sankey};sankey.layout=function(iterations){computeNodeLinks();computeNodeValues();computeNodeBreadths(nodes);computeNodeDepths(iterations);computeLinkDepths();return sankey};sankey.relayout=function(){computeLinkDepths();return sankey};sankey.link=function(){function link(d){var x0=d.source.x+d.source.dx,x1=d.target.x,xi=d3.interpolateNumber(x0,x1),x2=xi(curvature),x3=xi(1-curvature),y0=d.source.y+d.sy+d.dy/2,y1=d.target.y+d.ty+d.dy/2;return"M"+x0+","+y0+"C"+x2+","+y0+" "+x3+","+y1+" "+x1+","+y1}link.curvature=function(_){if(!arguments.length)return curvature;curvature=+_;return link};return link};function computeNodeLinks(){nodes.forEach(function(node){node.sourceLinks=[];node.targetLinks=[]});links.forEach(function(link){var source=link.source,target=link.target;if(typeof source==="number")source=link.source=nodes[link.source];if(typeof target==="number")target=link.target=nodes[link.target];source.sourceLinks.push(link);target.targetLinks.push(link)})}function computeNodeValues(){nodes.forEach(function(node){node.value=Math.max(d3.sum(node.sourceLinks,value),d3.sum(node.targetLinks,value))})}function computeNodeBreadths(){columnLayout(nodes,nodeWidth,size)}function defaultColumnLayout(nodes,nodeWidth,size){var remainingNodes=nodes,visited={},x=0;while(remainingNodes.length){nextNodes=[];visited[remainingNodes[0].name]=true;remainingNodes.forEach(function(node){node.x=x;node.dx=nodeWidth;node.sourceLinks.forEach(function(link){if(!visited[link.target.name]){nextNodes.push(link.target)}else{dex.console.log("CYCLE DETECTED AT: "+node.name+"->"+link.target.name)}})});remainingNodes=nextNodes;++x}moveSinksRight(x);scaleNodeBreadths((size[0]-nodeWidth)/(x-1))}function moveSourcesRight(){nodes.forEach(function(node){if(!node.targetLinks.length){node.x=d3.min(node.sourceLinks,function(d){return d.target.x})-1}})}function moveSinksRight(x){nodes.forEach(function(node){if(!node.sourceLinks.length){node.x=x-1}})}function scaleNodeBreadths(kx){nodes.forEach(function(node){node.x*=kx})}function computeNodeDepths(iterations){var nodesByBreadth=d3.nest().key(function(d){return d.x}).sortKeys(d3.ascending).entries(nodes).map(function(d){return d.values});initializeNodeDepth();resolveCollisions();for(var alpha=1;iterations>0;--iterations){relaxRightToLeft(alpha*=.99);resolveCollisions();relaxLeftToRight(alpha);resolveCollisions()}function initializeNodeDepth(){var ky=d3.min(nodesByBreadth,function(nodes){return(size[1]-(nodes.length-1)*nodePadding)/d3.sum(nodes,value)});nodesByBreadth.forEach(function(nodes){nodes.forEach(function(node,i){node.y=i;node.dy=node.value*ky})});links.forEach(function(link){link.dy=link.value*ky})}function relaxLeftToRight(alpha){nodesByBreadth.forEach(function(nodes,breadth){nodes.forEach(function(node){if(node.targetLinks.length){var y=d3.sum(node.targetLinks,weightedSource)/d3.sum(node.targetLinks,value);node.y+=(y-center(node))*alpha}})});function weightedSource(link){return center(link.source)*link.value}}function relaxRightToLeft(alpha){nodesByBreadth.slice().reverse().forEach(function(nodes){nodes.forEach(function(node){if(node.sourceLinks.length){var y=d3.sum(node.sourceLinks,weightedTarget)/d3.sum(node.sourceLinks,value);node.y+=(y-center(node))*alpha}})});function weightedTarget(link){return center(link.target)*link.value}}function resolveCollisions(){nodesByBreadth.forEach(function(nodes){var node,dy,y0=0,n=nodes.length,i;nodes.sort(ascendingDepth);for(i=0;i<n;++i){node=nodes[i];dy=y0-node.y;if(dy>0)node.y+=dy;y0=node.y+node.dy+nodePadding}dy=y0-nodePadding-size[1];if(dy>0){y0=node.y-=dy;for(i=n-2;i>=0;--i){node=nodes[i];dy=node.y+node.dy+nodePadding-y0;if(dy>0)node.y-=dy;y0=node.y}}})}function ascendingDepth(a,b){return a.y-b.y}}function computeLinkDepths(){nodes.forEach(function(node){node.sourceLinks.sort(ascendingTargetDepth);node.targetLinks.sort(ascendingSourceDepth)});nodes.forEach(function(node){var sy=0,ty=0;node.sourceLinks.forEach(function(link){link.sy=sy;sy+=link.dy});node.targetLinks.forEach(function(link){link.ty=ty;ty+=link.dy})});function ascendingSourceDepth(a,b){return a.source.y-b.source.y}function ascendingTargetDepth(a,b){return a.target.y-b.target.y}}function center(node){return node.y+node.dy/2}function value(link){return link.value}$(document).ready(function(){$(document).tooltip({items:"path",content:function(){return $(this).find("tooltip-content").text()},track:true})});return sankey};module.exports=sankey},{}],30:[function(require,module,exports){var sankeyparticles=function(userConfig){var chart;var defaults={parent:"#SankeyParticles",id:"SankeyParticles","class":"SankeyParticles",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",margin:{top:2,bottom:10,left:2,right:10},transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text()};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};d3.sankey=function(){var sankey={},nodeWidth=24,nodePadding=8,size=[1,1],nodes=[],links=[];sankey.nodeWidth=function(_){if(!arguments.length)return nodeWidth;nodeWidth=+_;return sankey};sankey.nodePadding=function(_){if(!arguments.length)return nodePadding;nodePadding=+_;return sankey};sankey.nodes=function(_){if(!arguments.length)return nodes;nodes=_;return sankey};sankey.links=function(_){if(!arguments.length)return links;links=_;return sankey};sankey.size=function(_){if(!arguments.length)return size;size=_;return sankey};sankey.layout=function(iterations){computeNodeLinks();computeNodeValues();computeNodeBreadths();computeNodeDepths(iterations);computeLinkDepths();return sankey};sankey.relayout=function(){computeLinkDepths();return sankey};sankey.link=function(){var curvature=.5;function link(d){var x0=d.source.x+d.source.dx,x1=d.target.x,xi=d3.interpolateNumber(x0,x1),x2=xi(curvature),x3=xi(1-curvature),y0=d.source.y+d.sy+d.dy/2,y1=d.target.y+d.ty+d.dy/2;return"M"+x0+","+y0+"C"+x2+","+y0+" "+x3+","+y1+" "+x1+","+y1}link.curvature=function(_){if(!arguments.length)return curvature;curvature=+_;return link};return link};function computeNodeLinks(){nodes.forEach(function(node){node.sourceLinks=[];node.targetLinks=[]});links.forEach(function(link){var source=link.source,target=link.target;if(typeof source==="number")source=link.source=nodes[link.source];if(typeof target==="number")target=link.target=nodes[link.target];source.sourceLinks.push(link);target.targetLinks.push(link)})}function computeNodeValues(){nodes.forEach(function(node){node.value=Math.max(d3.sum(node.sourceLinks,value),d3.sum(node.targetLinks,value))})}function computeNodeBreadths(){var remainingNodes=nodes,nextNodes,x=0;while(remainingNodes.length){nextNodes=[];remainingNodes.forEach(function(node){node.x=x;node.dx=nodeWidth;node.sourceLinks.forEach(function(link){if(nextNodes.indexOf(link.target)<0){nextNodes.push(link.target)}})});remainingNodes=nextNodes;++x}moveSinksRight(x);scaleNodeBreadths((size[0]-nodeWidth)/(x-1))}function moveSourcesRight(){nodes.forEach(function(node){if(!node.targetLinks.length){node.x=d3.min(node.sourceLinks,function(d){return d.target.x})-1}})}function moveSinksRight(x){nodes.forEach(function(node){if(!node.sourceLinks.length){node.x=x-1}})}function scaleNodeBreadths(kx){nodes.forEach(function(node){node.x*=kx})}function computeNodeDepths(iterations){
var nodesByBreadth=d3.nest().key(function(d){return d.x}).sortKeys(d3.ascending).entries(nodes).map(function(d){return d.values});initializeNodeDepth();resolveCollisions();for(var alpha=1;iterations>0;--iterations){relaxRightToLeft(alpha*=.99);resolveCollisions();relaxLeftToRight(alpha);resolveCollisions()}function initializeNodeDepth(){var ky=d3.min(nodesByBreadth,function(nodes){return(size[1]-(nodes.length-1)*nodePadding)/d3.sum(nodes,value)});nodesByBreadth.forEach(function(nodes){nodes.forEach(function(node,i){node.y=i;node.dy=node.value*ky})});links.forEach(function(link){link.dy=link.value*ky})}function relaxLeftToRight(alpha){nodesByBreadth.forEach(function(nodes,breadth){nodes.forEach(function(node){if(node.targetLinks.length){var y=d3.sum(node.targetLinks,weightedSource)/d3.sum(node.targetLinks,value);node.y+=(y-center(node))*alpha}})});function weightedSource(link){return center(link.source)*link.value}}function relaxRightToLeft(alpha){nodesByBreadth.slice().reverse().forEach(function(nodes){nodes.forEach(function(node){if(node.sourceLinks.length){var y=d3.sum(node.sourceLinks,weightedTarget)/d3.sum(node.sourceLinks,value);node.y+=(y-center(node))*alpha}})});function weightedTarget(link){return center(link.target)*link.value}}function resolveCollisions(){nodesByBreadth.forEach(function(nodes){var node,dy,y0=0,n=nodes.length,i;nodes.sort(ascendingDepth);for(i=0;i<n;++i){node=nodes[i];dy=y0-node.y;if(dy>0)node.y+=dy;y0=node.y+node.dy+nodePadding}dy=y0-nodePadding-size[1];if(dy>0){y0=node.y-=dy;for(i=n-2;i>=0;--i){node=nodes[i];dy=node.y+node.dy+nodePadding-y0;if(dy>0)node.y-=dy;y0=node.y}}})}function ascendingDepth(a,b){return a.y-b.y}}function computeLinkDepths(){nodes.forEach(function(node){node.sourceLinks.sort(ascendingTargetDepth);node.targetLinks.sort(ascendingSourceDepth)});nodes.forEach(function(node){var sy=0,ty=0;node.sourceLinks.forEach(function(link){link.sy=sy;sy+=link.dy});node.targetLinks.forEach(function(link){link.ty=ty;ty+=link.dy})});function ascendingSourceDepth(a,b){return a.source.y-b.source.y}function ascendingTargetDepth(a,b){return a.target.y-b.target.y}}function center(node){return node.y+node.dy/2}function value(link){return link.value}return sankey};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var data=dex.csv.getGraph(csv);dex.console.log("DATA",data);var margin=config.margin,width=config.width-margin.left-margin.right,height=config.height-margin.top-margin.bottom;var formatNumber=d3.format(",.0f"),format=function(d){return formatNumber(d)+" TWh"},color=d3.scale.category20();var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);var sankey=d3.sankey().nodeWidth(15).nodePadding(10).size([width,height]);var path=sankey.link();var freqCounter=1;data.links.forEach(function(d){d.o_value=d.value;d.value=1});sankey.nodes(data.nodes).links(data.links).layout(32);var link=chartContainer.append("g").selectAll(".link").data(data.links).enter().append("path").attr("class","link").attr("d",path).style("stroke-width",function(d){return Math.max(1,d.dy)}).sort(function(a,b){return b.dy-a.dy});link.append("title").text(function(d){return d.source.name+" → "+d.target.name+"\n"+format(d.o_value)});var node=chartContainer.append("g").selectAll(".node").data(data.nodes).enter().append("g").attr("class","node").attr("transform",function(d){return"translate("+d.x+","+d.y+")"}).call(d3.behavior.drag().origin(function(d){return d}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",dragmove));node.append("rect").attr("height",function(d){return d.dy}).attr("width",sankey.nodeWidth()).style("fill",function(d){return d.color=color(d.name.replace(/ .*/,""))}).style("stroke","none").append("title").text(function(d){return d.name+"\n"+format(d.o_value)});node.append("text").attr("x",-6).attr("y",function(d){return d.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(d){return d.name}).filter(function(d){return d.x<width/2}).attr("x",6+sankey.nodeWidth()).attr("text-anchor","start");function dragmove(d){d3.select(this).attr("transform","translate("+d.x+","+(d.y=Math.max(0,Math.min(height-d.dy,d3.event.y)))+")");sankey.relayout();link.attr("d",path)}var linkExtent=d3.extent(data.links,function(d){return d.o_value});var frequencyScale=d3.scale.linear().domain(linkExtent).range([.05,1]);var particleSize=d3.scale.linear().domain(linkExtent).range([1,5]);data.links.forEach(function(link){link.freq=frequencyScale(link.o_value);link.particleSize=2;link.particleColor=d3.scale.linear().domain([0,1]).range([link.source.color,link.target.color])});var t=d3.timer(tick,1e3);var particles=[];function tick(elapsed,time){particles=particles.filter(function(d){return d.current<d.path.getTotalLength()});d3.selectAll("path.link").each(function(d){for(var x=0;x<2;x++){var offset=(Math.random()-.5)*(d.dy-4);if(Math.random()<d.freq){var length=this.getTotalLength();particles.push({link:d,time:elapsed,offset:offset,path:this,length:length,animateTime:length,speed:.5+Math.random()})}}});particleEdgeCanvasPath(elapsed)}function particleEdgeCanvasPath(elapsed){var context=d3.select("canvas").node().getContext("2d");context.clearRect(0,0,1e3,1e3);context.fillStyle="gray";context.lineWidth="1px";for(var x in particles){var currentTime=elapsed-particles[x].time;particles[x].current=currentTime*.15*particles[x].speed;var currentPos=particles[x].path.getPointAtLength(particles[x].current);context.beginPath();context.fillStyle=particles[x].link.particleColor(0);context.arc(currentPos.x,currentPos.y+particles[x].offset,particles[x].link.particleSize,0,2*Math.PI);context.fill()}}};$(document).ready(function(){});return chart};module.exports=sankeyparticles},{}],31:[function(require,module,exports){var scatterplot=function(userConfig){var chart=new dex.component(userConfig,{parent:"#ScatterPlot",id:"ScatterPlot","class":"ScatterPlot",width:"100%",height:"100%",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},margin:{top:20,right:15,bottom:60,left:60},selectedColor:"red",unselectedColor:"steelblue",unselectedRadius:8,selectedRadius:8,xi:0,yi:1,transform:"scale(.95) translate(60,0)"});chart.render=function(){window.onresize=this.resize;chart.resize()};chart.resize=function(){d3.selectAll("#"+chart.config.id).remove();var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");chart.attr("width",width).attr("height",height).update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;x=d3.scale.linear().domain([0,d3.max(csv.data,function(d){return d[0]})]).range([0,config.width]);y=d3.scale.linear().domain([0,d3.max(csv.data,function(d){return d[1]})]).range([config.height,0]);var chartContainer=d3.select(config.parent).append("g").attr("class",config["class"]).attr("id",config["id"]).attr("transform",config.transform);var xAxis=d3.svg.axis().scale(x).orient("bottom");var brush=d3.svg.brush().x(x).y(y).on("brushstart",function(d){brushstartHandler({})}).on("brush",function(d){brushmoveHandler({})}).on("brushend",function(d){brushendHandler({})});chartContainer.append("g").attr("transform","translate(0,"+config.height+")").attr("class","main axis date").call(xAxis);var yAxis=d3.svg.axis().scale(y).orient("left");chartContainer.append("g").attr("transform","translate(0,0)").attr("class","main axis date").call(yAxis);var g=chartContainer.append("svg:g").attr("id","pointContainer").call(brush);g.selectAll("scatter-dots").data(csv.data).enter().append("svg:circle").attr("id","scatter-dot").attr("cx",function(d){return x(d[config.xi])}).attr("cy",function(d){return y(d[config.yi])}).attr("r",config.unselectedRadius).style("fill",config.unselectedColor).on("mouseover",function(d){mouseOverHandler({node:this,data:d})}).on("mouseout",function(d){mouseOutHandler({node:this,data:d})});function brushstartHandler(chartEvent){d3.selectAll("#scatter-dot").attr("r",config.unselectedRadius).style("fill",config.unselectedColor)}function brushmoveHandler(chartEvent){}function brushendHandler(chartEvent){var extent=brush.extent();var data=[];var active=d3.selectAll("#scatter-dot").filter(function(d,i){if(d[0]>=extent[0][0]&&d[0]<=extent[1][0]&&d[1]>=extent[0][1]&&d[1]<=extent[1][1]){data.push([d[0],d[1]]);return this}return null}).attr("r",config.selectedRadius).style("fill",config.selectedColor);chart.publish({type:"brushend",data:data})}function mouseOverHandler(chartEvent){d3.select(chartEvent.node).style("fill",config.selectedColor).attr("r",config.selectedRadius);d3.select("#pointContainer").append("text").attr("x",x(chartEvent.data[0])).attr("y",y(chartEvent.data[1])-10).attr("dy",".35m").style("font-size",14).attr("text-anchor","top").attr("fill","black").text(function(d){return chartEvent.data[1]})}function mouseOutHandler(chartEvent){d3.select("#pointContainer").selectAll("text").remove();d3.select(chartEvent.node).style("fill",config.unselectedColor).attr("r",config.unselectedRadius)}};$(document).ready(function(){});return chart};module.exports=scatterplot},{}],32:[function(require,module,exports){var sunburst=function(userConfig){var chart;var defaults={parent:"#Sunburst",id:"Sunburst","class":"Sunburst",resizable:true,csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]},width:"100%",height:"100%",transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text()};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var data=dex.csv.toNestedJson(dex.csv.copy(csv));dex.console.log("DATA",csv,data);var width=960,height=700,radius=Math.min(width,height)/2;var x=d3.scale.linear().range([0,2*Math.PI]);var y=d3.scale.linear().range([0,radius]);var color=d3.scale.category20c();var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform","translate("+width/2+","+(height/2+10)+")");var partition=d3.layout.partition().value(function(d){return d.size});var arc=d3.svg.arc().startAngle(function(d){return Math.max(0,Math.min(2*Math.PI,x(d.x)))}).endAngle(function(d){return Math.max(0,Math.min(2*Math.PI,x(d.x+d.dx)))}).innerRadius(function(d){return Math.max(0,y(d.y))}).outerRadius(function(d){return Math.max(0,y(d.y+d.dy))});var root=data;var g=chartContainer.selectAll("g").data(partition.nodes(root)).enter().append("g");var path=g.append("path").attr("d",arc).style("fill",function(d){return color((d.children?d:d.parent).name)}).on("click",click);var text=g.append("text").attr("transform",function(d){dex.console.log("D",d);return"rotate("+computeTextRotation(d)+")"}).attr("x",function(d){return y(d.y)}).attr("dx","6").attr("dy",".35em").text(function(d){return d.name});function click(d){text.transition().attr("opacity",0);path.transition().duration(750).attrTween("d",arcTween(d)).each("end",function(e,i){if(e.x>=d.x&&e.x<d.x+d.dx){var arcText=d3.select(this.parentNode).select("text");arcText.transition().duration(750).attr("opacity",1).attr("transform",function(){return"rotate("+computeTextRotation(e)+")"}).attr("x",function(d){return y(d.y)})}})}d3.select(self.frameElement).style("height",height+"px");function arcTween(d){var xd=d3.interpolate(x.domain(),[d.x,d.x+d.dx]),yd=d3.interpolate(y.domain(),[d.y,1]),yr=d3.interpolate(y.range(),[d.y?20:0,radius]);return function(d,i){return i?function(t){return arc(d)}:function(t){x.domain(xd(t));y.domain(yd(t)).range(yr(t));return arc(d)}}}function computeTextRotation(d){return(x(d.x+d.dx/2)-Math.PI/2)/Math.PI*180}};$(document).ready(function(){});return chart};module.exports=sunburst},{}],33:[function(require,module,exports){var titledtreemap=function(userConfig){var chart;var defaults={parent:"#Treemap",id:"Treemap","class":"Treemap",resizable:true,csv:{header:["NAME","PACAGE","SIZE"],data:[["name1","package1",100],["name2","package2",50],["name3","package3",25]]},width:"100%",height:"100%",transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text()};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var chartWidth=config.width;var chartHeight=config.height;var xscale=d3.scale.linear().range([0,chartWidth]);var yscale=d3.scale.linear().range([0,chartHeight]);var color=d3.scale.category10();var headerHeight=20;var headerColor="#555555";var transitionDuration=500;var root;var node;var treemap=d3.layout.treemap().round(false).size([chartWidth,chartHeight]).sticky(true).value(function(d){return d.size});var chart=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);var data=dex.csv.toNestedJson(csv);node=root=data;var nodes=treemap.nodes(root);var children=nodes.filter(function(d){return!d.children});var parents=nodes.filter(function(d){return d.children});var parentCells=chart.selectAll("g.cell.parent").data(parents,function(d){return"p-"+d.name});var parentEnterTransition=parentCells.enter().append("g").attr("class","cell parent").on("click",function(d){zoom(d)});parentEnterTransition.append("rect").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return d.dy}).style("fill",headerColor);parentEnterTransition.append("foreignObject").attr("class","foreignObject").append("xhtml:body").attr("class","labelbody").append("div").attr("class","label");var parentUpdateTransition=parentCells.transition().duration(transitionDuration);parentUpdateTransition.select(".cell").attr("transform",function(d){return"translate("+d.dx+","+d.y+")"});parentUpdateTransition.select("rect").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return d.dy}).style("fill",headerColor);parentUpdateTransition.select(".foreignObject").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return d.dy}).select(".labelbody .label").text(function(d){return"FOREIGN"+d.name});parentCells.exit().remove();var childrenCells=chart.selectAll("g.cell.child").data(children,function(d){return"c-"+d.name});var childEnterTransition=childrenCells.enter().append("g").attr("class","cell child").on("click",function(d){zoom(node===d.parent?root:d.parent)});childEnterTransition.append("rect").classed("background",true).style("fill",function(d){return color(d.parent.name)});childEnterTransition.append("foreignObject").attr("class","foreignObject").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return Math.max(.01,d.dy)}).append("xhtml:body").attr("class","labelbody").append("div").attr("class","label").text(function(d){return"FO"+d.name});childEnterTransition.selectAll(".foreignObject").style("display","none");var childUpdateTransition=childrenCells.transition().duration(transitionDuration);childUpdateTransition.select(".cell").attr("transform",function(d){return"translate("+d.x+","+d.y+")"});childUpdateTransition.select("rect").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return d.dy}).style("fill",function(d){return color(d.parent.name)});childUpdateTransition.select(".foreignObject").attr("width",function(d){return Math.max(.01,d.dx)}).attr("height",function(d){return Math.max(.01,d.dy)}).select(".labelbody .label").text(function(d){return"FO2"+d.name});childrenCells.exit().remove();d3.select("select").on("change",function(){console.log("select zoom(node)");treemap.value(this.value=="size"?size:count).nodes(root);zoom(node)});zoom(node);function size(d){return d.size}function count(d){return 1}function textHeight(d){var ky=chartHeight/d.dy;yscale.domain([d.y,d.y+d.dy]);return ky*d.dy/headerHeight}function getRGBComponents(color){var r=color.substring(1,3);var g=color.substring(3,5);var b=color.substring(5,7);return{R:parseInt(r,16),G:parseInt(g,16),B:parseInt(b,16)}}function idealTextColor(bgColor){var nThreshold=105;var components=getRGBComponents(bgColor);var bgDelta=components.R*.299+components.G*.587+components.B*.114;return 255-bgDelta<nThreshold?"#000000":"#ffffff"}function zoom(d){treemap.padding([headerHeight/(chartHeight/d.dy),4,4,4]).nodes(d);var kx=chartWidth/d.dx;var ky=chartHeight/d.dy;var level=d;xscale.domain([d.x,d.x+d.dx]);yscale.domain([d.y,d.y+d.dy]);if(node!=level){chart.selectAll(".cell.child .foreignObject").style("display","none")}var zoomTransition=chart.selectAll("g.cell").transition().duration(transitionDuration).attr("transform",function(d){return"translate("+xscale(d.x)+","+yscale(d.y)+")"}).each("end",function(d,i){if(!i&&level!==self.root){chart.selectAll(".cell.child").filter(function(d){return d.parent===self.node}).select(".foreignObject .labelbody .label").style("color",function(d){return idealTextColor(color(d.parent.name))});chart.selectAll(".cell.child").filter(function(d){return d.parent===self.node}).select(".foreignObject").style("display","")}});zoomTransition.select(".foreignObject").attr("width",function(d){return Math.max(.01,kx*d.dx)}).attr("height",function(d){return d.children?ky*d.dy:Math.max(.01,ky*d.dy)}).select(".labelbody .label").text(function(d){dex.console.log("D",d);return d.name});zoomTransition.select("rect").attr("width",function(d){return Math.max(.01,kx*d.dx)}).attr("height",function(d){return d.children?ky*d.dy:Math.max(.01,ky*d.dy)}).style("fill",function(d){return d.children?headerColor:color(d.parent.name)});node=d;if(d3.event){d3.event.stopPropagation()}}};$(document).ready(function(){});return chart};module.exports=titledtreemap},{}],34:[function(require,module,exports){var treemap=function(userConfig){var chart;var defaults={parent:"#Treemap",id:"Treemap","class":"Treemap",resizable:true,csv:{header:["NAME","PACAGE","SIZE"],data:[["name1","package1",100],["name2","package2",50],["name3","package3",25]]},width:"100%",height:"100%",transform:"translate(0 0)",title:dex.config.text(),label:dex.config.text()};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var chartContainer=d3.select(config.parent).append("g").attr("class",config["id"]).attr("id",config["id"]).attr("transform",config.transform);var w=1280-80,h=800-180,x=d3.scale.linear().range([0,w]),y=d3.scale.linear().range([0,h]),color=d3.scale.category20c(),root,node;var treemap=d3.layout.treemap().round(false).size([w,h]).sticky(true).value(function(d){return d.size});var data=dex.csv.toNestedJson(dex.csv.copy(csv));dex.console.log("DATA",csv,data);node=root=data;var nodes=treemap.nodes(root).filter(function(d){return!d.children});var cell=chartContainer.selectAll("g").data(nodes).enter().append("svg:g").attr("class","cell").attr("transform",function(d){return"translate("+d.x+","+d.y+")"}).on("click",function(d){return zoom(node==d.parent?root:d.parent)});cell.append("svg:rect").attr("width",function(d){return d.dx-1}).attr("height",function(d){return d.dy-1}).style("fill",function(d){return color(d.parent.name)});cell.append("svg:text").attr("x",function(d){return d.dx/2}).attr("y",function(d){return d.dy/2}).attr("dy",".35em").attr("text-anchor","middle").text(function(d){return d.name}).style("opacity",function(d){d.w=this.getComputedTextLength();return d.dx>d.w?1:0});d3.select(window).on("click",function(){zoom(root)});d3.select("select").on("change",function(){treemap.value(this.value=="size"?size:count).nodes(root);zoom(node)});function size(d){return d.size}function count(d){return 1}function zoom(d){var kx=w/d.dx,ky=h/d.dy;x.domain([d.x,d.x+d.dx]);y.domain([d.y,d.y+d.dy]);var t=chartContainer.selectAll("g.cell").transition().duration(d3.event.altKey?7500:750).attr("transform",function(d){return"translate("+x(d.x)+","+y(d.y)+")"});t.select("rect").attr("width",function(d){return kx*d.dx-1}).attr("height",function(d){return ky*d.dy-1});t.select("text").attr("x",function(d){return kx*d.dx/2}).attr("y",function(d){return ky*d.dy/2}).style("opacity",function(d){return kx*d.dx>d.w?1:0});node=d;d3.event.stopPropagation()}};$(document).ready(function(){});return chart};module.exports=treemap},{}],35:[function(require,module,exports){var verticallegend=function(userConfig){var defaults={labels:["A","B","C"],id:"VerticalLegend","class":"VerticalLegend",resizeable:false,parent:null,height:250,width:250,tickLength:5,caption:"Legend",captionFontSize:14,captionXOffset:-30,captionYOffset:-20,margin:{top:10,bottom:10,left:20,right:10},cell:{"appearance.mouseover.rect.width":35,"appearance.mouseout.rect.width":30,"appearance.mousedown.rect.width":50,"appearance.mouseup.rect.width":35,rect:dex.config.rectangle({width:30,height:20,y:function(d){return chart.config.yscale(d)},x:function(d){return chart.config.width/10},events:{mouseover:function(d,i){dex.console.log("mouseover event(d="+d+", i="+i+")");d3.select(this).call(dex.config.configureRectangle,chart.config.cell.appearance.mouseover.rect);chart.publish({type:"mouseover",d:d})},mouseout:function(d){dex.console.log("mouseout event(d="+d+", i="+i+")");d3.select(this).call(dex.config.configureRectangle,chart.config.cell.appearance.mouseout.rect);chart.publish({type:"mouseout",d:d})},mousedown:function(d){dex.console.log("mousedown event(d="+d+", i="+i+")");d3.select(this).call(dex.config.configureRectangle,chart.config.cell.appearance.mousedown.rect);chart.publish({type:"mousedown",d:d})},mouseup:function(d){dex.console.log("mouseup event(d="+d+", i="+i+")");d3.select(this).call(dex.config.configureRectangle,chart.config.cell.appearance.mouseup.rect);chart.publish({type:"mouseup",d:d})}}}),label:dex.config.text({text:function(d){return d},"font.scale":function(d){dex.console.log("FONT.SCALE: width="+chart.config.width+"x"+chart.config.height);var scale=d3.scale.linear().domain([0,150]).range([0,32]);return scale},"font.weight":"bold","font.size":function(d){dex.console.log("FONT-SIZE: width="+chart.config.width+", height="+chart.config.height+", fontScale="+chart.config.cell.label.font.scale()(chart.config.width*.2));return chart.config.cell.label.font.scale()(chart.config.width*.2)},anchor:"end",y:function(d){return chart.config.yscale(d)},dx:function(d,i){dex.console.log("dx",chart.config.cell.label.font.size(d));return-1*chart.config.cell.label.font.size(d)/2},dy:function(d,i){return 0},fill:dex.config.fill({fillColor:"black"})})},title:dex.config.text({text:"title.text",anchor:"middle","font.scale":function(d){dex.console.log("TITLE.FONT.SCALE: width="+chart.config.width+"x"+chart.config.height);var scale=d3.scale.linear().domain([0,200]).range([4,64]);return scale},"font.size":function(d){dex.console.log("TITLE-FONT-SIZE: width="+chart.config.width+", height="+chart.config.height+", fontScale="+chart.config.cell.label.font.scale()(Math.min(chart.config.width,chart.config.height)/5));return chart.config.title.font.scale()(Math.min(chart.config.width,chart.config.height)*.2)},y:function(d){return chart.config.height/12},x:function(d){return chart.config.width/10+chart.config.cell.rect.width/2}})};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizeable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");var cellWidth=width*.4;var cellHeight=height*.8/(chart.config.labels.length+1);dex.console.log("Resizing VerticalLegend: "+width+"x"+height);chart.attr("width",width).attr("height",height).attr("cell.rect.width",cellWidth).attr("cell.rect.height",cellHeight).attr("margin.top",height*.1).attr("margin.bottom",height*.1).attr("margin.left",width*.1).attr("margin.right",width*.1).attr("cell.appearance.mouseover.rect.width",cellWidth*1.1).attr("cell.appearance.mouseout.rect.width",cellWidth).attr("cell.appearance.mousedown.rect.width",cellWidth*1.2).attr("cell.appearance.mouseup.rect.width",cellWidth*1.1).attr("cell.label.dx",width*.4).attr("cell.rect.x",width*.5).attr("title.y",height*.08).attr("title.x",width*.4+cellWidth/2).attr("cell.label.x",width*.1).update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=this.config;dex.console.log("RESIZE");dex.console.log(config.id+": "+config.width+"x"+config.height);d3.selectAll("#"+config.id).remove();config.yscale=d3.scale.ordinal().domain(config.labels).rangeBands([config.margin.top,config.height-config.margin.bottom]);var chartContainer=d3.select(config.parent).append("g").attr("id",config["id"]).attr("class",config["class"]).attr("transform",config.transform);var rects=chartContainer.selectAll("rect").data(config.labels).enter().append("rect").call(dex.config.configureRectangle,config.cell.rect);chartContainer.selectAll("label").data(config.labels).enter().append("text").call(dex.config.configureText,config.cell.label);chartContainer.append("text").call(dex.config.configureText,config.title).text(config.title.text)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=verticallegend},{}],36:[function(require,module,exports){var d3={};d3.Axis=require("./Axis");d3.BarChart=require("./BarChart");d3.Chord=require("./Chord");d3.ClusteredForce=require("./ClusteredForce");d3.Dendrogram=require("./Dendrogram");d3.Force=require("./Force");d3.HeatMap=require("./HeatMap");d3.HorizonChart=require("./HorizonChart");d3.HorizontalLegend=require("./HorizontalLegend");d3.LineChart=require("./LineChart");d3.MotionBarChart=require("./MotionBarChart");d3.MotionChart=require("./MotionChart");d3.MotionCircleChart=require("./MotionCircleChart");d3.MotionLineChart=require("./MotionLineChart");d3.OrbitalLayout=require("./OrbitalLayout");d3.ParallelCoordinates=require("./ParallelCoordinates");d3.PieChart=require("./PieChart");d3.RadarChart=require("./RadarChart");d3.RadialTree=require("./RadialTree");d3.Sankey=require("./Sankey");d3.SankeyParticles=require("./SankeyParticles");d3.ScatterPlot=require("./ScatterPlot");d3.Sunburst=require("./Sunburst");d3.TitledTreemap=require("./TitledTreemap");d3.Treemap=require("./Treemap");d3.VerticalLegend=require("./VerticalLegend");module.exports=d3},{"./Axis":10,"./BarChart":11,"./Chord":12,"./ClusteredForce":13,"./Dendrogram":14,"./Force":15,"./HeatMap":16,"./HorizonChart":17,"./HorizontalLegend":18,"./LineChart":19,"./MotionBarChart":20,"./MotionChart":21,"./MotionCircleChart":22,"./MotionLineChart":23,"./OrbitalLayout":24,"./ParallelCoordinates":25,"./PieChart":26,"./RadarChart":27,"./RadialTree":28,"./Sankey":29,"./SankeyParticles":30,"./ScatterPlot":31,"./Sunburst":32,"./TitledTreemap":33,"./Treemap":34,"./VerticalLegend":35}],37:[function(require,module,exports){var network=function(userConfig){var chart;var defaults={parent:"#RingNetwork",id:"RingNetwork","class":"RingNetwork",resizable:true,csv:{header:["NAME","GENDER","VEHICLE"],data:[["JIM","M","CAR"],["JOE","M","CAR"],["PAT","M","TRUCK"],["SALLY","F","TRUCK"]]},connect:"first",type:"rings",width:"100%",height:"100%",transform:"translate(0 0)"};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizable){var width=d3.select(chart.config.parent).property("clientWidth");var height=d3.select(chart.config.parent).property("clientHeight");dex.console.log(chart.config.id+": resize("+width+","+height+")");chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var connections=[];if(config.connect=="first"){for(var ri=0;ri<csv.data.length;ri++){for(var ci=1;ci<csv.header.length;ci++){connections.push({source:csv.data[ri][0],target:csv.data[ri][ci]})}}}else{for(var ri=0;ri<csv.data.length;ri++){for(var ci=1;ci<csv.header.length;ci++){connections.push({source:csv.data[ri][ci-1],target:csv.data[ri][ci]})}connections.push({source:csv.data[ri][csv.header.length-1],target:csv.data[ri][0]})}}var viz=d3plus.viz().container(config.parent).type(config.type).edges(connections);if(config.edges){viz.edges(config.edges)}if(config.focus){viz.focus(config.focus)}viz.draw()};$(document).ready(function(){});return chart};module.exports=network},{}],38:[function(require,module,exports){var d3plus={};d3plus.Network=require("./Network");module.exports=d3plus},{"./Network":37}],39:[function(require,module,exports){var linechart=function(userConfig){var defaults={parent:null,id:"DygraphsLineChart","class":"DygraphsLineChart",csv:{header:["X","Y"],data:[[0,0],[1,1],[2,4],[3,9],[4,16]]},width:600,height:400,transform:"",options:{}};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){this.update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var csvIndices=dex.range(0,csv.header.length);dex.console.trace("CSV INDICES: ",csvIndices);var csvData=csvIndices.map(function(i){return csv.header[i]}).join(",")+"\n";csvData+=config.csv.data.map(function(row){return csvIndices.map(function(i){return row[i]}).join(",")}).join("\n")+"\n";d3.selectAll(config.id).remove();g=new Dygraph(document.getElementById(config.parent.substring(1)),csvData,config.options)};$(document).ready(function(){});return chart};module.exports=linechart},{}],40:[function(require,module,exports){var dygraphs={};dygraphs.LineChart=require("./LineChart");module.exports=dygraphs},{"./LineChart":39}],41:[function(require,module,exports){var diffbarchart=function(userConfig){var defaults={parent:null,id:"PieChart","class":"PieChart",csv:{header:["Category","Major","Degrees"],data:[["old","Business",256070],["old","Education",108034],["old","Social Sciences & History",127101],["old","Health",81863],["old","Psychology",74194],["new","Business",358293],["new","Education",101265],["new","Social Sciences & History",172780],["new","Health",129634],["new","Psychology",97216]]},resizeable:true,diff:{compare:"Category",compareGroups:["old","new"]},options:{bars:"horizontal","hAxis.viewWindowMode":"maximized","vAxis.viewWindowMode":"maximized","chartArea.width":function(){return chart.config.width*.8},"chartArea.height":function(){return chart.config.height*.8}}};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.attr("options.chart.title","title").attr("options.chart.subtitle","subtitle").attr("options.colors",["steelblue","red","blue","green","orange","purple","grey","brown","cyan","magenta"]);chart.resize();

};chart.resize=function resize(){if(chart.config.resizeable){var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetElt=document.getElementById(target);var width=targetElt.clientWidth;var height=targetElt.clientHeight;dex.console.log("google.DiffPieChart Resize: "+width+"x"+height);chart.attr("width",width).attr("height",height).update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=chart.config;var beforeData=[dex.array.copy(config.csv.header)];var afterData=[dex.array.copy(config.csv.header)];var groupIndex=config.csv.header.indexOf(config.diff.category);if(groupIndex<0){return}config.csv.data.forEach(function(row){if(row[groupIndex]==config.diff.compareGroups[0]){beforeData.push(dex.array.copy(row))}else if(row[groupIndex]==config.diff.compareGroups[1]){afterData.push(dex.array.copy(row))}});beforeData.forEach(function(row){row.splice(groupIndex,1)});afterData.forEach(function(row){row.splice(groupIndex,1)});dex.console.log("csv",config.csv,"before",beforeData,"after",afterData);var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetNode=document.getElementById(target);while(targetNode.firstChild){targetNode.removeChild(targetNode.firstChild)}var beforeDataTable=google.visualization.arrayToDataTable(beforeData);var afterDataTable=google.visualization.arrayToDataTable(afterData);var diffChart=new google.visualization.BarChart(targetNode);var diffDataTable=diffChart.computeDiff(beforeDataTable,afterDataTable);diffChart.draw(diffDataTable,config.options)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=diffbarchart},{}],42:[function(require,module,exports){var diffpiechart=function(userConfig){var defaults={parent:null,id:"PieChart","class":"PieChart",csv:{header:["Category","Major","Degrees"],data:[["old","Business",256070],["old","Education",108034],["old","Social Sciences & History",127101],["old","Health",81863],["old","Psychology",74194],["new","Business",358293],["new","Education",101265],["new","Social Sciences & History",172780],["new","Health",129634],["new","Psychology",97216]]},resizeable:true,diff:{compare:"Category",compareGroups:["old","new"]},options:{title:"default title","legend.position":"bottom"}};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizeable){var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetElt=document.getElementById(target);var width=targetElt.clientWidth;var height=targetElt.clientHeight;dex.console.log("google.DiffPieChart Resize: "+width+"x"+height);chart.attr("width",width).attr("height",height).attr("options.chartArea.width",width*.8).attr("options.chartArea.height",height*.8).update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=chart.config;var oldData=[dex.array.copy(config.csv.header)];var newData=[dex.array.copy(config.csv.header)];var groupIndex=config.csv.header.indexOf(config.diff.category);if(groupIndex<0){return}config.csv.data.forEach(function(row){if(row[groupIndex]==config.diff.compareGroups[0]){oldData.push(dex.array.copy(row))}else if(row[groupIndex]==config.diff.compareGroups[1]){newData.push(dex.array.copy(row))}});newData.forEach(function(row){row.splice(groupIndex,1)});oldData.forEach(function(row){row.splice(groupIndex,1)});dex.console.log("csv",config.csv,"old",oldData,"new",newData);var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetNode=document.getElementById(target);while(targetNode.firstChild){targetNode.removeChild(targetNode.firstChild)}var oldDataTable=google.visualization.arrayToDataTable(oldData);var newDataTable=google.visualization.arrayToDataTable(newData);var diffChart=new google.visualization.PieChart(targetNode);var diffDataTable=diffChart.computeDiff(oldDataTable,newDataTable);diffChart.draw(diffDataTable,config.options)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=diffpiechart},{}],43:[function(require,module,exports){var piechart=function(userConfig){var defaults={parent:null,id:"PieChart","class":"PieChart",csv:{header:["Task","Hours per Day"],data:[["Work",8],["Eat",2],["Watch TV",1],["Sleep",7],["Chores",2],["Code",4]]},resizeable:true,title:"title",options:{}};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizeable){var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetNode=document.getElementById(target);while(targetNode.firstChild){targetNode.removeChild(targetNode.firstChild)}var width=targetNode.clientWidth;var height=targetNode.clientHeight;chart.update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=chart.config;var data=dex.matrix.copy(config.csv.data);data.unshift(dex.array.copy(config.csv.header));dex.console.log("google.PieChart Data:",data,"Options",config.options);var dataTable=google.visualization.arrayToDataTable(data);var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var chart=new google.visualization.PieChart(document.getElementById(target));chart.draw(dataTable,config.options)};$(document).ready(function(){$(chart.config.parent).draggable().zIndex(0)});return chart};module.exports=piechart},{}],44:[function(require,module,exports){var timeline=function(userConfig){var defaults={parent:null,id:"Timeline","class":"Timeline",csv:{header:["President","Start","End"],data:[["Washington","3/29/1789","2/3/1797"],["Adams","2/3/1797","2/3/1801"],["Jefferson","2/3/1801","2/3/1809"]]},resizeable:true,title:"Timeline",options:{}};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizeable||isNaN(chart.config.height)||isNaN(chart.config.width)){var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetElt=document.getElementById(target);var width=targetElt.clientWidth;var height=targetElt.clientHeight;dex.console.log("google.Timeline Resize: "+width+"x"+height);chart.update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=chart.config;var categoryIndex;var fromIndex;var toIndex;var types=dex.csv.guessTypes(config.csv);categoryIndex=types.indexOf("string");fromIndex=types.indexOf("date");toIndex=types.indexOf("date",fromIndex+1);if(categoryIndex==-1||fromIndex==-1||toIndex==-1){return}var chartCsv=dex.csv.columnSlice(config.csv,[categoryIndex,fromIndex,toIndex]);var data=chartCsv.data;data.unshift(dex.array.copy(chartCsv.header));dex.console.log("google.PieChart Data:",data,"Options",config.options);var dataTable=google.visualization.arrayToDataTable(data);var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var chart=new google.visualization.Timeline(document.getElementById(target));chart.draw(dataTable,config.options)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=timeline},{}],45:[function(require,module,exports){var wordtree=function(userConfig){var defaults={parent:null,id:"WordTree","class":"WordTree",csv:{header:["LINE"],data:[["Now is the time for all good men to fight."],["Now is the time for all good men to flee."],["Now is not the time."]]},resizeable:true,options:{wordtree:{format:"implicit"}}};var chart=new dex.component(userConfig,defaults);chart.render=function render(){window.onresize=this.resize;chart.resize()};chart.resize=function resize(){if(chart.config.resizeable){var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var targetElt=document.getElementById(target);var width=targetElt.clientWidth;var height=targetElt.clientHeight;dex.console.log("google.WordTree Resize: "+width+"x"+height);chart.update()}else{chart.update()}};chart.update=function update(){var chart=this;var config=chart.config;var target=config.parent&&config.parent[0]=="#"?config.parent.substring(1):config.parent;var phrases=[["Phrases"]];config.csv.data.forEach(function(row){row.forEach(function(col){phrases.push([col.toLowerCase()])})});dex.console.log("PHRASES",phrases);var data=google.visualization.arrayToDataTable(phrases);var chart=new google.visualization.WordTree(document.getElementById(target));chart.draw(data,config.options)};$(document).ready(function(){$(chart.config.parent).draggable()});return chart};module.exports=wordtree},{}],46:[function(require,module,exports){var google={};google.DiffBarChart=require("./DiffBarChart");google.DiffPieChart=require("./DiffPieChart");google.PieChart=require("./PieChart");google.Timeline=require("./Timeline");google.WordTree=require("./WordTree");module.exports=google},{"./DiffBarChart":41,"./DiffPieChart":42,"./PieChart":43,"./Timeline":44,"./WordTree":45}],47:[function(require,module,exports){var scatterplot=function(userConfig){var defaults={parent:null,id:"ScatterPlot3D","class":"ScatterPlot3D",csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,4,8],[3,9,27]]},width:400,height:400,xoffset:20,yoffset:0};var chart=new dex.component(userConfig,defaults);chart.render=function(){this.update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;var bounds={maxx:dex.matrix.max(csv.data,0),minx:dex.matrix.min(csv.data,0),maxy:dex.matrix.max(csv.data,1),miny:dex.matrix.min(csv.data,1),maxz:dex.matrix.max(csv.data,2),minz:dex.matrix.min(csv.data,2)};var i,j;function mousewheel(event){var fovMAX=160;var fovMIN=1;camera.fov-=event.wheelDeltaY*.05;camera.fov=Math.max(Math.min(camera.fov,fovMAX),fovMIN);camera.projectionMatrix=(new THREE.Matrix4).makePerspective(camera.fov,config.width/config.height,camera.near,camera.far)}function generateTexture(){var size=128;var canvas=document.createElement("canvas");canvas.width=size;canvas.height=size;var context=canvas.getContext("2d");var centerX=size/2;var centerY=size/2;var radius=size/2;context.beginPath();context.arc(centerX,centerY,radius,0,2*Math.PI,false);context.fillStyle="#FFFFFF";context.fill();return canvas}function createTextCanvas(text,color,font,size){size=size||24;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var fontStr=size+"px "+(font||"Arial");ctx.font=fontStr;var w=ctx.measureText(text).width;var h=Math.ceil(size);canvas.width=w;canvas.height=h;ctx.font=fontStr;ctx.fillStyle=color||"black";ctx.fillText(text,0,Math.ceil(size*.8));return canvas}function createText2D(text,color,font,size,segW,segH){var canvas=createTextCanvas(text,color,font,size);var plane=new THREE.PlaneGeometry(canvas.width,canvas.height,segW,segH);var tex=new THREE.Texture(canvas);tex.needsUpdate=true;var planeMat=new THREE.MeshBasicMaterial({map:tex,color:16777215,transparent:true});var mesh=new THREE.Mesh(plane,planeMat);mesh.scale.set(.25,.25,.25);mesh.doubleSided=true;return mesh}var maxRange=Math.max(Math.max(bounds.maxx-bounds.minx,bounds.maxy-bounds.miny),bounds.maxz-bounds.minz);var renderer=new THREE.WebGLRenderer({antialias:true});var w=config.width;var h=config.height;renderer.setSize(w,h);config.parent.appendChild(renderer.domElement);renderer.setClearColorHex(15658734,1);var camera=new THREE.PerspectiveCamera(45,w/h,1,1e5);camera.position.z=bounds.maxz*4;camera.position.x=0;camera.position.y=bounds.maxy*1.25;var scene=new THREE.Scene;var scatterPlot=new THREE.Object3D;scene.add(scatterPlot);scatterPlot.rotation.y=.5;function v(x,y,z){return new THREE.Vertex(new THREE.Vector3(x,y,z))}var xAxisGeo=new THREE.Geometry;var yAxisGeo=new THREE.Geometry;var zAxisGeo=new THREE.Geometry;var boundaryGeo=new THREE.Geometry;xAxisGeo.vertices.push(v(bounds.minx,0,0),v(bounds.maxx,0,0));yAxisGeo.vertices.push(v(0,bounds.miny,0),v(0,bounds.maxy,0));zAxisGeo.vertices.push(v(0,0,bounds.minz),v(0,0,bounds.maxz));boundaryGeo.vertices.push(v(bounds.minx,bounds.maxy,bounds.minz),v(bounds.maxx,bounds.maxy,bounds.minz),v(bounds.minx,bounds.miny,bounds.minz),v(bounds.maxx,bounds.miny,bounds.minz),v(bounds.minx,bounds.maxy,bounds.maxz),v(bounds.maxx,bounds.maxy,bounds.maxz),v(bounds.minx,bounds.miny,bounds.maxz),v(bounds.maxx,bounds.miny,bounds.maxz),v(bounds.minx,0,bounds.maxz),v(bounds.maxx,0,bounds.maxz),v(bounds.minx,0,bounds.minz),v(bounds.maxx,0,bounds.minz),v(bounds.minx,bounds.maxy,0),v(bounds.maxx,bounds.maxy,0),v(bounds.minx,bounds.miny,0),v(bounds.maxx,bounds.miny,0),v(bounds.maxx,bounds.miny,bounds.minz),v(bounds.maxx,bounds.maxy,bounds.minz),v(bounds.minx,bounds.miny,bounds.minz),v(bounds.minx,bounds.maxy,bounds.minz),v(bounds.maxx,bounds.miny,bounds.maxz),v(bounds.maxx,bounds.maxy,bounds.maxz),v(bounds.minx,bounds.miny,bounds.maxz),v(bounds.minx,bounds.maxy,bounds.maxz),v(0,bounds.miny,bounds.maxz),v(0,bounds.maxy,bounds.maxz),v(0,bounds.miny,bounds.minz),v(0,bounds.maxy,bounds.minz),v(bounds.maxx,bounds.miny,0),v(bounds.maxx,bounds.maxy,0),v(bounds.minx,bounds.miny,0),v(bounds.minx,bounds.maxy,0),v(bounds.maxx,bounds.maxy,bounds.minz),v(bounds.maxx,bounds.maxy,bounds.maxz),v(bounds.maxx,bounds.miny,bounds.minz),v(bounds.maxx,bounds.miny,bounds.maxz),v(bounds.minx,bounds.maxy,bounds.minz),v(bounds.minx,bounds.maxy,bounds.maxz),v(bounds.minx,bounds.miny,bounds.minz),v(bounds.minx,bounds.miny,bounds.maxz),v(bounds.minx,0,bounds.minz),v(bounds.minx,0,bounds.maxz),v(bounds.maxx,0,bounds.minz),v(bounds.maxx,0,bounds.maxz),v(0,bounds.maxy,bounds.minz),v(0,bounds.maxy,bounds.maxz),v(0,bounds.miny,bounds.minz),v(0,bounds.miny,bounds.maxz));var xAxisMat=new THREE.LineBasicMaterial({color:16711680,lineWidth:1});var xAxis=new THREE.Line(xAxisGeo,xAxisMat);xAxis.type=THREE.Lines;scatterPlot.add(xAxis);var yAxisMat=new THREE.LineBasicMaterial({color:255,lineWidth:1});var yAxis=new THREE.Line(yAxisGeo,yAxisMat);yAxis.type=THREE.Lines;scatterPlot.add(yAxis);var zAxisMat=new THREE.LineBasicMaterial({color:65280,lineWidth:1});var zAxis=new THREE.Line(zAxisGeo,zAxisMat);zAxis.type=THREE.Lines;scatterPlot.add(zAxis);var boundaryMat=new THREE.LineBasicMaterial({color:592137,lineWidth:1,transparent:true});var boundary=new THREE.Line(boundaryGeo,boundaryMat);boundary.type=THREE.Lines;scatterPlot.add(boundary);var fontSize=Math.max(Math.round(maxRange/4),8);var fontOffset=Math.min(Math.round(fontSize/4),8);console.log("OFFSET: "+fontOffset);console.log("  FONT: "+fontSize);var titleX=createText2D("-"+csv.header[0],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleX.position.x=bounds.minx-fontOffset;scatterPlot.add(titleX);var titleX=createText2D(csv.header[0],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleX.position.x=bounds.maxx+fontOffset;scatterPlot.add(titleX);var titleY=createText2D("-"+csv.header[1],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleY.position.y=bounds.miny-fontOffset;scatterPlot.add(titleY);var titleY=createText2D(csv.header[1],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleY.position.y=bounds.maxy+fontOffset;scatterPlot.add(titleY);var titleZ=createText2D("-"+csv.header[2],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleZ.position.z=bounds.minz-fontOffset;scatterPlot.add(titleZ);var titleZ=createText2D(csv.header[2],(new THREE.Color).setRGB(1,0,0),"",fontSize);titleZ.position.z=bounds.maxz+fontOffset;scatterPlot.add(titleZ);attributes={size:{type:"f",value:[]},customColor:{type:"c",value:[]}};uniforms={amplitude:{type:"f",value:1},color:{type:"c",value:new THREE.Color(16711680)}};var texture=new THREE.Texture(generateTexture());texture.needsUpdate=true;var mat=new THREE.ParticleBasicMaterial({size:Math.max(maxRange/25,1),map:texture,blending:THREE.AdditiveBlending,depthTest:false,transparent:false,opacity:.7,vertexColors:true});var pointGeo=new THREE.Geometry;var colors=[(new THREE.Color).setRGB(1,0,0),(new THREE.Color).setRGB(0,0,1),(new THREE.Color).setRGB(0,1,0),(new THREE.Color).setRGB(1,0,1),(new THREE.Color).setRGB(1,1,0),(new THREE.Color).setRGB(0,1,1),(new THREE.Color).setRGB(.5,.5,.5)];for(i=0;i<csv.data.length;i++){for(j=2;j<csv.header.length;j++){pointGeo.vertices.push(new THREE.Vertex(new THREE.Vector3(csv.data[i][0],csv.data[i][1],csv.data[i][j])));pointGeo.colors.push(colors[(j-2)%colors.length])}}var points=new THREE.ParticleSystem(pointGeo,mat);scatterPlot.add(points);renderer.render(scene,camera);var paused=false;var last=(new Date).getTime();var down=false;var sx=0,sy=0;window.onmousedown=function(ev){down=true;sx=ev.clientX;sy=ev.clientY};window.addEventListener("DOMMouseScroll",mousewheel,false);window.addEventListener("mousewheel",mousewheel,false);window.onmouseup=function(){down=false};window.onmousemove=function(ev){if(down){var dx=ev.clientX-sx;var dy=ev.clientY-sy;scatterPlot.rotation.y+=dx*.01;camera.position.y+=dy;sx+=dx;sy+=dy}};var animating=false;window.ondblclick=function(){animating=!animating};function animate(t){if(!paused){last=t;if(animating){var v=pointGeo.vertices;for(i=0;i<v.length;i++){var u=v[i];u.angle+=u.speed*.01;u.position.x=Math.cos(u.angle)*u.radius;u.position.z=Math.sin(u.angle)*u.radius}pointGeo.__dirtyVertices=true}renderer.clear();camera.lookAt(scene.position);renderer.render(scene,camera)}window.requestAnimationFrame(animate,renderer.domElement)}animate((new Date).getTime());onmessage=function(ev){paused=ev.data=="pause"}};return chart};module.exports=scatterplot},{}],48:[function(require,module,exports){var threejs={};threejs.ScatterPlot=require("./ScatterPlot");module.exports=threejs},{"./ScatterPlot":47}],49:[function(require,module,exports){exports.toHex=function(color){if(color.substr(0,1)==="#"){return color}var digits=/rgb\((\d+),(\d+),(\d+)\)/.exec(color);var red=parseInt(digits[1]);var green=parseInt(digits[2]);var blue=parseInt(digits[3]);var rgb=blue|green<<8|red<<16;return"#"+rgb.toString(16)};exports.colorScheme=function(colorScheme,numColors){if(colorScheme==="cat10"||colorScheme=="1"){return d3.scale.category10()}else if(colorScheme==="cat20"||colorScheme=="2"){return d3.scale.category20()}else if(colorScheme==="cat20b"||colorScheme=="3"){return d3.scale.category20b()}else if(colorScheme==="cat20c"||colorScheme=="4"){return d3.scale.category20c()}else if(colorScheme=="HiContrast"){return d3.scale.ordinal().range(colorbrewer[colorScheme][9])}else if(colorScheme in colorbrewer){var c;var effColors=Math.pow(2,Math.ceil(Math.log(numColors)/Math.log(2)));if(effColors>128){effColors=256}for(c=effColors;c>=2;c--){if(colorbrewer[colorScheme][c]){return d3.scale.ordinal().range(colorbrewer[colorScheme][c])}}for(c=effColors;c<=256;c++){if(colorbrewer[colorScheme][c]){return d3.scale.ordinal().range(colorbrewer[colorScheme][c])}}return d3.scale.category20()}else{return d3.scale.category20()}};exports.shadeColor=function(color,percent){var f=parseInt(color.slice(1),16),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=f>>16,G=f>>8&255,B=f&255;return"#"+(16777216+(Math.round((t-R)*p)+R)*65536+(Math.round((t-G)*p)+G)*256+(Math.round((t-B)*p)+B)).toString(16).slice(1)};exports.blendColors=function(color1,color2,percent){var f=parseInt(color1.slice(1),16),t=parseInt(color2.slice(1),16),R1=f>>16,G1=f>>8&255,B1=f&255,R2=t>>16,G2=t>>8&255,B2=t&255;return"#"+(16777216+(Math.round((R2-R1)*percent)+R1)*65536+(Math.round((G2-G1)*percent)+G1)*256+(Math.round((B2-B1)*percent)+B1)).toString(16).slice(1)};exports.shadeRGBColor=function(color,percent){var f=color.split(","),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=parseInt(f[0].slice(4)),G=parseInt(f[1]),B=parseInt(f[2]);return"rgb("+(Math.round((t-R)*p)+R)+","+(Math.round((t-G)*p)+G)+","+(Math.round((t-B)*p)+B)+")"};exports.blendRGBColors=function(color1,color2,percent){var f=color1.split(","),t=color2.split(","),R=parseInt(f[0].slice(4)),G=parseInt(f[1]),B=parseInt(f[2]);return"rgb("+(Math.round((parseInt(t[0].slice(4))-R)*p)+R)+","+(Math.round((parseInt(t[1])-G)*percent)+G)+","+(Math.round((parseInt(t[2])-B)*percent)+B)+")"};exports.shade=function(color,percent){if(color.length>7)return shadeRGBColor(color,percent);else return shadeColor2(color,percent)};exports.blend=function(color1,color2,percent){if(color1.length>7)return blendRGBColors(color1,color2,percent);else return blendColors(color1,color2,percent)};exports.gradient=function(baseColor){if(baseColor.charAt(0)=="r"){baseColor=colorToHex(baseColor)}var gradientId;gradientId="gradient"+baseColor.substring(1);console.log("GradientId: "+gradientId);console.log("BaseColor : "+baseColor);var darkColor=shadeColor(baseColor,-20);var grad=d3.select("#gradients").selectAll("#"+gradientId).data([gradientId]).enter().append("radialGradient").attr("class","colorGradient").attr("id",gradientId).attr("gradientUnits","objectBoundingBox").attr("fx","30%").attr("fy","30%");grad.append("stop").attr("offset","0%").attr("style","stop-color:#FFFFFF");grad.append("stop").attr("offset","40%").attr("style","stop-color:"+baseColor);grad.append("stop").attr("offset","100%").attr("style","stop-color:"+darkColor);return"url(#"+gradientId+")"}},{}],50:[function(require,module,exports){module.exports=function(userConfig,defaultConfig){userConfig=userConfig||{};defaultConfig=defaultConfig||{};this.debug=false;if(userConfig.hasOwnProperty("config")){this.config=dex.config.expandAndOverlay(userConfig.config,defaultConfig)}else{this.config=dex.config.expandAndOverlay(userConfig,defaultConfig)}dex.console.log("dex.component Configuration",this.config);if(!this.config.channel){this.config.channel=(this.config.parent||"#parent")+"/"+(this.config.id||"unknown-id")}this.attr=function(name,value){if(arguments.length==0){return this.config}else if(arguments.length==1){return this.config[name]}else if(arguments.length==2){dex.object.setHierarchical(this.config,name,value,".")}return this};this.subscribe=function(source,eventType,callback){if(arguments.length==3){var channel=source.config.channel+"/"+eventType;dex.console.log("subscribe to "+channel);if(arguments.length<3){dex.console.log("failed");return false}return dex.bus.subscribe(channel,callback)}else{return false}};this.unsubscribe=function(handle){dex.bus.unsubscribe(handle)};this.publish=function(event){var channel;if(!event||!event.type){dex.console.warn("publish of event to "+this.channel+" failed.");dex.bus.publish("error",{type:"error",description:"Error publishing event: '"+event+"' to '"+this.channel+"'"})}else{channel=this.config.channel+"/"+event.type;dex.console.log("publish to "+channel);dex.bus.publish(channel,event)}};this.render=function(){console.log("Unimplemented routine: render()")};this.update=function(){console.log("Unimplemented routine: update()")}}},{}],51:[function(require,module,exports){exports.expand=function expand(config){var name,ci;var expanded={};if(!config){return config}for(var name in config){if(config.hasOwnProperty(name)){if(name&&name.indexOf(".")>-1){expanded[name]=config[name];dex.object.setHierarchical(expanded,name,dex.object.clone(expanded[name]),".");delete expanded[name]}else{if(dex.object.isEmpty(config[name])){expanded[name]=dex.object.clone(config[name])}else{expanded[name]=dex.config.expand(config[name])}}}}return expanded};exports.expandAndOverlay=function expandAndOverlay(top,bottom){return dex.object.overlay(dex.config.expand(top),dex.config.expand(bottom))};exports.font=function font(custom){var defaults={decoration:"none",family:"sans-serif",letterSpacing:"normal",size:14,style:"normal",weight:"normal",wordSpacing:"normal",variant:"normal"};var fontSpec=dex.config.expandAndOverlay(custom,defaults);return fontSpec};exports.configureFont=function configureFont(node,fontSpec,i){if(fontSpec){dex.config.setAttr(node,"font-family",fontSpec.family,i);dex.config.setAttr(node,"font-size",fontSpec.size,i);dex.config.setAttr(node,"font-weight",fontSpec.weight,i);dex.config.setAttr(node,"font-style",fontSpec.style,i);dex.config.setAttr(node,"text-decoration",fontSpec.decoration,i);dex.config.setAttr(node,"word-spacing",fontSpec.wordSpacing,i);dex.config.setAttr(node,"letter-spacing",fontSpec.letterSpacing,i);dex.config.setAttr(node,"variant",fontSpec.variant,i)}return node};exports.text=function text(custom){var defaults={font:dex.config.font(),x:0,y:0,textLength:undefined,lengthAdjust:undefined,transform:"",glyphOrientationVertical:undefined,text:undefined,dx:0,dy:0,writingMode:undefined,anchor:"start",fill:dex.config.fill(),format:undefined,events:dex.config.events()};var textSpec=dex.config.expandAndOverlay(custom,defaults);return textSpec};exports.configureText=function configureText(node,textSpec,i){if(textSpec){dex.config.setAttr(node,"x",textSpec.x,i);dex.config.setAttr(node,"y",textSpec.y,i);dex.config.setAttr(node,"dx",textSpec.dx,i);dex.config.setAttr(node,"dy",textSpec.dy,i);dex.config.setStyle(node,"text-anchor",textSpec.anchor,i);dex.config.configureFont(node,textSpec.font,i);dex.config.setAttr(node,"textLength",textSpec.textLength,i);dex.config.setAttr(node,"lengthAdjust",textSpec.lengthAdjust,i);dex.config.setAttr(node,"transform",textSpec.transform,i);dex.config.setAttr(node,"glyph-orientation-vertical",textSpec.glyphOrientationVertical,i);dex.config.setAttr(node,"writing-mode",textSpec.writingMode,i);dex.config.callIfDefined(node,"text",textSpec.text,i);dex.config.configureFill(node,textSpec.fill,i);dex.config.configureEvents(node,textSpec.events,i)}return node};exports.stroke=function stroke(strokeSpec){var defaults={width:1,color:"black",opacity:1,dasharray:"",transform:""};var config=dex.config.expandAndOverlay(strokeSpec,defaults);return config};exports.configureStroke=function configureStroke(node,strokeSpec,i){if(strokeSpec){dex.config.setAttr(node,"stroke",strokeSpec.color,i);dex.config.setStyle(node,"stroke-width",strokeSpec.width,i);dex.config.setStyle(node,"stroke-opacity",strokeSpec.opacity,i);dex.config.setStyle(node,"stroke-dasharray",strokeSpec.dasharray,i);dex.config.setAttr(node,"transform",strokeSpec.transform,i)}return node};exports.fill=function fill(custom){var defaults={fillColor:"grey",fillOpacity:1};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.configureFill=function configureFill(node,config,i){if(config){dex.config.setStyle(node,"fill",config.fillColor,i);dex.config.setStyle(node,"fill-opacity",config.fillOpacity,i)}return node};exports.link=function link(custom){var defaults={fill:dex.config.fill(),stroke:dex.config.stroke(),transform:"",d:undefined,events:dex.config.events()};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.configureLink=function configureLink(node,config,i){if(config){dex.config.configureStroke(node,config.stroke,i);dex.config.configureFill(node,config.fill,i);dex.config.setAttr(node,"transform",config.transform,i);dex.config.setAttr(node,"d",config.d,i);dex.config.configureEvents(node,config.events,i)}return node};exports.rectangle=function rectangle(custom){var config={width:50,height:50,x:0,y:0,rx:0,ry:0,stroke:dex.config.stroke(),opacity:1,color:d3.scale.category20(),transform:undefined,events:dex.config.events()};if(custom){config=dex.object.overlay(custom,config)}return config};exports.configureRectangle=function configureRectangle(node,config,i){if(config){dex.config.setAttr(node,"width",config.width,i);dex.config.setAttr(node,"height",config.height,i);dex.config.setAttr(node,"x",config.x,i);dex.config.setAttr(node,"y",config.y,i);dex.config.setAttr(node,"rx",config.rx,i);dex.config.setAttr(node,"ry",config.ry,i);dex.config.setAttr(node,"opacity",config.opacity,i);dex.config.setAttr(node,"fill",config.color,i);dex.config.setAttr(node,"transform",config.transform,i);dex.config.configureStroke(node,config.stroke,i);dex.config.configureEvents(node,config.events,i)}return node};exports.events=function events(custom){var defaults={mouseover:function(d){}};var config=defaults;if(custom){config=dex.object.overlay(custom,defaults)}return config};exports.configureEvents=function configureEvents(node,config,i){if(config){for(var key in config){dex.config.setEventHandler(node,key,config[key],i)}}return node};exports.line=function line(custom){var defaults={start:dex.config.point(),end:dex.config.point(),stroke:dex.config.stroke(),fill:dex.config.fill(),interpolate:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.configureLine=function configureLine(node,config,i){if(config){dex.config.setAttr(node,"x1",config.start.x,i);dex.config.setAttr(node,"y1",config.start.y,i);dex.config.setAttr(node,"x2",config.end.x,i);dex.config.setAttr(node,"y2",config.end.y,i);dex.config.configureStroke(node,config.stroke,i);dex.config.configureFill(node,config.fill,i);if(config.interpolate){node.interpolate(config.interpolate)}}return node};exports.path=function path(custom){var defaults={fill:dex.config.fill(),stroke:dex.config.stroke()};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.configurePath=function configurePath(node,config,i){if(config){dex.config.configureFill(node,config.fill,i);dex.config.configureStroke(node,config.stroke,i)}return node};exports.getCallers=function getCallers(caller){var callers=[];var currentCaller=caller;for(;currentCaller;currentCaller=currentCaller.caller){if(currentCaller.name){callers.push(currentCaller.name)}}return callers.reverse()};exports.getCallerString=function getCallerString(caller){return dex.config.getCallers(caller).join("->")};exports.setEventHandler=function setEventHandler(node,eventType,eventHandler,i){var callerStr=dex.config.getCallerString(arguments.callee.caller);if(!node){dex.console.warn(callerStr+": dex.config.setEventHandler(eventType='"+eventType+"eventHandler="+eventHandler+") : node is null.");return node}if(!dex.object.isFunction(node.on)){dex.console.warn(callerStr+": dex.config.setEventHandler(eventType='"+eventType+"', eventHandler='"+eventHandler+"') : target node is missing function: node.on(eventType,eventHandler).  Node dump:",node);return node}if(typeof eventHandler!="undefined"){dex.console.debug(callerStr+": Set Event Handler: '"+eventType+"'='"+eventHandler+"'");node.on(eventType,eventHandler)}else{dex.console.debug(callerStr+=": Undefined Event Handler: '"+eventType+"'='"+eventHandler+"'")}return node};exports.setAttr=function setAttr(node,name,value,i){var callerStr=dex.config.getCallerString(arguments.callee.caller);if(!node){dex.console.warn(callerStr+": dex.config.setAttr(name='"+name+"value="+value+") : node is null.");return node}if(!dex.object.isFunction(node.attr)){dex.console.warn(callerStr+": dex.config.setAttr(name='"+name+"', value='"+value+"') : target node is missing function: node.attr.  Node dump:",node);return node}if(typeof value!="undefined"){dex.console.debug(callerStr+": Set Attr: '"+name+"'='"+value+"'");node.attr(name,dex.config.optionValue(value,i))}else{dex.console.debug(callerStr+=": Undefined Attr: '"+name+"'='"+value+"'")}return node};exports.setStyle=function setStyle(node,name,value,i){var callerStr=dex.config.getCallerString(arguments.callee.caller);if(!node){dex.console.warn(callerStr+": dex.config.setAttr(name='"+name+"value="+value+") : node is null.");return node}if(!dex.object.isFunction(node.style)){dex.console.warn(callerStr+": dex.config.setStyle(name='"+name+"', value='"+value+"') : target node is missing function: node.style.  Node Dump:",node);return node}if(typeof value!=="undefined"&&node&&dex.object.isFunction(node.style)){dex.console.debug(callerStr+": Set Style: name='"+name+"', Value Dump:",dex.config.optionValue(value,i));node.style(name,dex.config.optionValue(value,i))}else{dex.console.debug(callerStr+": Undefined Style: name='"+name+"', Value Dump:",value)}return node};exports.optionValue=function optionValue(option,i){if(typeof i!=="undefined"){
return function(d){if(dex.object.isFunction(option)){return option(d,i)}else{return option}}}else{return function(d,i){if(dex.object.isFunction(option)){return option(d,i)}else{return option}}}};exports.callIfDefined=function callIfDefined(node,fn,value,i){if(typeof value==="undefined"){}else{return node[fn](dex.config.optionValue(value,i))}return node};exports.point=function point(custom){var config={x:undefined,y:undefined};if(custom){config=dex.object.overlay(custom,config)}return config};exports.configurePoint=function configurePoint(node,config,i){if(config){node.attr("x",dex.config.optionValue(config.center.cx,i)).attr("y",dex.config.optionValue(config.center.cy,i))}return node};exports.configureShapeStyle=function configureShapeStyle(node,config,i){if(config){node.call(dex.config.configureStroke,config.stroke,i).attr("opacity",config.opacity).style("fill",config.color)}return node};exports.circle=function circle(custom){var config={cx:0,cy:0,r:10,fill:dex.config.fill(),stroke:dex.config.stroke(),transform:"",title:"",events:dex.config.events()};if(custom){config=dex.object.overlay(custom,config)}return config};exports.configureCircle=function configureCircle(node,config,i){if(config){dex.config.setAttr(node,"r",config.r,i);dex.config.setAttr(node,"cx",config.cx,i);dex.config.setAttr(node,"cy",config.cy,i);dex.config.setAttr(node,"transform",config.transform,i);dex.config.setAttr(node,"title",config.title,i);dex.config.configureStroke(node,config.stroke,i);dex.config.configureFill(node,config.fill,i);dex.config.configureEvents(node,config.events,i)}return node};exports.tick=function tick(custom){var config={count:5,subdivide:3,size:{major:5,minor:3,end:5},padding:5,format:d3.format(",d"),label:dex.config.text()};if(custom){config=dex.object.overlay(custom,config)}return config};exports.callConditionally=function callConditionally(fn,value,i){if(value!==undefined){if(i!==undefined){fn(value,i)}else{fn(value)}}else{}};exports.axis=function axis(custom){var defaults={scale:dex.config.scale({type:"linear"}),orient:"bottom",ticks:undefined,tickValues:undefined,tickSize:undefined,innerTickSize:undefined,outerTickSize:undefined,tickPadding:undefined,tickFormat:undefined};var axisSpec=dex.config.expandAndOverlay(custom,defaults);return axisSpec};exports.configureAxis=function configureAxis(axis,config,i){if(config){["scale","orient","ticks","tickValues","tickSize","innerTickSize","outerTickSize","tickPadding","tickFormat"].forEach(function(fn){dex.config.callConditionally(axis[fn],config[fn],i)})}return axis};exports.createAxis=function createAxis(userConfig,i){var config=dex.config.axis(userConfig);return dex.config.configureAxis(d3.svg.axis(),config,i)};exports.scale=function scale(custom){var fmap={linear:dex.config.linearScale,sqrt:dex.config.sqrtScale,pow:dex.config.powScale,time:dex.config.timeScale,log:dex.config.logScale,ordinal:dex.config.ordinalScale,quantile:dex.config.quantileScale,quantize:dex.config.quantizeScale,identity:dex.config.identityScale};var defaults={type:"linear"};var config=dex.config.expandAndOverlay(custom,defaults);return fmap[config.type](config)};exports.createScale=function createScale(scaleSpec){var scale;var fmap={linear:d3.scale.linear,sqrt:d3.scale.sqrt,pow:d3.scale.pow,time:d3.time.scale,log:d3.scale.log,ordinal:d3.scale.ordinal,quantile:d3.scale.quantile,quantize:d3.scale.quantize,identity:d3.scale.identity};if(scaleSpec){scale=fmap[scaleSpec.type]();dex.config.configureScale(scale,scaleSpec)}else{scale=d3.scale.linear()}return scale};exports.linearScale=function linearScale(custom){var defaults={type:"linear",domain:[0,100],range:[0,800],rangeRound:undefined,interpolate:undefined,clamp:undefined,nice:undefined};var linearScaleSpec=dex.config.expandAndOverlay(custom,defaults);return linearScaleSpec};exports.powScale=function powScale(custom){var defaults={type:"pow",domain:[0,100],range:[0,800],rangeRound:undefined,interpolate:undefined,clamp:undefined,nice:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.sqrtScale=function sqrtScale(custom){var defaults={type:"sqrt",domain:[0,100],range:[0,800],rangeRound:undefined,interpolate:undefined,clamp:undefined,nice:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.logScale=function logScale(custom){var defaults={type:"log",domain:[0,100],range:[0,800],rangeRound:undefined,interpolate:undefined,clamp:undefined,nice:undefined};var logSpec=dex.config.expandAndOverlay(custom,defaults);return logSpec};exports.ordinalScale=function ordinalScale(custom){var defaults={type:"ordinal",domain:undefined,range:undefined,rangeRoundBands:undefined,rangePoints:undefined,rangeBands:undefined};var ordinalSpec=dex.config.expandAndOverlay(custom,defaults);return ordinalSpec};exports.timeScale=function timeScale(custom){var defaults={type:"time",domain:undefined,range:undefined,rangeRound:undefined,interpolate:undefined,clamp:undefined,ticks:undefined,tickFormat:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.quantileScale=function quantileScale(custom){var defaults={type:"quantile",domain:undefined,range:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.quantizeScale=function quantizeScale(custom){var defaults={type:"quantize",domain:undefined,range:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.identityScale=function identityScale(custom){var defaults={type:"identity",domain:undefined,range:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.thresholdScale=function thresholdScale(custom){var defaults={type:"threshold",domain:undefined,range:undefined};var config=dex.config.expandAndOverlay(custom,defaults);return config};exports.configureScale=function configureScale(scale,config){if(config){for(var property in config){dex.console.trace("ConfigureScale Property: '"+property+"'");if(config.hasOwnProperty(property)&&property!=="type"&&config[property]!==undefined){dex.console.trace("Property: '"+property+"'");dex.config.callConditionally(scale[property],config[property])}else{dex.console.debug("Missing Property: '"+property+"'")}}}return scale}},{}],52:[function(require,module,exports){var logLevels={TRACE:5,DEBUG:4,NORMAL:3,WARN:2,FATAL:1,NONE:0};exports.logLevels=logLevels;var logLevel=logLevels.NORMAL;exports.logLevel=logLevel;exports.logWithLevel=function(msgLevel,msg){if(dex.console.logLevel()>=msgLevel){for(i=0;i<msg.length;i++){if(typeof msg[i]=="object"){console.dir(msg[i])}else{console.log(msg[i])}}}return this};exports.trace=function(){return dex.console.logWithLevel(logLevels.TRACE,arguments)};exports.debug=function(){return dex.console.logWithLevel(logLevels.DEBUG,arguments)};exports.log=function(){return dex.console.logWithLevel(logLevels.NORMAL,arguments)};exports.warn=function(){return dex.console.logWithLevel(logLevels.WARN,arguments)};exports.fatal=function(){return dex.console.logWithLevel(logLevels.FATAL,arguments)};exports.logLevel=function(_){if(!arguments.length)return logLevel;logLevel=logLevels[_];return logLevel};exports.logLevels=function(){return logLevels}},{}],53:[function(require,module,exports){exports.csv=function(header,data){var csv={header:header,data:data};return csv};exports.transpose=function(csv){return{header:csv.header,data:dex.matrix.transpose(csv.data)}};exports.getConnectionMatrix=function(csv){var matrix=[];var ri,ci;var row;var cid;var header=[];var nameToIndex={};var connectionMatrix;var uniques;var nameIndices=[];var src,dest;uniques=dex.matrix.uniques(csv.data);header=dex.matrix.flatten(uniques);nameToIndex=new Array(uniques.length);for(ri=0,cid=0;ri<uniques.length;ri++){nameToIndex[ri]={};for(ci=0;ci<uniques[ri].length;ci++){nameToIndex[ri][header[cid]]=cid;cid+=1}}matrix=new Array(header.length);for(ri=0;ri<header.length;ri++){row=new Array(header.length);for(ci=0;ci<header.length;ci++){row[ci]=0}matrix[ri]=row}for(ri=0;ri<csv.data.length;ri++){for(ci=1;ci<csv.header.length;ci++){src=nameToIndex[ci-1][csv.data[ri][ci-1]];dest=nameToIndex[ci][csv.data[ri][ci]];matrix[src][dest]=1;matrix[dest][src]=1}}connectionMatrix={header:header,connections:matrix};return connectionMatrix};exports.createMap=function(csv,keyIndex){var ri,ci,rowMap,map={};for(ri=0;ri<csv.data.length;ri+=1){if(csv.data[ri].length===csv.header.length){rowMap={};for(ci=0;ci<csv.header.length;ci+=1){rowMap[csv.header[ci]]=csv.data[ri][ci]}map[csv.data[ri][keyIndex]]=rowMap}}return map};exports.toJson=function(csv,rowIndex,columnIndex){var jsonData=[];var ri,ci,jsonRow;if(arguments.length>=3){jsonRow={};jsonRow[csv.header[columnIndex]]=csv.data[rowIndex][columnIndex];return jsonRow}else if(arguments.length===2){var jsonRow={};for(ci=0;ci<csv.header.length;ci+=1){jsonRow[csv.header[ci]]=csv.data[rowIndex][ci]}return jsonRow}else if(arguments.length===1){for(ri=0;ri<csv.data.length;ri++){var jsonRow={};for(ci=0;ci<csv.header.length;ci++){jsonRow[csv.header[ci]]=csv.data[ri][ci]}jsonData.push(jsonRow)}}return jsonData};exports.toColumnArrayJson=function(csv){var json={};var ri,ci,jsonRow;if(arguments.length===1){for(ci=0;ci<csv.header.length;ci++){json[csv.header[ci]]=[]}for(ri=0;ri<csv.data.length;ri++){for(ci=0;ci<csv.header.length;ci++){json[csv.header[ci]].push(csv.data[ri][ci])}}}return json};exports.copy=function(csv){var copy={header:dex.array.copy(csv.header),data:dex.matrix.copy(csv.data)};return copy};exports.toHierarchicalJson=function(csv){var connections=dex.csv.connections(csv);return getChildren(connections,0);function getChildren(connections,depth){var kids=[],cname;if(typeof connections==="undefined"){return kids}for(cname in connections){if(connections.hasOwnProperty(cname)){kids.push(createChild(cname,csv.header[depth],getChildren(connections[cname],depth+1)))}}return kids}function createChild(name,category,children){var child={name:name,category:category,children:children};return child}};exports.connections=function(csv){var connections={};var ri;for(ri=0;ri<csv.data.length;ri++){dex.object.connect(connections,csv.data[ri])}return connections};exports.createRowMap=function(csv,keyIndex){var map={};var ri;for(ri=0;ri<csv.data.length;ri++){if(csv.data[ri].length==csv.header.length){map[csv.data[ri][keyIndex]]=csv.data[ri]}}return map};exports.columnSlice=function(csv,columns){var slice={};slice.header=dex.array.slice(csv.header,columns);slice.data=dex.matrix.slice(csv.data,columns);return slice};exports.getNumericColumnNames=function(csv){var possibleNumeric={};var i,j,ri,ci;var numericColumns=[];for(i=0;i<csv.header.length;i++){possibleNumeric[csv.header[i]]=true}for(ri=0;ri<csv.data.length;ri++){for(ci=0;ci<csv.data[ri].length&&ci<csv.header.length;ci++){if(possibleNumeric[csv.header[ci]]&&!dex.object.isNumeric(csv.data[ri][ci])){possibleNumeric[csv.header[ci]]=false}}}for(ci=0;ci<csv.header.length;ci++){if(possibleNumeric[csv.header[ci]]){numericColumns.push(csv.header[ci])}}return numericColumns};exports.guessTypes=function(csv){var i=0;var testResults=[];csv.header.forEach(function(hdr){testResults.push({})});var numCols=csv.header.length;csv.data.forEach(function(row){for(i=0;i<numCols;i++){if(!testResults[i]["notDate"]){var date=new Date(row[i]);if(isNaN(date.getTime())){dex.console.log("not date"+i);testResults[i]["notDate"]=true}}if(!testResults[i]["notNumber"]){if(isNaN(row[i])){testResults[i]["notNumber"]=true}}}});var types=[];for(i=0;i<numCols;i++){var results=testResults[i];if(!results.notDate&&results.notNumber){types.push("date")}else if(!results.notNumber){types.push("number")}else{types.push("string")}}return types};exports.strictTypes=function strictTypes(csv){var types=dex.csv.guessTypes(csv);for(var i=0;i<types.length;i++){if(types[i]=="date"){csv.data.forEach(function(row,ri){dex.console.log("row["+ri+"]="+row[ri]);csv.data[ri][i]=new Date(csv.data[ri][i])})}else{if(types[i]=="number"){csv.data.forEach(function(row,ri){dex.console.log("row["+ri+"]="+row[ri]);csv.data[ri][i]=new Double(csv.data[ri][i])})}}}return csv};exports.getFramesByIndex=function(csv,columnIndex){var types=dex.csv.guessTypes(csv);var frameIndices;if(types[columnIndex]=="number"){frameIndices=_.uniq(csv.data.map(function(row){return row[columnIndex]})).sort(function(a,b){return a-b})}else if(types[columnIndex]=="date"){frameIndices=_.uniq(csv.data.map(function(row){return row[columnIndex]})).sort(function(a,b){a=new Date(a);b=new Date(b);return a>b?1:a<b?-1:0})}else{frameIndices=_.uniq(csv.data.map(function(row){return row[columnIndex]})).sort()}var header=dex.array.copy(csv.header);var frameIndexName=header.splice(columnIndex,1);var frames=[];for(var fi=0;fi<frameIndices.length;fi++){var frame={header:header};var frameData=[];for(var ri=0;ri<csv.data.length;ri++){if(csv.data[ri][columnIndex]==frameIndices[fi]){var frameRow=dex.array.copy(csv.data[ri]);frameRow.splice(columnIndex,1);frameData.push(frameRow)}}frame["data"]=frameData;frames.push(frame)}return{frameIndices:frameIndices,frames:frames}};exports.getNumericIndices=function(csv){var possibleNumeric={};var i,j;var numericIndices=[];for(i=0;i<csv.header.length;i++){possibleNumeric[csv.header[i]]=true}for(i=1;i<csv.data.length;i++){for(j=0;j<csv.data[i].length&&j<csv.header.length;j++){if(possibleNumeric[csv.header[j]]&&!dex.object.isNumeric(csv.data[i][j])){console.log("csv.header["+j+"]="+csv.header[j]+" is not numeric due to csv.data["+i+"]["+j+"]="+csv.data[i][j]);possibleNumeric[csv.header[j]]=false}}}for(i=0;i<csv.header.length;i++){if(possibleNumeric[csv.header[i]]){numericIndices.push(i)}}return numericIndices};exports.getCategoricalIndices=function(csv){var possibleNumeric={};var i,j;var categoricalIndices=[];for(i=0;i<csv.header.length;i++){possibleNumeric[csv.header[i]]=true}for(i=1;i<csv.data.length;i++){for(j=0;j<csv.data[i].length&&j<csv.header.length;j++){if(possibleNumeric[csv.header[j]]&&!dex.object.isNumeric(csv.data[i][j])){console.log("csv.header["+j+"]="+csv.header[j]+" is not numeric due to csv.data["+i+"]["+j+"]="+csv.data[i][j]);possibleNumeric[csv.header[j]]=false}}}for(i=0;i<csv.header.length;i++){if(!possibleNumeric[csv.header[i]]){categoricalIndices.push(i)}}return categoricalIndices};exports.isColumnNumeric=function(csv,columnNum){var i;for(i=0;i<csv.data.length;i++){if(!dex.object.isNumeric(csv.data[i][columnNum])){return false}}return true};exports.group=function(csv,columns){var ri,ci;var groups={};var returnGroups=[];var values;var key;var otherColumns;var otherHeaders;var groupName;if(arguments<2){return csv}function compare(a,b){var si,h;for(si=0;si<columns.length;si++){h=csv.header[columns[si]];if(a[h]<b[h]){return-1}else if(a[h]>b[h]){return 1}}return 0}for(ri=0;ri<csv.data.length;ri+=1){values=dex.array.slice(csv.data[ri],columns);key=values.join(":::");if(groups[key]){group=groups[key]}else{group={key:key,values:[],csv:dex.csv.csv(csv.header,[])};for(ci=0;ci<values.length;ci++){group.values.push({name:csv.header[columns[ci]],value:values[ci]})}groups[key]=group}group.csv.data.push(csv.data[ri])}for(groupName in groups){if(groups.hasOwnProperty(groupName)){returnGroups.push(groups[groupName])}}return returnGroups.sort(compare)};exports.visitCells=function(csv,func){var ci,ri;for(ri=0;ri<csv.data.length;ri++){for(ci=0;ci<csv.header.length;ci++){func(ci,ri,csv.data[ri][ci])}}};exports.longestWord=function(csv){var longest=0;for(var row=0;row<csv.data.length;row++){for(var col=0;col<csv.data[row].length;col++){if(longest<csv.data[row][col].length){longest=csv.data[row][col].length}}}return longest};exports.numericSubset=function(csv){return dex.csv.columnSlice(csv,dex.csv.getNumericIndices(csv))};exports.categoricalSubset=function(csv){return dex.csv.columnSlice(csv,dex.csv.getCategoricalIndices(csv))};exports.toJsonHierarchy=function(csv,ci){if(arguments.length==1){var result={name:"root",children:dex.csv.toJsonHierarchy(csv,0)};dex.console.log("RESULT",result);return result}else if(arguments.length==2){var valueMap={};for(var ri=0;ri<csv.data.length;ri++){if(valueMap.hasOwnProperty(csv.data[ri][ci])){valueMap[csv.data[ri][ci]]++}else{valueMap[csv.data[ri][ci]]=1}}if(ci>=csv.header.length-1){return _.keys(valueMap).map(function(key){return{name:key,size:valueMap[key]}})}else{return _.keys(valueMap).map(function(key){return{name:key,size:valueMap[key]}})}}};exports.getGraph=function(csv){var nodes=[];var links=[];var nodeNum=0;var indexMap=[];csv.header.map(function(col,ci){indexMap.push({});csv.data.map(function(row,ri){if(_.isUndefined(indexMap[ci][row[ci]])){indexMap[ci][row[ci]]=nodeNum;nodes.push({name:row[ci]});nodeNum++}})});for(var ci=1;ci<csv.header.length;ci++){csv.data.map(function(row,ri){links.push({source:indexMap[ci-1][row[ci-1]],target:indexMap[ci][row[ci]],value:1})})}return{nodes:nodes,links:links}};exports.toNestedJson=function(csv){dex.console.log("CMAP",dex.csv.getConnectionMap(csv));var result={name:csv.header[0],children:dex.csv.toNestedJsonChildren(dex.csv.getConnectionMap(csv))};dex.console.log("RESULT",result);return result};exports.toNestedJsonChildren=function(cmap){var children=[];_.keys(cmap).map(function(key){var childMap=cmap[key];if(_.keys(childMap).length<=0){children.push({name:key,size:1e3})}else{if(_.keys(childMap).length==1){children.push({name:key,children:dex.csv.toNestedJsonChildren(cmap[key])})}else{children.push({name:key,children:dex.csv.toNestedJsonChildren(cmap[key])})}}});return children};exports.getConnectionMap=function(csv){var rootMap={};var curMap={};for(var row=0;row<csv.data.length;row++){curMap=rootMap;for(var col=0;col<csv.header.length;col++){if(!_.has(curMap,csv.data[row][col])){curMap[csv.data[row][col]]={}}curMap=curMap[csv.data[row][col]]}}return rootMap}},{}],54:[function(require,module,exports){exports.randomMatrix=function(spec){var ri,ci;var matrix=[];var range=spec.max-spec.min;for(ri=0;ri<spec.rows;ri++){var row=[];for(ci=0;ci<spec.columns;ci++){row.push(Math.random()*range+spec.min)}matrix.push(row)}return matrix};exports.randomIndexedMatrix=function(spec){var ri,ci;var matrix=[];var range=spec.max-spec.min;for(ri=0;ri<spec.rows;ri++){var row=[];row.push(ri+1);for(ci=0;ci<spec.columns-1;ci++){row.push(Math.random()*range+spec.min)}matrix.push(row)}return matrix};exports.randomIntegerMatrix=function(spec){var ri,ci;var matrix=[];var range=spec.max-spec.min;for(ri=0;ri<spec.rows;ri++){var row=[];for(ci=0;ci<spec.columns;ci++){row.push(Math.round(Math.random()*range+spec.min))}matrix.push(row)}return matrix};exports.identityCsv=function(spec){var ri,ci;var csv={};csv.header=dex.datagen.identityHeader(spec);csv.data=dex.datagen.identityMatrix(spec);return csv};exports.identityMatrix=function(spec){var ri,ci;var matrix=[];for(ri=0;ri<spec.rows;ri++){var row=[];for(ci=0;ci<spec.columns;ci++){row.push("R"+(ri+1)+"C"+(ci+1))}matrix.push(row)}return matrix};exports.identityHeader=function(spec){return dex.range(1,spec.columns).map(function(i){return"C"+i})}},{}],55:[function(require,module,exports){var dex={};dex.version="0.7";dex.range=function(start,len){return _.range(start,start+len)};dex.copy=function(obj){return _.copy(obj)};dex.bus=require("../lib/pubsub");dex.array=require("./array/array");dex.color=require("./color/color");dex.config=require("./config/config");dex.console=require("./console/console");dex.csv=require("./csv/csv");dex.datagen=require("./datagen/datagen");dex.json=require("./json/json");dex.matrix=require("./matrix/matrix");dex.object=require("./object/object");dex.ui=require("./ui/ui");dex.component=require("./component/component");dex.charts=require("./charts/charts");module.exports=dex},{"../lib/pubsub":1,"./array/array":2,"./charts/charts":9,"./color/color":49,"./component/component":50,"./config/config":51,"./console/console":52,"./csv/csv":53,"./datagen/datagen":54,"./json/json":56,"./matrix/matrix":57,"./object/object":58,"./ui/ui":68}],56:[function(require,module,exports){exports.toCsv=function(json,header){var csv;var ri,ci;var data=[];if(arguments.length==2){if(Array.isArray(json)){for(ri=0;ri<json.length;ri++){var row=[];for(ci=0;ci<header.length;ci++){row.push(json[ri][header[ci]])}data.push(row)}}else{var row=[];for(ci=0;ci<header.length;ci++){row.push(json[ri][header[ci]])}data.push(row)}return dex.csv.csv(header,data)}else{return dex.json.toCsv(json,dex.json.keys(json))}};exports.keys=function(json){var keyMap={};var keys=[];var ri,key;if(Array.isArray(json)){for(ri=0;ri<json.length;ri++){for(key in json[ri]){keyMap[key]=true}}}else{for(key in json){keyMap[key]=true}}for(key in keyMap){keys.push(key)}return keys}},{}],57:[function(require,module,exports){exports.slice=function(matrix,columns,rows){var matrixSlice=new Array(0);var ri;if(arguments.length===3){for(ri=0;ri<rows.length;ri++){matrixSlice.push(dex.array.slice(matrix[rows[ri]]))}}else{for(ri=0;ri<matrix.length;ri++){matrixSlice.push(dex.array.slice(matrix[ri],columns))}}return matrixSlice};exports.uniques=function(matrix){var ci;var uniques=[];var tmatrix=dex.matrix.transpose(matrix);var ncol=tmatrix.length;for(ci=0;ci<ncol;ci+=1){uniques.push(_.uniq(tmatrix[ci]))}return uniques};exports.transpose=function(matrix){var ci;var ncols;var transposedMatrix=[];if(!matrix||matrix.length<=0||!matrix[0]||matrix[0].length<=0){return[]}ncols=matrix[0].length;for(ci=0;ci<ncols;ci++){transposedMatrix.push(matrix.map(function(row){return row[ci]}))}return transposedMatrix};exports.flatten=function(matrix){return _.flatten(matrix)};exports.extent=function(matrix,indices){var values=matrix;if(arguments.length===2){values=dex.matrix.flatten(dex.matrix.slice(matrix,indices));var max=Math.max.apply(null,values);var min=Math.min.apply(null,values);return[min,max]}};exports.combine=function(matrix1,matrix2){var result=_.clone(matrix1);var ri;for(ri=0;ri<matrix2.length;ri++){result[ri]=result[ri].concat(matrix2[ri])}return result};exports.copy=function(matrix){return matrix.map(function(row){return _.clone(row)})};exports.addIndex=function(matrix){var indexMatrix=dex.matrix.copy(matrix);for(var ri=0;ri<matrix.length;ri++){indexMatrix[ri].unshift(ri+1)}return indexMatrix};exports.isColumnNumeric=function(matrix,columnNum){for(var i=0;i<matrix.length;i++){if(!_.isNumber(matrix[i][columnNum])){return false}}return true};exports.max=function(matrix,columnNum){var maxValue=matrix[0][columnNum];var i;if(dex.matrix.isColumnNumeric(matrix,columnNum)){maxValue=parseFloat(matrix[0][columnNum]);for(i=1;i<matrix.length;i++){if(maxValue<parseFloat(matrix[i][columnNum])){maxValue=parseFloat(matrix[i][columnNum])}}}else{for(i=1;i<matrix.length;i++){if(maxValue<matrix[i][columnNum]){maxValue=matrix[i][columnNum]}}}return maxValue};exports.min=function(matrix,columnNum){var minValue=matrix[0][columnNum];var i;if(dex.matrix.isColumnNumeric(matrix,columnNum)){minValue=parseFloat(matrix[0][columnNum]);for(i=1;i<matrix.length;i++){if(minValue>parseFloat(matrix[i][columnNum])){minValue=parseFloat(matrix[i][columnNum])}}}else{for(i=1;i<matrix.length;i++){if(minValue>matrix[i][columnNum]){minValue=matrix[i][columnNum]}}}return minValue}},{}],58:[function(require,module,exports){exports.keys=function keys(obj){var keys=[];for(var key in obj){if(obj.hasOwnProperty(key)){keys.push(key)}}return keys};exports.clone=function clone(obj){var i,attr,len;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date){var copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){var copy=[];for(i=0,len=obj.length;i<len;i++){copy[i]=dex.object.clone(obj[i])}return copy}if(dex.object.isElement(obj)||dex.object.isNode(obj)){return obj}if(obj instanceof Object){var copy={};for(attr in obj){if(obj.hasOwnProperty(attr)){copy[attr]=dex.object.clone(obj[attr])}}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")};exports.isEmpty=function isEmpty(obj){if(!obj||obj instanceof Array){return true}if("object"==typeof obj){for(var key in obj){if(obj.hasOwnProperty(key)){return false}}}return true};exports.overlay=function overlay(top,bottom){var overlay=dex.object.clone(bottom);var prop;if(top!=="undefined"){for(prop in top){if(typeof top[prop]=="object"&&overlay[prop]!=null&&!(top[prop]instanceof Array)){overlay[prop]=dex.object.overlay(top[prop],overlay[prop])}else{overlay[prop]=top[prop]}}}return overlay};exports.isNode=function isNode(obj){return typeof Node==="object"?obj instanceof Node:obj&&typeof obj==="object"&&typeof obj.nodeType==="number"&&typeof obj.nodeName==="string"};exports.isElement=function isElement(obj){return typeof HTMLElement==="object"?obj instanceof HTMLElement:obj&&typeof obj==="object"&&obj.nodeType===1&&typeof obj.nodeName==="string"};exports.contains=function contains(container,obj){var i=container.length;while(i--){if(container[i]===obj){return true}}return false};exports.isFunction=function isFunction(obj){return _.isFunction(obj)};exports.connect=function connect(map,values){dex.console.log("map:",map,"values:",values);if(!values||values.length<=0){return this}if(!map[values[0]]){map[values[0]]={}}dex.object.connect(map[values[0]],values.slice(1));return this};exports.isNumeric=function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)};exports.setHierarchical=function(hierarchy,name,value,delimiter){if(hierarchy==null){hierarchy={}}if(typeof hierarchy!="object"){return hierarchy}if(arguments.length==4){return dex.object.setHierarchical(hierarchy,name.split(delimiter),value)}else{if(name.length===1){hierarchy[name[0]]=value}else{if(!(name[0]in hierarchy)){hierarchy[name[0]]={}}dex.object.setHierarchical(hierarchy[name[0]],name.splice(1),value)}}return hierarchy}},{}],59:[function(require,module,exports){var sqlquery=function(userConfig){var defaults={parent:"#SqlQuery",id:"SqlQuery","class":"SqlQuery",query:"select * from dex;",csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]}};var chart=new dex.component(userConfig,defaults);var config=config;var sql=window.SQL;var db=new sql.Database;chart.render=function(){var createStr="create table dex("+csv.header.map(function(h,i){var colName=h.trim();return"'"+colName+"' "+(dex.csv.isColumnNumeric(csv,i)?"float":"text")}).join(",")+")";console.log("CREATESTR: "+createStr);db.exec("drop table if exists dex;");db.exec(createStr);var populateSql="BEGIN;"+csv.data.map(function(row){var insertStr="insert into dex values("+row.map(function(col){return"'"+col.replace("'","")+"'"}).join(",")+");";return insertStr}).join("")+"COMMIT;";console.log(populateSql);db.exec(populateSql);chart.update()};chart.query=function(query){var csv=[];var myQuery=chart.attr("query");if(query&&query.length>0){myQuery=query}console.log("QUERY: "+myQuery);csv.header=[];csv.data=[];var rs=db.exec(myQuery);console.log("RS:");console.dir(rs);csv.header=rs[0].columns.map(function(s){return s.trim()});csv.data=rs[0].values;console.log(csv);return csv};chart.update=function(){};return chart};module.exports=sqlquery},{}],60:[function(require,module,exports){var table=function(userConfig){var defaults={parent:"#Table",id:"Table","class":"Table",csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]}};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){chart.update()};chart.update=function(){var chart=this;var config=chart.config;var csv=config.csv;d3.selectAll("#"+config.id).remove();var table=d3.select(config.parent).append("table").attr("height","100%").attr("width","100%").attr("border",1).attr("class",config["class"]).attr("id",config["id"]);var thead=table.append("thead");var tbody=table.append("tbody");thead.append("tr").selectAll("th").data(csv.header).enter().append("th").text(function(column){return column});var rows=tbody.selectAll("tr").data(csv.data).enter().append("tr");var cells=rows.selectAll("td").data(function(row){return csv.header.map(function(column,i){return{column:i,value:row[i]}})}).enter().append("td").html(function(d){return d.value})};return chart};module.exports=table},{}],61:[function(require,module,exports){var typestable=function(userConfig){var defaults={parent:"#Table",id:"Table","class":"Table",csv:{header:["X","Y","Z"],data:[[0,0,0],[1,1,1],[2,2,2]]}};var chart=new dex.component(userConfig,defaults);chart.render=function(){chart.update()};chart.update=function(){var chart=this;var config=chart.config;var types=dex.csv.guessTypes(config.csv);var csv=dex.csv.copy(config.csv);d3.selectAll("#"+config.id).remove();var table=d3.select(config.parent).append("table").attr("height","100%").attr("width","100%").attr("border",1).attr("class",config["class"]).attr("id",config["id"]);var thead=table.append("thead");var tbody=table.append("tbody");thead.append("tr").selectAll("th").data(csv.header).enter().append("th").text(function(column,i){return column+" ("+types[i]+")"});var rows=tbody.selectAll("tr").data(csv.data).enter().append("tr");var cells=rows.selectAll("td").data(function(row){return csv.header.map(function(column,i){return{column:i,value:row[i]}})}).enter().append("td").html(function(d){return d.value})};return chart};module.exports=typestable},{}],62:[function(require,module,exports){var configurationbox=function(userConfig){var defaults={parent:"body",id:"ConfigurationBox","class":"ui-widget-content",width:600,height:100,xoffset:10,yoffset:10,title:"Options",components:[],resizable:true,draggable:true};var chart=new dex.component(userConfig,defaults);chart.render=function(){var chart=this;var config=chart.config;var i;var chartContainer=$(config.parent);chart.main=jQuery("<div/>",{id:config["id"],"class":config["class"]}).appendTo(chartContainer);for(i=0;i<config.components.length;i++){config.components[i].attr("parent",chart.main);config.components[i].render()}chart.main.css("width",config.width);chart.main.css("height",config.height);chart.update()};chart.update=function(){var chart=this,config=chart.config,ri,ci;jQuery("<h3/>",{"class":"ui-widget-header",text:config.title}).appendTo(chart.main);for(ci=0;ci<config.components.length;ci+=1){config.components[ci].update();config.components[ci].dom().appendTo(chart.main)}config.resizable&&$("#"+config.id).resizable();config.draggable&&$("#"+config.id).draggable()};chart.dom=function(){return chart.main};chart.add=function(components){var chart=this,config=chart.config,i;for(i=0;i<arguments.length;i+=1){config.components.push(arguments[i])}return chart};return chart};module.exports=configurationbox},{}],63:[function(require,module,exports){var player=function(userConfig){var defaults={parent:null,id:"Player","class":"ui-widget-content",width:600,height:100,delay:1e3,frameIndex:0,csv:{header:["C1","C2","C3"],data:[[1,2,3],[2,3,4],[3,4,5]]}};var chart=new dex.component(userConfig,defaults);var config=chart.config;var frames=dex.csv.getFramesByIndex(config.csv,config.frameIndex);var frameNum=0;chart.attr("frames",frames);chart.render=function(){var timer;var state="stopped";frames=dex.csv.getFramesByIndex(config.csv,config.frameIndex);dex.console.log(frames);chart.attr("frames",frames);dex.console.log("FRAMES:",frames);$(function(){$("#beginning").button({text:false,icons:{primary:"ui-icon-seek-start"}}).click(function(){gotoFrame(0)});$("#previous").button({text:false,icons:{primary:"ui-icon-seek-prev"}}).click(function(){previous()});$("#play").button({text:false,icons:{primary:"ui-icon-play"}}).click(function(){var options;if($(this).text()==="play"){options={label:"pause",icons:{primary:"ui-icon-pause"}};play()}else{options={label:"play",icons:{primary:"ui-icon-play"}};clearTimeout(timer)}$(this).button("option",options)});$("#next").button({text:false,icons:{primary:"ui-icon-seek-next"}}).click(function(){next()});$("#end").button({text:false,icons:{primary:"ui-icon-seek-end"}}).click(function(){gotoFrame(frames.frames.length-1)})});function play(){frameNum++;gotoFrame(frameNum>=frames.frameIndices.length?0:frameNum);timer=setTimeout(play,config.delay)}gotoFrame(0)};chart.update=function(){frames=dex.csv.getFramesByIndex(config.csv,config.frameIndex);chart.attr("frames",frames);

gotoFrame(0)};function previous(){gotoFrame(frameNum>0?frameNum-1:0)}function next(){gotoFrame((frameNum+1)%frames.frameIndices.length)}function gotoFrame(frameIndex){frameNum=frameIndex;chart.publish({type:"new-frame",data:frames.frames[frameNum],name:frames.frameIndices[frameNum],frameBy:csv.header[config.frameIndex]});dex.console.log("Displaying frame: "+frameNum)}$(document).ready(function(){});return chart};module.exports=player},{}],64:[function(require,module,exports){var selectable=function(userConfig){var defaults={parent:null,id:"Selectable","class":"Selectable",width:200,height:100,xoffset:10,yoffset:10,label:"",selection:["X","Y"],mode:"SINGLE",options:{}};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){var chart=this,config=chart.config,i;dex.console.debug("RENDERING: "+config.id);if(config.mode=="SINGLE"){chart.attr("options.stop",function(event,ui){$(event.target).children(".ui-selected").not(":first").removeClass("ui-selected")})}chart.attr("options.selected",function(event,ui){chart.publish({type:"selected",id:ui.selected.id})});chart.attr("options.unselected",function(event,ui){chart.publish({type:"unselected",id:ui.unselected.id})});chart.main=jQuery("<div/>",{id:config["id"],"class":config["class"]}).appendTo(config["parent"]);var label=jQuery("<div/>",{id:config["id"]+"-label",text:config["label"]}).appendTo(chart.main);var orderedList=jQuery("<ol/>",{id:config["id"]+"-ol"}).appendTo(chart.main);orderedList.css("overflow","scroll");orderedList.css("border","1px solid black");orderedList.css("height",config.height+"px");orderedList.css("width",config.width+"px");for(i=0;i<config.selection.length;i++){var selectable=jQuery("<li/>",{id:i,"class":"ui-widget-content",text:config.selection[i]}).appendTo(orderedList)}$("#"+config["id"]+"-ol").children().first().addClass("ui-selected");$("#"+config["id"]+"-ol").selectable(config.options)};chart.update=function(){};chart.dom=function(){return chart.main};return chart};module.exports=selectable},{}],65:[function(require,module,exports){var slider=function(userConfig){var defaults={parent:null,id:"Slider","class":"ui-widget-content",width:600,height:100,xoffset:10,yoffset:10,label:"",options:{range:"max",min:1,max:10,value:5,slide:null}};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.render=function(){var chart=this,config=chart.config,ri,ci;var chart=this;chart.attr("options.slide",function(event,ui){$("#"+config["id"]+"-input").val(ui.value);chart.publish("slider-change",{type:"slider-change",value:ui.value})});chart.main=jQuery("<div/>",{id:config["id"],"class":config["class"]}).appendTo(config["parent"]);var label=jQuery("<label/>",{id:config["id"+"-label"],"class":"SliderLabel",text:config["label"]}).appendTo(chart.main);var input=jQuery("<input/>",{type:"text",id:config["id"]+"-input","class":"SliderInput",value:config.options.value}).appendTo(chart.main);var slider=jQuery("<div/>",{id:config["id"]+"-slider","class":config["class"]}).appendTo(chart.main);$("#"+config["id"]+"-slider").slider(config.options)};chart.update=function(){};chart.dom=function(){return chart.main};return chart};module.exports=slider},{}],66:[function(require,module,exports){var tabs=function(userConfig){var defaults={parent:null,id:"Tabs","class":"ui-widget-content",width:600,height:100,xoffset:10,yoffset:10,title:"Options",components:[],resizeable:true,draggable:true};var chart=new dex.component(userConfig,defaults);var config=chart.config;chart.tabs=[];chart.render=function(){var chart=this,config=chart.config,tabs=chart.tabs,ri,ci,i,j,tab,tabName;if(config.parent===null){config.parent=document.body}chart.main=jQuery("<div/>",{id:config["id"],"class":config["class"]}).appendTo(config.parent);var tabNames=jQuery("<ul/>").appendTo(chart.main);for(i=0;i<tabs.length;i+=1){jQuery('<li><a href="#'+config.id+"-"+(i+1)+'">'+tabs[i].name+"</a></li>").appendTo(tabNames)}for(i=0;i<tabs.length;i+=1){var tabBody=jQuery('<div id="'+config.id+"-"+(i+1)+'"/>').appendTo(chart.main);for(j=0;j<tabs[i].children.length;j++){tabs[i].children[j].attr("parent",tabBody);tabs[i].children[j].render();tabs[i].children[j].dom().appendTo(tabBody)}}chart.main.tabs()};chart.update=function(){};chart.dom=function(){return chart.main};chart.add=function(tabName,components){var chart=this,config=chart.config,tabs=chart.tabs,i,ti,tab;if(typeof tabName==="undefined"){return}dex.console.debug("TABS",chart);ti=_.findIndex(tabs,{id:tabName});if(ti>=0){tab=tabs[ti]}else{tab={name:tabName,children:[]};tabs.push(tab)}for(i=1;i<arguments.length;i+=1){tab.children.push(arguments[i])}dex.console.debug("ATABS",tabs,tab);return chart};return chart};module.exports=tabs},{}],67:[function(require,module,exports){var jqueryui={};jqueryui.ConfigurationBox=require("./ConfigurationBox");jqueryui.Player=require("./Player");jqueryui.Selectable=require("./Selectable");jqueryui.Slider=require("./Slider");jqueryui.Tabs=require("./Tabs");module.exports=jqueryui},{"./ConfigurationBox":62,"./Player":63,"./Selectable":64,"./Slider":65,"./Tabs":66}],68:[function(require,module,exports){var ui={};ui.jqueryui=require("./jqueryui/jqueryui");ui.SqlQuery=require("./SqlQuery");ui.Table=require("./Table");ui.TypesTable=require("./TypesTable");module.exports=ui},{"./SqlQuery":59,"./Table":60,"./TypesTable":61,"./jqueryui/jqueryui":67}]},{},[55])(55)});